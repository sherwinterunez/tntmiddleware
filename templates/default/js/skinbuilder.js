/*
Product Name: SkinBuilder 
Version: 5.0 
Edition: Standard 
License: content of this file is covered by GPL. Usage outside GPL terms is prohibited. To obtain Commercial or Enterprise license contact sales@dhtmlx.com
Copyright UAB Dinamenta http://www.dhtmlx.com
*/

if(typeof(window.dhx)=="undefined"){window.dhx=window.dhx4={version:"5.0",skin:null,skinDetect:function(a){return{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace",40:"material"}[this.readFromCss(a+"_skin_detect")]||null},readFromCss:function(c,d,e){var b=document.createElement("DIV");b.className=c;if(document.body.firstChild!=null){document.body.insertBefore(b,document.body.firstChild)}else{document.body.appendChild(b)}if(typeof(e)=="string"){b.innerHTML=e}var a=b[d||"offsetWidth"];b.parentNode.removeChild(b);b=null;return a},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var c=this.first();for(var b in this.data){c=Math.max(c,this.data[b])}return c},reserve:function(a){this.data[a]=this.last()+this.step;return this.data[a]},clear:function(a){if(this.data[a]!=null){this.data[a]=null;delete this.data[a]}}},s2b:function(a){if(typeof(a)=="string"){a=a.toLowerCase()}return(a==true||a==1||a=="true"||a=="1"||a=="yes"||a=="y"||a=="on")},s2j:function(s){var obj=null;dhx4.temp=null;try{eval("dhx4.temp="+s)}catch(e){dhx4.temp=null}obj=dhx4.temp;dhx4.temp=null;return obj},absLeft:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).left},absTop:function(a){if(typeof(a)=="string"){a=document.getElementById(a)}return this.getOffset(a).top},_aOfs:function(a){var c=0,b=0;while(a){c=c+parseInt(a.offsetTop);b=b+parseInt(a.offsetLeft);a=a.offsetParent}return{top:c,left:b}},_aOfsRect:function(d){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var j=b.clientLeft||h.clientLeft||0;var l=g.top+a-f;var c=g.left+e-j;return{top:Math.round(l),left:Math.round(c)}},getOffset:function(a){if(a.getBoundingClientRect){return this._aOfsRect(a)}else{return this._aOfs(a)}},_isObj:function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")},_copyObj:function(d){if(this._isObj(d)){var c={};for(var b in d){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}else{var c=[];for(var b=0;b<d.length;b++){if(typeof(d[b])=="object"&&d[b]!=null){c[b]=this._copyObj(d[b])}else{c[b]=d[b]}}}return c},screenDim:function(){var a=(navigator.userAgent.indexOf("MSIE")>=0);var b={};b.left=document.body.scrollLeft;b.right=b.left+(window.innerWidth||document.body.clientWidth);b.top=Math.max((a?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop);b.bottom=b.top+(a?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight);return b},selectTextRange:function(d,g,b){d=(typeof(d)=="string"?document.getElementById(d):d);var a=d.value.length;g=Math.max(Math.min(g,a),0);b=Math.min(b,a);if(d.setSelectionRange){try{d.setSelectionRange(g,b)}catch(f){}}else{if(d.createTextRange){var c=d.createTextRange();c.moveStart("character",g);c.moveEnd("character",b-a);try{c.select()}catch(f){}}}},transData:null,transDetect:function(){if(this.transData==null){this.transData={transProp:false,transEv:null};var c={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var b in c){if(this.transData.transProp==false&&document.documentElement.style[b]!=null){this.transData.transProp=b;this.transData.transEv=c[b]}}c=null}return this.transData},_xmlNodeValue:function(a){var c="";for(var b=0;b<a.childNodes.length;b++){c+=(a.childNodes[b].nodeValue!=null?a.childNodes[b].nodeValue.toString().replace(/^[\n\r\s]{0,}/,"").replace(/[\n\r\s]{0,}$/,""):"")}return c}};window.dhx4.isIE=(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE6=(window.XMLHttpRequest==null&&navigator.userAgent.indexOf("MSIE")>=0);window.dhx4.isIE7=(navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0);window.dhx4.isIE8=(navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE9=(navigator.userAgent.indexOf("MSIE 9.0")>=0&&navigator.userAgent.indexOf("Trident")>=0);window.dhx4.isIE10=(navigator.userAgent.indexOf("MSIE 10.0")>=0&&navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled!=true);window.dhx4.isIE11=(navigator.userAgent.indexOf("Trident")>=0&&window.navigator.pointerEnabled==true);window.dhx4.isEdge=(navigator.userAgent.indexOf("Edge")>=0);window.dhx4.isOpera=(navigator.userAgent.indexOf("Opera")>=0);window.dhx4.isChrome=(navigator.userAgent.indexOf("Chrome")>=0)&&!window.dhx4.isEdge;window.dhx4.isKHTML=(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0)&&!window.dhx4.isEdge;window.dhx4.isFF=(navigator.userAgent.indexOf("Firefox")>=0);window.dhx4.isIPad=(navigator.userAgent.search(/iPad/gi)>=0);window.dhx4.dnd={evs:{},p_en:((window.dhx4.isIE||window.dhx4.isEdge)&&(window.navigator.pointerEnabled||window.navigator.msPointerEnabled)),_mTouch:function(a){return(window.dhx4.isIE10&&a.pointerType==a.MSPOINTER_TYPE_MOUSE||window.dhx4.isIE11&&a.pointerType=="mouse"||window.dhx4.isEdge&&a.pointerType=="mouse")},_touchOn:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="";a=null},_touchOff:function(a){if(a==null){a=document.body}a.style.touchAction=a.style.msTouchAction="none";a=null}};if(window.navigator.pointerEnabled==true){window.dhx4.dnd.evs={start:"pointerdown",move:"pointermove",end:"pointerup"}}else{if(window.navigator.msPointerEnabled==true){window.dhx4.dnd.evs={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}}else{if(typeof(window.addEventListener)!="undefined"){window.dhx4.dnd.evs={start:"touchstart",move:"touchmove",end:"touchend"}}}}}if(typeof(window.dhx4.template)=="undefined"){window.dhx4.trim=function(a){return String(a).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")};window.dhx4.template=function(b,c,a){return b.replace(/#([a-z0-9_-]{1,})(\|([^#]*))?#/gi,function(){var g=arguments[1];var f=window.dhx4.trim(arguments[3]);var h=null;var e=[c[g]];if(f.length>0){f=f.split(":");var d=[];for(var j=0;j<f.length;j++){if(j>0&&d[d.length-1].match(/\\$/)!=null){d[d.length-1]=d[d.length-1].replace(/\\$/,"")+":"+f[j]}else{d.push(f[j])}}h=d[0];for(var j=1;j<d.length;j++){e.push(d[j])}}if(typeof(h)=="string"&&typeof(window.dhx4.template[h])=="function"){return window.dhx4.template[h].apply(window.dhx4.template,e)}if(g.length>0&&typeof(c[g])!="undefined"){if(a==true){return window.dhx4.trim(c[g])}return String(c[g])}return""})};window.dhx4.template.date=function(a,b){if(a!=null){if(a instanceof Date){return window.dhx4.date2str(a,b)}else{a=a.toString();if(a.match(/^\d*$/)!=null){return window.dhx4.date2str(new Date(parseInt(a)),b)}return a}}return""};window.dhx4.template.maxlength=function(b,a){return String(b).substr(0,a)};window.dhx4.template.number_format=function(d,e,c,a){var b=window.dhx4.template._parseFmt(e,c,a);if(b==false){return d}return window.dhx4.template._getFmtValue(d,b)};window.dhx4.template.lowercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toLowerCase()};window.dhx4.template.uppercase=function(a){if(typeof(a)=="undefined"||a==null){a=""}return String(a).toUpperCase()};window.dhx4.template._parseFmt=function(h,c,a){var d=h.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(d==null||d.length!=4){return false}var b={i_len:false,i_sep:(typeof(c)=="string"?c:","),d_len:false,d_sep:(typeof(a)=="string"?a:"."),s_bef:(typeof(d[1])=="string"?d[1]:""),s_aft:(typeof(d[3])=="string"?d[3]:"")};var g=d[2].split(".");if(g[1]!=null){b.d_len=g[1].length}var e=g[0].split(",");if(e.length>1){b.i_len=e[e.length-1].length}return b};window.dhx4.template._getFmtValue=function(value,fmt){var r=String(value).match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(r!=null&&r.length==5){var v0="";if(r[1]!=null){v0+=r[1]}v0+=fmt.s_bef;if(fmt.i_len!==false){var i=0;var v1="";for(var q=r[2].length-1;q>=0;q--){v1=""+r[2].charAt(q)+v1;if(++i==fmt.i_len&&q>0){v1=fmt.i_sep+v1;i=0}}v0+=v1}else{v0+=r[2]}if(fmt.d_len!==false){if(r[4]==null){r[4]=""}while(r[4].length<fmt.d_len){r[4]+="0"}eval("dhx4.temp = new RegExp(/\\d{"+fmt.d_len+"}/);");var t1=(r[4]).match(dhx4.temp);if(t1!=null){v0+=fmt.d_sep+t1}dhx4.temp=t1=null}v0+=fmt.s_aft;return v0}return value}}if(typeof(window.dhx4.dateLang)=="undefined"){window.dhx4.dateLang="en";window.dhx4.dateStrings={en:{monthFullName:["January","February","March","April","May","June","July","August","September","October","November","December"],monthShortName:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayFullName:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayShortName:["Su","Mo","Tu","We","Th","Fr","Sa"]}};window.dhx4.dateFormat={en:"%Y-%m-%d"};window.dhx4.date2str=function(f,d,a){if(d==null||typeof(d)=="undefined"){d=window.dhx4.dateFormat[window.dhx4.dateLang]}if(a==null||typeof(a)=="undefined"){a=window.dhx4.dateStrings[window.dhx4.dateLang]}if(f instanceof Date){var e=function(g){return(String(g).length==1?"0"+String(g):g)};var b=function(j){switch(j){case"%d":return e(f.getDate());case"%j":return f.getDate();case"%D":return a.dayShortName[f.getDay()];case"%l":return a.dayFullName[f.getDay()];case"%m":return e(f.getMonth()+1);case"%n":return f.getMonth()+1;case"%M":return a.monthShortName[f.getMonth()];case"%F":return a.monthFullName[f.getMonth()];case"%y":return e(f.getYear()%100);case"%Y":return f.getFullYear();case"%g":return(f.getHours()+11)%12+1;case"%h":return e((f.getHours()+11)%12+1);case"%G":return f.getHours();case"%H":return e(f.getHours());case"%i":return e(f.getMinutes());case"%s":return e(f.getSeconds());case"%a":return(f.getHours()>11?"pm":"am");case"%A":return(f.getHours()>11?"PM":"AM");case"%%":return"%";case"%u":return f.getMilliseconds();case"%P":if(window.dhx4.temp_calendar!=null&&window.dhx4.temp_calendar.tz!=null){return window.dhx4.temp_calendar.tz}var n=f.getTimezoneOffset();var l=Math.abs(Math.floor(n/60));var g=Math.abs(n)-l*60;return(n>0?"-":"+")+e(l)+":"+e(g);default:return j}};var c=String(d||window.dhx4.dateFormat).replace(/%[a-zA-Z]/g,b)}return(c||String(f))};window.dhx4.str2date=function(g,t,y){if(t==null||typeof(t)=="undefined"){t=window.dhx4.dateFormat[window.dhx4.dateLang]}if(y==null||typeof(y)=="undefined"){y=window.dhx4.dateStrings[window.dhx4.dateLang]}t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var x=[];var l=[];t=t.replace(/%[a-z]/gi,function(e){switch(e){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":l.push(e);return"(\\d{2})";case"%D":case"%l":case"%M":case"%F":l.push(e);return"([a-zéûä\u0430-\u044F\u0451]{1,})";case"%j":case"%n":case"%g":case"%G":l.push(e);return"(\\d{1,2})";case"%Y":l.push(e);return"(\\d{4})";case"%a":l.push(e);return"([a|p]m)";case"%A":l.push(e);return"([A|P]M)";case"%u":l.push(e);return"(\\d{1,6})";case"%P":l.push(e);return"([+-]\\d{1,2}:\\d{1,2})"}return e});var z=new RegExp(t,"i");var m=g.match(z);if(m==null||m.length-1!=l.length){return"Invalid Date"}for(var b=1;b<m.length;b++){x.push(m[b])}var c={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7,"%u":7,"%P":7};var n={};var j={};for(var b=0;b<l.length;b++){if(typeof(c[l[b]])!="undefined"){var d=c[l[b]];if(!n[d]){n[d]=[];j[d]=[]}n[d].push(x[b]);j[d].push(l[b])}}x=[];l=[];for(var b=1;b<=7;b++){if(n[b]!=null){for(var s=0;s<n[b].length;s++){x.push(n[b][s]);l.push(j[b][s])}}}var a=new Date();a.setDate(1);a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);var o=function(r,e){for(var f=0;f<e.length;f++){if(e[f].toLowerCase()==r){return f}}return -1};for(var b=0;b<x.length;b++){switch(l[b]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":case"%u":if(!isNaN(x[b])){a[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds","%u":"setMilliseconds"}[l[b]]](Number(x[b])+(l[b]=="%m"||l[b]=="%n"?-1:0))}break;case"%M":case"%F":var h=o(x[b].toLowerCase(),y[{"%M":"monthShortName","%F":"monthFullName"}[l[b]]]);if(h>=0){a.setMonth(h)}break;case"%y":if(!isNaN(x[b])){var u=Number(x[b]);a.setFullYear(u+(u>50?1900:2000))}break;case"%g":case"%h":if(!isNaN(x[b])){var u=Number(x[b]);if(u<=12&&u>=0){a.setHours(u+(o("pm",x)>=0?(u==12?0:12):(u==12?-12:0)))}}break;case"%P":if(window.dhx4.temp_calendar!=null){window.dhx4.temp_calendar.tz=x[b]}break}}return a}}if(typeof(window.dhx4.ajax)=="undefined"){window.dhx4.ajax={cache:false,method:"get",parse:function(a){if(typeof a!=="string"){return a}a=a.replace(/^[\s]+/,"");if(window.DOMParser&&!dhx4.isIE){var b=(new window.DOMParser()).parseFromString(a,"text/xml")}else{if(window.ActiveXObject!==window.undefined){var b=new window.ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a)}}return b},xmltop:function(a,d,c){if(typeof d.status=="undefined"||d.status<400){xml=(!d.responseXML)?dhx4.ajax.parse(d.responseText||d):(d.responseXML||d);if(xml&&xml.documentElement!==null){try{if(!xml.getElementsByTagName("parsererror").length){return xml.getElementsByTagName(a)[0]}}catch(b){}}}if(c!==-1){dhx4.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],c])}return document.createElement("DIV")},xpath:function(c,a){if(!a.nodeName){a=a.responseXML||a}if(dhx4.isIE){try{return a.selectNodes(c)||[]}catch(f){return[]}}else{var d=[];var g;var b=(a.ownerDocument||a).evaluate(c,a,null,XPathResult.ANY_TYPE,null);while(g=b.iterateNext()){d.push(g)}return d}},query:function(a){dhx4.ajax._call((a.method||"GET"),a.url,a.data||"",(a.async||true),a.callback,null,a.headers)},get:function(a,b){return this._call("GET",a,null,true,b)},getSync:function(a){return this._call("GET",a,null,false)},put:function(b,a,c){return this._call("PUT",b,a,true,c)},del:function(b,a,c){return this._call("DELETE",b,a,true,c)},post:function(b,a,c){if(arguments.length==1){a=""}else{if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a])=="function")){c=a;a=""}else{a=String(a)}}return this._call("POST",b,a,true,c)},postSync:function(b,a){a=(a==null?"":String(a));return this._call("POST",b,a,false)},getLong:function(a,b){this._call("GET",a,null,true,b,{url:a})},postLong:function(b,a,c){if(arguments.length==2&&(typeof(a)=="function"||typeof(window[a]))){c=a;a=""}this._call("POST",b,a,true,c,{url:b,postData:a})},_call:function(a,b,c,e,g,l,d){var j=(window.XMLHttpRequest&&!dhx4.isIE?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));var f=(navigator.userAgent.match(/AppleWebKit/)!=null&&navigator.userAgent.match(/Qt/)!=null&&navigator.userAgent.match(/Safari/)!=null);if(e==true){j.onreadystatechange=function(){if((j.readyState==4)||(f==true&&j.readyState==3)){if(j.status!=200||j.responseText==""){if(!dhx4.callEvent("onAjaxError",[{xmlDoc:j,filePath:b,async:e}])){return}}window.setTimeout(function(){if(typeof(g)=="function"){g.apply(window,[{xmlDoc:j,filePath:b,async:e}])}if(l!=null){if(typeof(l.postData)!="undefined"){dhx4.ajax.postLong(l.url,l.postData,g)}else{dhx4.ajax.getLong(l.url,g)}}g=null;j=null},1)}}}if(a=="GET"){b+=this._dhxr(b)}j.open(a,b,e);if(d!=null){for(var h in d){j.setRequestHeader(h,d[h])}}else{if(a=="POST"||a=="PUT"||a=="DELETE"){j.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}else{if(a=="GET"){c=null}}}j.setRequestHeader("X-Requested-With","XMLHttpRequest");j.send(c);if(e!=true){if((j.readyState==4)||(f==true&&j.readyState==3)){if(j.status!=200||j.responseText==""){dhx4.callEvent("onAjaxError",[{xmlDoc:j,filePath:b,async:e}])}}}return{xmlDoc:j,filePath:b,async:e}},_dhxr:function(a,b){if(this.cache!=true){if(a.match(/^[\?\&]$/)==null){a=(a.indexOf("?")>=0?"&":"?")}if(typeof(b)=="undefined"){b=true}return a+"dhxr"+new Date().getTime()+(b==true?"=1":"")}return""}}}if(typeof(window.dhx4._enableDataLoading)=="undefined"){window.dhx4._enableDataLoading=function(g,c,f,e,h){if(h=="clear"){for(var b in g._dhxdataload){g._dhxdataload[b]=null;delete g._dhxdataload[b]}g._loadData=null;g._dhxdataload=null;g.load=null;g.loadStruct=null;g=null;return}g._dhxdataload={initObj:c,xmlToJson:f,xmlRootTag:e,onBeforeXLS:null};g._loadData=function(o,q,r){if(arguments.length==2){r=q;q=null}var n=null;if(arguments.length==3){r=arguments[2]}if(typeof(o)=="string"){var m=o.replace(/^\s{1,}/,"").replace(/\s{1,}$/,"");var v=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(v.test(m.replace(/^<\?xml[^\?]*\?>\s*/,""))){n=dhx4.ajax.parse(o);if(n!=null){n=this[this._dhxdataload.xmlToJson].apply(this,[n])}}if(n==null&&(m.match(/^[\s\S]*{[.\s\S]*}[\s\S]*$/)!=null||m.match(/^[\s\S]*\[[.\s\S]*\][\s\S]*$/)!=null)){n=dhx4.s2j(m)}if(n==null){this.callEvent("onXLS",[]);var l=[];if(typeof(this._dhxdataload.onBeforeXLS)=="function"){var m=this._dhxdataload.onBeforeXLS.apply(this,[o]);if(m!=null&&typeof(m)=="object"){if(m.url!=null){o=m.url}if(m.params!=null){for(var s in m.params){l.push(s+"="+encodeURIComponent(m.params[s]))}}}}var u=this;var j=function(a){var t=null;if((a.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||(a.xmlDoc.responseText.replace(/^\s{1,}/,"")).match(/^</)!=null){t=u[u._dhxdataload.xmlToJson].apply(u,[a.xmlDoc.responseXML])}else{t=dhx4.s2j(a.xmlDoc.responseText)}if(t!=null){u[u._dhxdataload.initObj].apply(u,[t,o])}u.callEvent("onXLE",[]);if(r!=null){if(typeof(r)=="function"){r.apply(u,[])}else{if(typeof(window[r])=="function"){window[r].apply(u,[])}}}j=r=null;t=a=u=null};l=l.join("&")+(typeof(q)=="string"?"&"+q:"");if(dhx4.ajax.method=="post"){dhx4.ajax.post(o,l,j)}else{if(dhx4.ajax.method=="get"){dhx4.ajax.get(o+(l.length>0?(o.indexOf("?")>0?"&":"?")+l:""),j)}}return}}else{if(typeof(o.documentElement)=="object"||(typeof(o.tagName)!="undefined"&&typeof(o.getElementsByTagName)!="undefined"&&o.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0)){n=this[this._dhxdataload.xmlToJson].apply(this,[o])}else{n=window.dhx4._copyObj(o)}}if(n!=null){this[this._dhxdataload.initObj].apply(this,[n])}if(r!=null){if(typeof(r)=="function"){r.apply(this,[])}else{if(typeof(window[r])=="function"){window[r].apply(this,[])}}r=null}};if(h!=null){var d={struct:"loadStruct",data:"load"};for(var b in h){if(h[b]==true){g[d[b]]=function(){return this._loadData.apply(this,arguments)}}}}g=null}}if(typeof(window.dhx4._eventable)=="undefined"){window.dhx4._eventable=function(a,b){if(b=="clear"){a.detachAllEvents();a.dhxevs=null;a.attachEvent=null;a.detachEvent=null;a.checkEvent=null;a.callEvent=null;a.detachAllEvents=null;a=null;return}a.dhxevs={data:{}};a.attachEvent=function(c,e){c=String(c).toLowerCase();if(!this.dhxevs.data[c]){this.dhxevs.data[c]={}}var d=window.dhx4.newId();this.dhxevs.data[c][d]=e;return d};a.detachEvent=function(f){for(var d in this.dhxevs.data){var e=0;for(var c in this.dhxevs.data[d]){if(c==f){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}else{e++}}if(e==0){this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}}};a.checkEvent=function(c){c=String(c).toLowerCase();return(this.dhxevs.data[c]!=null)};a.callEvent=function(d,f){d=String(d).toLowerCase();if(this.dhxevs.data[d]==null){return true}var e=true;for(var c in this.dhxevs.data[d]){e=this.dhxevs.data[d][c].apply(this,f)&&e}return e};a.detachAllEvents=function(){for(var d in this.dhxevs.data){for(var c in this.dhxevs.data[d]){this.dhxevs.data[d][c]=null;delete this.dhxevs.data[d][c]}this.dhxevs.data[d]=null;delete this.dhxevs.data[d]}};a=null};dhx4._eventable(dhx4)}if(!window.dhtmlxValidation){dhtmlxValidation=function(){};dhtmlxValidation.prototype={isEmpty:function(a){return a==""},isNotEmpty:function(a){return(a instanceof Array?a.length>0:!a=="")},isValidBoolean:function(a){return !!a.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(a){return !!a.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,5})$)/i)},isValidInteger:function(a){return !!a.toString().match(/(^-?\d+$)/)},isValidNumeric:function(a){return !!a.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(a){return !!a.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(b){var a=b.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return a&&!!(a[1]<=9999&&a[2]<=12&&a[3]<=31&&a[4]<=59&&a[5]<=59&&a[6]<=59)||false},isValidDate:function(a){var b=a.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return b&&!!(b[1]<=9999&&b[2]<=12&&b[3]<=31)||false},isValidTime:function(b){var a=b.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return a&&!!(a[1]<=24&&a[2]<=59&&a[3]<=59)||false},isValidIPv4:function(a){var b=a.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return b&&!!(b[1]<=255&&b[2]<=255&&b[3]<=255&&b[4]<=255)||false},isValidCurrency:function(a){return a.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&true||false},isValidSSN:function(a){return a.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&true||false},isValidSIN:function(a){return a.toString().match(/^\d{9}$/)&&true||false}};dhtmlxValidation=new dhtmlxValidation()}if(typeof(window.dhtmlx)=="undefined"){window.dhtmlx={extend:function(d,c){for(var e in c){if(!d[e]){d[e]=c[e]}}return d},extend_api:function(a,d,c){var b=window[a];if(!b){return}window[a]=function(g){if(g&&typeof g=="object"&&!g.tagName){var f=b.apply(this,(d._init?d._init(g):arguments));for(var e in dhtmlx){if(d[e]){this[d[e]](dhtmlx[e])}}for(var e in g){if(d[e]){this[d[e]](g[e])}else{if(e.indexOf("on")===0){this.attachEvent(e,g[e])}}}}else{var f=b.apply(this,arguments)}if(d._patch){d._patch(this)}return f||this};window[a].prototype=b.prototype;if(c){dhtmlx.extend(window[a].prototype,c)}},url:function(a){if(a.indexOf("?")!=-1){return"&"}else{return"?"}}}}function dhtmlDragAndDropObject(){if(window.dhtmlDragAndDrop){return window.dhtmlDragAndDrop}this.lastLanding=0;this.dragNode=0;this.dragStartNode=0;this.dragStartObject=0;this.tempDOMU=null;this.tempDOMM=null;this.waitDrag=0;window.dhtmlDragAndDrop=this;return this}dhtmlDragAndDropObject.prototype.removeDraggableItem=function(a){a.onmousedown=null;a.dragStarter=null;a.dragLanding=null};dhtmlDragAndDropObject.prototype.addDraggableItem=function(a,b){a.onmousedown=this.preCreateDragCopy;a.dragStarter=b;this.addDragLanding(a,b)};dhtmlDragAndDropObject.prototype.addDragLanding=function(a,b){a.dragLanding=b};dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(a){if((a||window.event)&&(a||event).button==2){return}if(window.dhtmlDragAndDrop.waitDrag){window.dhtmlDragAndDrop.waitDrag=0;document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU;document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM;return false}if(window.dhtmlDragAndDrop.dragNode){window.dhtmlDragAndDrop.stopDrag(a)}window.dhtmlDragAndDrop.waitDrag=1;window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup;window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove;window.dhtmlDragAndDrop.dragStartNode=this;window.dhtmlDragAndDrop.dragStartObject=this.dragStarter;document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy;document.body.onmousemove=window.dhtmlDragAndDrop.callDrag;window.dhtmlDragAndDrop.downtime=new Date().valueOf();if((a)&&(a.preventDefault)){a.preventDefault();return false}return false};dhtmlDragAndDropObject.prototype.callDrag=function(c){if(!c){c=window.event}dragger=window.dhtmlDragAndDrop;if((new Date()).valueOf()-dragger.downtime<100){return}if(!dragger.dragNode){if(dragger.waitDrag){dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,c);if(!dragger.dragNode){return dragger.stopDrag()}dragger.dragNode.onselectstart=function(){return false};dragger.gldragNode=dragger.dragNode;document.body.appendChild(dragger.dragNode);document.body.onmouseup=dragger.stopDrag;dragger.waitDrag=0;dragger.dragNode.pWindow=window;dragger.initFrameRoute()}else{return dragger.stopDrag(c,true)}}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var a=dragger.gldragNode;if(dragger.gldragNode.old){a=dragger.gldragNode.old}a.parentNode.removeChild(a);var b=dragger.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding){a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding)}if(_isIE){var f=document.createElement("Div");f.innerHTML=dragger.dragNode.outerHTML;dragger.dragNode=f.childNodes[0]}else{dragger.dragNode=dragger.dragNode.cloneNode(true)}dragger.dragNode.pWindow=window;dragger.gldragNode.old=dragger.dragNode;document.body.appendChild(dragger.dragNode);b.dhtmlDragAndDrop.dragNode=dragger.dragNode}dragger.dragNode.style.left=c.clientX+15+(dragger.fx?dragger.fx*(-1):0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px";dragger.dragNode.style.top=c.clientY+3+(dragger.fy?dragger.fy*(-1):0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px";if(!c.srcElement){var d=c.target}else{d=c.srcElement}dragger.checkLanding(d,c)};dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){var c=parent.frames[window.name].frameElement.offsetParent;var d=0;var b=0;while(c){d+=c.offsetLeft;b+=c.offsetTop;c=c.offsetParent}if((parent.dhtmlDragAndDrop)){var a=parent.dhtmlDragAndDrop.calculateFramePosition(1);d+=a.split("_")[0]*1;b+=a.split("_")[1]*1}if(e){return d+"_"+b}else{this.fx=d}this.fy=b}return"0_0"};dhtmlDragAndDropObject.prototype.checkLanding=function(b,a){if((b)&&(b.dragLanding)){if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding)}this.lastLanding=b;this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,a.clientX,a.clientY,a);this.lastLanding_scr=(_isIE?a.srcElement:a.target)}else{if((b)&&(b.tagName!="BODY")){this.checkLanding(b.parentNode,a)}else{if(this.lastLanding){this.lastLanding.dragLanding._dragOut(this.lastLanding,a.clientX,a.clientY,a)}this.lastLanding=0;if(this._onNotFound){this._onNotFound()}}}};dhtmlDragAndDropObject.prototype.stopDrag=function(b,c){dragger=window.dhtmlDragAndDrop;if(!c){dragger.stopFrameRoute();var a=dragger.lastLanding;dragger.lastLanding=null;if(a){a.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,a,(_isIE?event.srcElement:b.target))}}dragger.lastLanding=null;if((dragger.dragNode)&&(dragger.dragNode.parentNode==document.body)){dragger.dragNode.parentNode.removeChild(dragger.dragNode)}dragger.dragNode=0;dragger.gldragNode=0;dragger.fx=0;dragger.fy=0;dragger.dragStartNode=0;dragger.dragStartObject=0;document.body.onmouseup=dragger.tempDOMU;document.body.onmousemove=dragger.tempDOMM;dragger.tempDOMU=null;dragger.tempDOMM=null;dragger.waitDrag=0};dhtmlDragAndDropObject.prototype.stopFrameRoute=function(c){if(c){window.dhtmlDragAndDrop.stopDrag(1,1)}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.stopFrameRoute(window)}}catch(b){}};dhtmlDragAndDropObject.prototype.initFrameRoute=function(c,d){if(c){window.dhtmlDragAndDrop.preCreateDragCopy();window.dhtmlDragAndDrop.dragStartNode=c.dhtmlDragAndDrop.dragStartNode;window.dhtmlDragAndDrop.dragStartObject=c.dhtmlDragAndDrop.dragStartObject;window.dhtmlDragAndDrop.dragNode=c.dhtmlDragAndDrop.dragNode;window.dhtmlDragAndDrop.gldragNode=c.dhtmlDragAndDrop.dragNode;window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag;window.waitDrag=0;if(((!_isIE)&&(d))&&((!_isFF)||(_FFrv<1.8))){window.dhtmlDragAndDrop.calculateFramePosition()}}try{if((parent.dhtmlDragAndDrop)&&(parent!=window)&&(parent!=c)){parent.dhtmlDragAndDrop.initFrameRoute(window)}}catch(b){}for(var a=0;a<window.frames.length;a++){try{if((window.frames[a]!=c)&&(window.frames[a].dhtmlDragAndDrop)){window.frames[a].dhtmlDragAndDrop.initFrameRoute(window,((!c||d)?1:0))}}catch(b){}}};_isFF=false;_isIE=false;_isOpera=false;_isKHTML=false;_isMacOS=false;_isChrome=false;_FFrv=false;_KHTMLrv=false;_OperaRv=false;if(navigator.userAgent.indexOf("Macintosh")!=-1){_isMacOS=true}if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){_isChrome=true}if((navigator.userAgent.indexOf("Safari")!=-1)||(navigator.userAgent.indexOf("Konqueror")!=-1)){_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5));if(_KHTMLrv>525){_isFF=true;_FFrv=1.9}else{_isKHTML=true}}else{if(navigator.userAgent.indexOf("Opera")!=-1){_isOpera=true;_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))}else{if(navigator.appName.indexOf("Microsoft")!=-1){_isIE=true;if((navigator.appVersion.indexOf("MSIE 8.0")!=-1||navigator.appVersion.indexOf("MSIE 9.0")!=-1||navigator.appVersion.indexOf("MSIE 10.0")!=-1||document.documentMode>7)&&document.compatMode!="BackCompat"){_isIE=8}}else{if(navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1){_isIE=8}else{_isFF=true;_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])}}}}if(typeof(window.dhtmlxEvent)=="undefined"){function dhtmlxEvent(b,c,a){if(b.addEventListener){b.addEventListener(c,a,false)}else{if(b.attachEvent){b.attachEvent("on"+c,a)}}}}if(dhtmlxEvent.touchDelay==null){dhtmlxEvent.touchDelay=2000}if(typeof(dhtmlxEvent.initTouch)=="undefined"){dhtmlxEvent.initTouch=function(){var d;var e;var b,a;dhtmlxEvent(document.body,"touchstart",function(f){e=f.touches[0].target;b=f.touches[0].clientX;a=f.touches[0].clientY;d=window.setTimeout(c,dhtmlxEvent.touchDelay)});function c(){if(e){var f=document.createEvent("HTMLEvents");f.initEvent("dblclick",true,true);e.dispatchEvent(f);d=e=null}}dhtmlxEvent(document.body,"touchmove",function(f){if(d){if(Math.abs(f.touches[0].clientX-b)>50||Math.abs(f.touches[0].clientY-a)>50){window.clearTimeout(d);d=e=false}}});dhtmlxEvent(document.body,"touchend",function(f){if(d){window.clearTimeout(d);d=e=false}});dhtmlxEvent.initTouch=function(){}}}if(!window.dhtmlx){dhtmlx={}}dhtmlx.assert=function(b,a){if(!b){dhtmlx.error(a)}};dhtmlx.assert_enabled=function(){return false};dhtmlx.assert_event=function(f,c){if(!f._event_check){f._event_check={};f._event_check_size={}}for(var b in c){f._event_check[b.toLowerCase()]=c[b];var e=-1;for(var d in c[b]){e++}f._event_check_size[b.toLowerCase()]=e}};dhtmlx.assert_method_info=function(e,b,d,f){var a=[];for(var c=0;c<f.length;c++){a.push(f[c][0]+" : "+f[c][1]+"\n   "+f[c][2].describe()+(f[c][3]?"; optional":""))}return e.name+"."+b+"\n"+d+"\n Arguments:\n - "+a.join("\n - ")};dhtmlx.assert_method=function(c,a){for(var b in a){dhtmlx.assert_method_process(c,b,a[b].descr,a[b].args,(a[b].min||99),a[b].skip)}};dhtmlx.assert_method_process=function(f,b,e,g,c,d){var a=f[b];if(!d){f[b]=function(){if(arguments.length!=g.length&&arguments.length<c){dhtmlx.log("warn","Incorrect count of parameters\n"+f[b].describe()+"\n\nExpecting "+g.length+" but have only "+arguments.length)}else{for(var h=0;h<g.length;h++){if(!g[h][3]&&!g[h][2](arguments[h])){dhtmlx.log("warn","Incorrect method call\n"+f[b].describe()+"\n\nActual value of "+(h+1)+" parameter: {"+(typeof arguments[h])+"} "+arguments[h])}}}return a.apply(this,arguments)}}f[b].describe=function(){return dhtmlx.assert_method_info(f,b,e,g)}};dhtmlx.assert_event_call=function(c,b,a){if(c._event_check){if(!c._event_check[b]){dhtmlx.log("warn","Not expected event call :"+b)}else{if(dhtmlx.isNotDefined(a)){dhtmlx.log("warn","Event without parameters :"+b)}else{if(c._event_check_size[b]!=a.length){dhtmlx.log("warn","Incorrect event call, expected "+c._event_check_size[b]+" parameter(s), but have "+a.length+" parameter(s), for "+b+" event")}}}}};dhtmlx.assert_event_attach=function(b,a){if(b._event_check&&!b._event_check[a]){dhtmlx.log("warn","Unknown event name: "+a)}};dhtmlx.assert_property=function(b,a){if(!b._settings_check){b._settings_check={}}dhtmlx.extend(b._settings_check,a)};dhtmlx.assert_check=function(c,b){if(typeof c=="object"){for(var a in c){dhtmlx.assert_settings(a,c[a],b)}}};dhtmlx.assert_settings=function(h,e,d){d=d||this._settings_check;if(d){if(!d[h]){return dhtmlx.log("warn","Unknown propery: "+h)}var g="";var b="";var a=false;for(var c=0;c<d[h].length;c++){var f=d[h][c];if(typeof f=="string"){continue}if(typeof f=="function"){a=a||f(e)}else{if(typeof f=="object"&&typeof f[1]=="function"){a=a||f[1](e);if(a&&f[2]){dhtmlx.assert_check(e,f[2])}}}if(a){break}}if(!a){dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(h,d)+"\nActual value: {"+(typeof e)+"} "+e)}}};dhtmlx.assert_info=function(b,f){var a=f[b];var e="";var d=[];for(var c=0;c<a.length;c++){if(typeof rule=="string"){e=a[c]}else{if(a[c].describe){d.push(a[c].describe())}else{if(a[c][1]&&a[c][1].describe){d.push(a[c][1].describe())}}}}return"Property: "+b+", "+e+" \nExpected value: \n - "+d.join("\n - ")};if(dhtmlx.assert_enabled()){dhtmlx.assert_rule_color=function(a){if(typeof a!="string"){return false}if(a.indexOf("#")!==0){return false}if(a.substr(1).replace(/[0-9A-F]/gi,"")!==""){return false}return true};dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"};dhtmlx.assert_rule_template=function(a){if(typeof a=="function"){return true}if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"};dhtmlx.assert_rule_boolean=function(a){if(typeof a=="boolean"){return true}return false};dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"};dhtmlx.assert_rule_object=function(a,b){if(typeof a=="object"){return true}return false};dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"};dhtmlx.assert_rule_string=function(a){if(typeof a=="string"){return true}return false};dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"};dhtmlx.assert_rule_htmlpt=function(a){return !!dhtmlx.toNode(a)};dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"};dhtmlx.assert_rule_notdocumented=function(a){return false};dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"};dhtmlx.assert_rule_key=function(b){var a=function(c){return b[c]};a.describe=function(){var d=[];for(var c in b){d.push(c)}return"{String} can take one of next values: "+d.join(", ")};return a};dhtmlx.assert_rule_dimension=function(a){if(a*1==a&&!isNaN(a)&&a>=0){return true}return false};dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"};dhtmlx.assert_rule_number=function(a){if(typeof a=="number"){return true}return false};dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"};dhtmlx.assert_rule_function=function(a){if(typeof a=="function"){return true}return false};dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"};dhtmlx.assert_rule_any=function(a){return true};dhtmlx.assert_rule_any.describe=function(){return"Any value"};dhtmlx.assert_rule_mix=function(d,c){var e=function(a){if(d(a)||c(a)){return true}return false};e.describe=function(){return d.describe()};return e}}dhtmlx.codebase="./";dhtmlx.copy=function(b){var a=dhtmlx.copy._function;a.prototype=b;return new a()};dhtmlx.copy._function=function(){};dhtmlx.extend=function(b,a){for(var c in a){b[c]=a[c]}if(dhtmlx.assert_enabled()&&a._assert){b._assert();b._assert=null}dhtmlx.assert(b,"Invalid nesting target");dhtmlx.assert(a,"Invalid nesting source");if(a._init){b._init()}return b};dhtmlx.proto_extend=function(){var f=arguments;var c=f[0];var b=[];for(var e=f.length-1;e>0;e--){if(typeof f[e]=="function"){f[e]=f[e].prototype}for(var d in f[e]){if(d=="_init"){b.push(f[e][d])}else{if(!c[d]){c[d]=f[e][d]}}}}if(f[0]._init){b.push(f[0]._init)}c._init=function(){for(var g=0;g<b.length;g++){b[g].apply(this,arguments)}};c.base=f[1];var a=function(g){this._init(g);if(this._parseSettings){this._parseSettings(g,this.defaults)}};a.prototype=c;c=f=null;return a};dhtmlx.bind=function(b,a){return function(){return b.apply(a,arguments)}};dhtmlx.require=function(a){if(!dhtmlx._modules[a]){dhtmlx.assert(dhtmlx.ajax,"load module is required");dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+a).responseText);dhtmlx._modules[a]=true}};dhtmlx._modules={};dhtmlx.exec=function(code){if(window.execScript){window.execScript(code)}else{window.eval(code)}};dhtmlx.methodPush=function(a,c,b){return function(){var d=false;d=a[c].apply(a,arguments);return d}};dhtmlx.isNotDefined=function(b){return typeof b=="undefined"};dhtmlx.delay=function(d,b,c,a){setTimeout(function(){var e=d.apply(b,c);d=b=c=null;return e},a||1)};dhtmlx.uid=function(){if(!this._seed){this._seed=(new Date).valueOf()}this._seed++;return this._seed};dhtmlx.toNode=function(a){if(typeof a=="string"){return document.getElementById(a)}return a};dhtmlx.toArray=function(a){return dhtmlx.extend((a||[]),dhtmlx.PowerArray)};dhtmlx.toFunctor=function(str){return(typeof(str)=="string")?eval(str):str};dhtmlx._events={};dhtmlx.event=function(d,c,a,b){d=dhtmlx.toNode(d);var e=dhtmlx.uid();dhtmlx._events[e]=[d,c,a];if(b){a=dhtmlx.bind(a,b)}if(d.addEventListener){d.addEventListener(c,a,false)}else{if(d.attachEvent){d.attachEvent("on"+c,a)}}return e};dhtmlx.eventRemove=function(b){if(!b){return}dhtmlx.assert(this._events[b],"Removing non-existing event");var a=dhtmlx._events[b];if(a[0].removeEventListener){a[0].removeEventListener(a[1],a[2],false)}else{if(a[0].detachEvent){a[0].detachEvent("on"+a[1],a[2])}}delete this._events[b]};dhtmlx.log=function(b,c,a){if(window.console&&console.log){b=b.toLowerCase();if(window.console[b]){window.console[b](c||"unknown error")}else{window.console.log(b+": "+c)}if(a){window.console.log(a)}}};dhtmlx.log_full_time=function(a){dhtmlx._start_time_log=new Date();dhtmlx.log("Info","Timing start ["+a+"]");window.setTimeout(function(){var b=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx._start_time_log.valueOf())/1000+"s")},1)};dhtmlx.log_time=function(a){var c="_start_time_log"+a;if(!dhtmlx[c]){dhtmlx[c]=new Date();dhtmlx.log("Info","Timing start ["+a+"]")}else{var b=new Date();dhtmlx.log("Info","Timing end ["+a+"]:"+(b.valueOf()-dhtmlx[c].valueOf())/1000+"s");dhtmlx[c]=null}};dhtmlx.error=function(b,a){dhtmlx.log("error",b,a)};dhtmlx.EventSystem={_init:function(){this._events={};this._handlers={};this._map={}},block:function(){this._events._block=true},unblock:function(){this._events._block=false},mapEvent:function(a){dhtmlx.extend(this._map,a)},callEvent:function(c,e){if(this._events._block){return true}c=c.toLowerCase();dhtmlx.assert_event_call(this,c,e);var d=this._events[c.toLowerCase()];var a=true;if(dhtmlx.debug){dhtmlx.log("info","["+this.name+"] event:"+c,e)}if(d){for(var b=0;b<d.length;b++){if(d[b].apply(this,(e||[]))===false){a=false}}}if(this._map[c]&&!this._map[c].callEvent(c,e)){a=false}return a},attachEvent:function(b,a,d){b=b.toLowerCase();dhtmlx.assert_event_attach(this,b);d=d||dhtmlx.uid();a=dhtmlx.toFunctor(a);var c=this._events[b]||dhtmlx.toArray();c.push(a);this._events[b]=c;this._handlers[d]={f:a,t:b};return d},detachEvent:function(d){if(this._handlers[d]){var b=this._handlers[d].t;var a=this._handlers[d].f;var c=this._events[b];c.remove(a);delete this._handlers[d]}}};dhtmlx.PowerArray={removeAt:function(b,a){if(b>=0){this.splice(b,(a||1))}},remove:function(a){this.removeAt(this.find(a))},insertAt:function(c,d){if(!d&&d!==0){this.push(c)}else{var a=this.splice(d,(this.length-d));this[d]=c;this.push.apply(this,a)}},find:function(a){for(i=0;i<this.length;i++){if(a==this[i]){return i}}return -1},each:function(a,c){for(var b=0;b<this.length;b++){a.call((c||this),this[b])}},map:function(a,c){for(var b=0;b<this.length;b++){this[b]=a.call((c||this),this[b])}return this}};dhtmlx.env={};if(navigator.userAgent.indexOf("Opera")!=-1){dhtmlx._isOpera=true}else{dhtmlx._isIE=!!document.all;dhtmlx._isFF=!document.all;dhtmlx._isWebKit=(navigator.userAgent.indexOf("KHTML")!=-1);if(navigator.appVersion.indexOf("MSIE 8.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=8}if(navigator.appVersion.indexOf("MSIE 9.0")!=-1&&document.compatMode!="BackCompat"){dhtmlx._isIE=9}}dhtmlx.env={};(function(){dhtmlx.env.transform=false;dhtmlx.env.transition=false;var a={};a.names=["transform","transition"];a.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"];a.transition=["transition","WebkitTransition","MozTransition","oTransition"];var e=document.createElement("DIV");var c;for(var b=0;b<a.names.length;b++){while(p=a[a.names[b]].pop()){if(typeof e.style[p]!="undefined"){dhtmlx.env[a.names[b]]=true}}}})();dhtmlx.env.transform_prefix=(function(){var a;if(dhtmlx._isOpera){a="-o-"}else{a="";if(dhtmlx._isFF){a="-moz-"}if(dhtmlx._isWebKit){a="-webkit-"}}return a})();dhtmlx.env.svg=(function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")})();dhtmlx.zIndex={drag:10000};dhtmlx.html={create:function(b,a,c){a=a||{};var d=document.createElement(b);for(var e in a){d.setAttribute(e,a[e])}if(a.style){d.style.cssText=a.style}if(a["class"]){d.className=a["class"]}if(c){d.innerHTML=c}return d},getValue:function(a){a=dhtmlx.toNode(a);if(!a){return""}return dhtmlx.isNotDefined(a.value)?a.innerHTML:a.value},remove:function(b){if(b instanceof Array){for(var a=0;a<b.length;a++){this.remove(b[a])}}else{if(b&&b.parentNode){b.parentNode.removeChild(b)}}},insertBefore:function(b,c,a){if(!b){return}if(c){c.parentNode.insertBefore(b,c)}else{a.appendChild(b)}},locate:function(b,d){b=b||event;var a=b.target||b.srcElement;while(a){if(a.getAttribute){var c=a.getAttribute(d);if(c){return c}}a=a.parentNode}return null},offset:function(d){if(d.getBoundingClientRect){var g=d.getBoundingClientRect();var h=document.body;var b=document.documentElement;var a=window.pageYOffset||b.scrollTop||h.scrollTop;var e=window.pageXOffset||b.scrollLeft||h.scrollLeft;var f=b.clientTop||h.clientTop||0;var j=b.clientLeft||h.clientLeft||0;var l=g.top+a-f;var c=g.left+e-j;return{y:Math.round(l),x:Math.round(c)}}else{var l=0,c=0;while(d){l=l+parseInt(d.offsetTop,10);c=c+parseInt(d.offsetLeft,10);d=d.offsetParent}return{y:l,x:c}}},pos:function(a){a=a||event;if(a.pageX||a.pageY){return{x:a.pageX,y:a.pageY}}var b=((dhtmlx._isIE)&&(document.compatMode!="BackCompat"))?document.documentElement:document.body;return{x:a.clientX+b.scrollLeft-b.clientLeft,y:a.clientY+b.scrollTop-b.clientTop}},preventEvent:function(a){if(a&&a.preventDefault){a.preventDefault()}dhtmlx.html.stopEvent(a)},stopEvent:function(a){(a||event).cancelBubble=true;return false},addCss:function(b,a){b.className+=" "+a},removeCss:function(b,a){b.className=b.className.replace(RegExp(a,"g"),"")}};(function(){var a=document.getElementsByTagName("SCRIPT");dhtmlx.assert(a.length,"Can't locate codebase");if(a.length){a=(a[a.length-1].getAttribute("src")||"").split("/");a.splice(a.length-1,1);dhtmlx.codebase=a.slice(0,a.length).join("/")+"/"}})();if(!dhtmlx.ui){dhtmlx.ui={}}dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){};this._htmlmap=null;this._htmlrows=null;if(this._html){document.body.appendChild(this._html)}this._html=null;if(this._obj){this._obj.innerHTML="";this._obj._htmlmap=null}this._obj=this._dataobj=null;this.data=null;this._events=this._handlers={};if(this.render){this.render=function(){}}}};dhtmlx.destructors=[];dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var c=0;c<dhtmlx.destructors.length;c++){dhtmlx.destructors[c].destructor()}dhtmlx.destructors=[]}for(var b in dhtmlx._events){var d=dhtmlx._events[b];if(d[0].removeEventListener){d[0].removeEventListener(d[1],d[2],false)}else{if(d[0].detachEvent){d[0].detachEvent("on"+d[1],d[2])}}delete dhtmlx._events[b]}});dhtmlx.ajax=function(a,b,c){if(arguments.length!==0){var d=new dhtmlx.ajax();if(c){d.master=c}d.get(a,null,b)}if(!this.getXHR){return new dhtmlx.ajax()}return this};dhtmlx.ajax.prototype={getXHR:function(){if(dhtmlx._isIE){return new ActiveXObject("Microsoft.xmlHTTP")}else{return new XMLHttpRequest()}},send:function(e,j,g){var b=this.getXHR();if(typeof g=="function"){g=[g]}if(typeof j=="object"){var f=[];for(var c in j){var h=j[c];if(h===null||h===dhtmlx.undefined){h=""}f.push(c+"="+encodeURIComponent(h))}j=f.join("&")}if(j&&!this.post){e=e+(e.indexOf("?")!=-1?"&":"?")+j;j=null}b.open(this.post?"POST":"GET",e,!this._sync);if(this.post){b.setRequestHeader("Content-type","application/x-www-form-urlencoded")}var d=this;b.onreadystatechange=function(){if(!b.readyState||b.readyState==4){if(g&&d){for(var a=0;a<g.length;a++){if(g[a]){g[a].call((d.master||d),b.responseText,b.responseXML,b)}}}d.master=null;g=d=null}};b.send(j||null);return b},get:function(a,c,b){this.post=false;return this.send(a,c,b)},post:function(a,c,b){this.post=true;return this.send(a,c,b)},sync:function(){this._sync=true;return this}};dhtmlx.AtomDataLoader={_init:function(a){this.data={};if(a){this._settings.datatype=a.datatype||"json";this._after_init.push(this._load_when_ready)}},_load_when_ready:function(){this._ready_for_data=true;if(this._settings.url){this.url_setter(this._settings.url)}if(this._settings.data){this.data_setter(this._settings.data)}},url_setter:function(a){if(!this._ready_for_data){return a}this.load(a,this._settings.datatype);return a},data_setter:function(a){if(!this._ready_for_data){return a}this.parse(a,this._settings.datatype);return true},load:function(a,b){this.callEvent("onXLS",[]);if(typeof b=="string"){this.data.driver=dhtmlx.DataDriver[b];b=arguments[2]}else{this.data.driver=dhtmlx.DataDriver[this._settings.datatype||"xml"]}if(window.dhx4){dhx4.ajax.get(a,dhtmlx.bind(function(d){var c=d.xmlDoc;var f=c.responseText;var e=c.responseXML;if(this._onLoad){this._onLoad.call(this,f,e,c)}if(b){b.call(this,f,e,c)}},this))}else{dhtmlx.ajax(a,[this._onLoad,b],this)}},parse:function(b,a){this.callEvent("onXLS",[]);this.data.driver=dhtmlx.DataDriver[a||"xml"];this._onLoad(b,null)},_onLoad:function(e,b,a){var c=this.data.driver;var d=c.getRecords(c.toObject(e,b))[0];this.data=(c?c.getDetails(d):e);this.callEvent("onXLE",[])},_check_data_feed:function(b){if(!this._settings.dataFeed||this._ignore_feed||!b){return true}var a=this._settings.dataFeed;if(typeof a=="function"){return a.call(this,(b.id||b),b)}a=a+(a.indexOf("?")==-1?"?":"&")+"action=get&id="+encodeURIComponent(b.id||b);this.callEvent("onXLS",[]);dhtmlx.ajax(a,function(d,c){this._ignore_feed=true;this.setValues(dhtmlx.DataDriver.json.toObject(d)[0]);this._ignore_feed=false;this.callEvent("onXLE",[])},this);return false}};dhtmlx.DataDriver={};dhtmlx.DataDriver.json={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){if(a&&a.data){a=a.data}if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0),_key:(a.dhx_security)}}};dhtmlx.DataDriver.json_ext={toObject:function(data){if(!data){data="[]"}if(typeof data=="string"){var temp;eval("temp="+data);dhtmlx.temp=[];var header=temp.header;for(var i=0;i<temp.data.length;i++){var item={};for(var j=0;j<header.length;j++){if(typeof(temp.data[i][j])!="undefined"){item[header[j]]=temp.data[i][j]}}dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(a){if(a&&!(a instanceof Array)){return[a]}return a},getDetails:function(a){return a},getInfo:function(a){return{_size:(a.total_count||0),_from:(a.pos||0)}}};dhtmlx.DataDriver.html={toObject:function(b){if(typeof b=="string"){var a=null;if(b.indexOf("<")==-1){a=dhtmlx.toNode(b)}if(!a){a=document.createElement("DIV");a.innerHTML=b}return a.getElementsByTagName(this.tag)}return b},getRecords:function(a){if(a.tagName){return a.childNodes}return a},getDetails:function(a){return dhtmlx.DataDriver.xml.tagToObject(a)},getInfo:function(a){return{_size:0,_from:0}},tag:"LI"};dhtmlx.DataDriver.jsarray={toObject:function(data){if(typeof data=="string"){eval("dhtmlx.temp="+data);return dhtmlx.temp}return data},getRecords:function(a){return a},getDetails:function(c){var a={};for(var b=0;b<c.length;b++){a["data"+b]=c[b]}return a},getInfo:function(a){return{_size:0,_from:0}}};dhtmlx.DataDriver.csv={toObject:function(a){return a},getRecords:function(a){return a.split(this.row)},getDetails:function(c){c=this.stringToArray(c);var a={};for(var b=0;b<c.length;b++){a["data"+b]=c[b]}return a},getInfo:function(a){return{_size:0,_from:0}},stringToArray:function(b){b=b.split(this.cell);for(var a=0;a<b.length;a++){b[a]=b[a].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"")}return b},row:"\n",cell:","};dhtmlx.DataDriver.xml={toObject:function(b,a){if(a&&(a=this.checkResponse(b,a))){return a}if(typeof b=="string"){return this.fromString(b)}return b},getRecords:function(a){return this.xpath(a,this.records)},records:"/*/item",getDetails:function(a){return this.tagToObject(a,{})},getInfo:function(a){return{_size:(a.documentElement.getAttribute("total_count")||0),_from:(a.documentElement.getAttribute("pos")||0),_key:(a.documentElement.getAttribute("dhx_security"))}},xpath:function(d,l){if(window.XPathResult){var c=d;if(d.nodeName.indexOf("document")==-1){d=d.ownerDocument}var h=[];var b=d.evaluate(l,c,null,XPathResult.ANY_TYPE,null);var j=b.iterateNext();while(j){h.push(j);j=b.iterateNext()}return h}else{var g=true;try{if(typeof(d.selectNodes)=="undefined"){g=false}}catch(f){}if(g){return d.selectNodes(l)}else{var a=l.split("/").pop();return d.getElementsByTagName(a)}}},tagToObject:function(d,l){l=l||{};var f=false;var c=d.childNodes;var j={};for(var h=0;h<c.length;h++){if(c[h].nodeType==1){var g=c[h].tagName;if(typeof l[g]!="undefined"){if(!(l[g] instanceof Array)){l[g]=[l[g]]}l[g].push(this.tagToObject(c[h],{}))}else{l[c[h].tagName]=this.tagToObject(c[h],{})}f=true}}var e=d.attributes;if(e&&e.length){for(var h=0;h<e.length;h++){l[e[h].name]=e[h].value}f=true}if(!f){return this.nodeValue(d)}l.value=this.nodeValue(d);return l},nodeValue:function(a){if(a.firstChild){return a.firstChild.wholeText||a.firstChild.data}return""},fromString:function(b){if(window.DOMParser&&!dhtmlx._isIE){return(new DOMParser()).parseFromString(b,"text/xml")}if(window.ActiveXObject){var a=new ActiveXObject("Microsoft.xmlDOM");a.loadXML(b);return a}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(d,c){if(c&&(c.firstChild&&c.firstChild.tagName!="parsererror")){return c}var b=this.fromString(d.replace(/^[\s]+/,""));if(b){return b}dhtmlx.error("xml can't be parsed",d)}};dhtmlx.DataLoader={_init:function(a){a=a||"";this.name="DataStore";this.data=(a.datastore)||(new dhtmlx.DataStore());this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(a,b){dhtmlx.AtomDataLoader.load.apply(this,arguments);if(!this.data.feed){this.data.feed=function(d,c){if(this._load_count){return this._load_count=[d,c]}else{this._load_count=true}this.load(a+((a.indexOf("?")==-1)?"?":"&")+"posStart="+d+"&count="+c,function(){var e=this._load_count;this._load_count=false;if(typeof e=="object"){this.data.feed.apply(this,e)}})}}},_onLoad:function(c,b,a){this.data._parse(this.data.driver.toObject(c,b));this.callEvent("onXLE",[]);if(this._readyHandler){this.data.detachEvent(this._readyHandler);this._readyHandler=null}},dataFeed_setter:function(a){this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(g,f){if(this._settings.dataFeed){var e={};if(!g&&!e){return}if(typeof g=="function"){if(!f){return}g(f,e)}else{e={text:f}}this.clearAll();var b=this._settings.dataFeed;if(typeof b=="function"){return b.call(this,f,e)}var d=[];for(var c in e){d.push("dhx_filter["+c+"]="+encodeURIComponent(e[c]))}this.load(b+(b.indexOf("?")<0?"?":"&")+d.join("&"),this._settings.datatype);return false}},this));return a},_call_onready:function(){if(this._settings.ready){var a=dhtmlx.toFunctor(this._settings.ready);if(a&&a.call){a.apply(this,arguments)}}}};dhtmlx.DataStore=function(){this.name="DataStore";dhtmlx.extend(this,dhtmlx.EventSystem);this.setDriver("xml");this.pull={};this.order=dhtmlx.toArray()};dhtmlx.DataStore.prototype={setDriver:function(a){dhtmlx.assert(dhtmlx.DataDriver[a],"incorrect DataDriver");this.driver=dhtmlx.DataDriver[a]},_parse:function(e){this.callEvent("onParse",[this.driver,e]);if(this._filter_order){this.filter()}var f=this.driver.getInfo(e);if(f._key){dhtmlx.security_key=f._key}var d=this.driver.getRecords(e);var h=(f._from||0)*1;if(h===0&&this.order[0]){h=this.order.length}var b=0;for(var c=0;c<d.length;c++){var a=this.driver.getDetails(d[c]);var g=this.id(a);if(!this.pull[g]){this.order[b+h]=g;b++}this.pull[g]=a;if(this.extraParser){this.extraParser(a)}if(this._scheme){if(this._scheme.$init){this._scheme.$update(a)}else{if(this._scheme.$update){this._scheme.$update(a)}}}}for(var c=0;c<f._size;c++){if(!this.order[c]){var g=dhtmlx.uid();var a={id:g,$template:"loading"};this.pull[g]=a;this.order[c]=g}}this.callEvent("onStoreLoad",[this.driver,e]);this.refresh()},id:function(a){return a.id||(a.id=dhtmlx.uid())},changeId:function(b,a){dhtmlx.assert(this.pull[b],"Can't change id, for non existing item: "+b);this.pull[a]=this.pull[b];this.pull[a].id=a;this.order[this.order.find(b)]=a;if(this._filter_order){this._filter_order[this._filter_order.find(b)]=a}this.callEvent("onIdChange",[b,a]);if(this._render_change_id){this._render_change_id(b,a)}},get:function(a){return this.item(a)},set:function(b,a){return this.update(b,a)},item:function(a){return this.pull[a]},update:function(b,a){if(this._scheme&&this._scheme.$update){this._scheme.$update(a)}if(this.callEvent("onBeforeUpdate",[b,a])===false){return false}this.pull[b]=a;this.refresh(b)},refresh:function(a){if(this._skip_refresh){return}if(a){this.callEvent("onStoreUpdated",[a,this.pull[a],"update"])}else{this.callEvent("onStoreUpdated",[null,null,null])}},silent:function(a){this._skip_refresh=true;a.call(this);this._skip_refresh=false},getRange:function(d,c){if(d){d=this.indexById(d)}else{d=this.startOffset||0}if(c){c=this.indexById(c)}else{c=Math.min((this.endOffset||Infinity),(this.dataCount()-1));if(c<0){c=0}}if(this.min){d=this.min}if(this.max){c=this.max}if(d>c){var b=c;c=d;d=b}return this.getIndexRange(d,c)},getIndexRange:function(d,c){c=Math.min((c||Infinity),this.dataCount()-1);var a=dhtmlx.toArray();for(var b=(d||0);b<=c;b++){a.push(this.item(this.order[b]))}return a},dataCount:function(){return this.order.length},exists:function(a){return !!(this.pull[a])},move:function(a,d){if(a<0||d<0){dhtmlx.error("DataStore::move","Incorrect indexes");return}var c=this.idByIndex(a);var b=this.item(c);this.order.removeAt(a);this.order.insertAt(c,Math.min(this.order.length,d));this.callEvent("onStoreUpdated",[c,b,"move"])},scheme:function(a){this._scheme=a},sync:function(e,d,a){if(typeof d!="function"){a=d;d=null}if(dhtmlx.debug_bind){this.debug_sync_master=e;dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)}var c=e;if(e.name!="DataStore"){e=e.data}var b=dhtmlx.bind(function(h,f,g){if(g!="update"||d){h=null}if(!h){this.order=dhtmlx.toArray([].concat(e.order));this._filter_order=null;this.pull=e.pull;if(d){this.silent(d)}if(this._on_sync){this._on_sync()}}if(dhtmlx.debug_bind){dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id)}if(!a){this.refresh(h)}else{a=false}},this);e.attachEvent("onStoreUpdated",b);this.feed=function(g,f){c.loadNext(f,g)};b()},add:function(e,a){if(this._scheme){e=e||{};for(var b in this._scheme){e[b]=e[b]||this._scheme[b]}if(this._scheme){if(this._scheme.$init){this._scheme.$update(e)}else{if(this._scheme.$update){this._scheme.$update(e)}}}}var f=this.id(e);var d=this.dataCount();if(dhtmlx.isNotDefined(a)||a<0){a=d}if(a>d){dhtmlx.log("Warning","DataStore:add","Index of out of bounds");a=Math.min(this.order.length,a)}if(this.callEvent("onBeforeAdd",[f,e,a])===false){return false}if(this.exists(f)){return dhtmlx.error("Not unique ID")}this.pull[f]=e;this.order.insertAt(f,a);if(this._filter_order){var c=this._filter_order.length;if(!a&&this.order.length){c=0}this._filter_order.insertAt(f,c)}this.callEvent("onafterAdd",[f,a]);this.callEvent("onStoreUpdated",[f,e,"add"]);return f},remove:function(c){if(c instanceof Array){for(var a=0;a<c.length;a++){this.remove(c[a])}return}if(this.callEvent("onBeforeDelete",[c])===false){return false}if(!this.exists(c)){return dhtmlx.error("Not existing ID",c)}var b=this.item(c);this.order.remove(c);if(this._filter_order){this._filter_order.remove(c)}delete this.pull[c];this.callEvent("onafterdelete",[c]);this.callEvent("onStoreUpdated",[c,b,"delete"])},clearAll:function(){this.pull={};this.order=dhtmlx.toArray();this.feed=null;this._filter_order=null;this.callEvent("onClearAll",[]);this.refresh()},idByIndex:function(a){if(a>=this.order.length||a<0){dhtmlx.log("Warning","DataStore::idByIndex Incorrect index")}return this.order[a]},indexById:function(b){var a=this.order.find(b);return a},next:function(b,a){return this.order[this.indexById(b)+(a||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(b,a){return this.order[this.indexById(b)-(a||1)]},sort:function(f,b,a){var c=f;if(typeof f=="function"){c={as:f,dir:b}}else{if(typeof f=="string"){c={by:f,dir:b,as:a}}}var e=[c.by,c.dir,c.as];if(!this.callEvent("onbeforesort",e)){return}if(this.order.length){var g=dhtmlx.sort.create(c);var d=this.getRange(this.first(),this.last());d.sort(g);this.order=d.map(function(h){return this.id(h)},this)}this.refresh();this.callEvent("onaftersort",e)},filter:function(e,d){if(!this.callEvent("onBeforeFilter",[e,d])){return}if(this._filter_order){this.order=this._filter_order;delete this._filter_order}if(!this.order.length){return}if(e){var b=e;d=d||"";if(typeof e=="string"){e=dhtmlx.Template.fromHTML(e);d=d.toString().toLowerCase();b=function(h,g){return e(h).toLowerCase().indexOf(g)!=-1}}var c=dhtmlx.toArray();for(var a=0;a<this.order.length;a++){var f=this.order[a];if(b(this.item(f),d)){c.push(f)}}this._filter_order=this.order;this.order=c}this.refresh();this.callEvent("onAfterFilter",[])},each:function(c,b){for(var a=0;a<this.order.length;a++){c.call((b||this),this.item(this.order[a]))}},provideApi:function(d,b){this.debug_bind_master=d;if(b){this.mapEvent({onbeforesort:d,onaftersort:d,onbeforeadd:d,onafteradd:d,onbeforedelete:d,onafterdelete:d,onbeforeupdate:d})}var c=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"];for(var a=0;a<c.length;a++){d[c[a]]=dhtmlx.methodPush(this,c[a])}if(dhtmlx.assert_enabled()){this.assert_event(d)}},serialize:function(){var c=this.order;var a=[];for(var b=0;b<c.length;b++){a.push(this.pull[c[b]])}return a}};dhtmlx.sort={create:function(a){return dhtmlx.sort.dir(a.dir,dhtmlx.sort.by(a.by,a.as))},as:{"int":function(d,c){d=d*1;c=c*1;return d>c?1:(d<c?-1:0)},string_strict:function(d,c){d=d.toString();c=c.toString();return d>c?1:(d<c?-1:0)},string:function(d,c){d=d.toString().toLowerCase();c=c.toString().toLowerCase();return d>c?1:(d<c?-1:0)}},by:function(b,a){if(!b){return a}if(typeof a!="function"){a=dhtmlx.sort.as[a||"string"]}b=dhtmlx.Template.fromHTML(b);return function(d,c){return a(b(d),b(c))}},dir:function(b,a){if(b=="asc"){return a}return function(d,c){return a(d,c)*-1}}};dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(b){b=b||event;var a=b.which||b.keyCode;this.callEvent((this._edit_id?"onEditKeyPress":"onKeyPress"),[a,b.ctrlKey,b.shiftKey,b])}};dhtmlx.MouseEvents={_init:function(){if(this.on_click){dhtmlx.event(this._obj,"click",this._onClick,this);dhtmlx.event(this._obj,"contextmenu",this._onContext,this)}if(this.on_dblclick){dhtmlx.event(this._obj,"dblclick",this._onDblClick,this)}if(this.on_mouse_move){dhtmlx.event(this._obj,"mousemove",this._onMouse,this);dhtmlx.event(this._obj,(dhtmlx._isIE?"mouseleave":"mouseout"),this._onMouse,this)}},_onClick:function(a){return this._mouseEvent(a,this.on_click,"ItemClick")},_onDblClick:function(a){return this._mouseEvent(a,this.on_dblclick,"ItemDblClick")},_onContext:function(a){var b=dhtmlx.html.locate(a,this._id);if(b&&!this.callEvent("onBeforeContextMenu",[b,a])){return dhtmlx.html.preventEvent(a)}},_onMouse:function(a){if(dhtmlx._isIE){a=document.createEventObject(event)}if(this._mouse_move_timer){window.clearTimeout(this._mouse_move_timer)}this.callEvent("onMouseMoving",[a]);this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){if(a.type=="mousemove"){this._onMouseMove(a)}else{this._onMouseOut(a)}},this),500)},_onMouseMove:function(a){if(!this._mouseEvent(a,this.on_mouse_move,"MouseMove")){this.callEvent("onMouseOut",[a||event])}},_onMouseOut:function(a){this.callEvent("onMouseOut",[a||event])},_mouseEvent:function(g,f,b){g=g||event;var a=g.target||g.srcElement;var c="";var h=null;var d=false;while(a&&a.parentNode){if(!d&&a.getAttribute){h=a.getAttribute(this._id);if(h){if(a.getAttribute("userdata")){this.callEvent("onLocateData",[h,a,g])}if(!this.callEvent("on"+b,[h,g,a])){return}d=true}}c=a.className;if(c){c=c.split(" ");c=c[0]||c[1];if(f[c]){return f[c].call(this,g,h||dhtmlx.html.locate(g,this._id),a)}}a=a.parentNode}return d}};dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(b,a){if(typeof b=="object"){return this._parseSeetingColl(b)}return this._define(b,a)},_define:function(b,a){dhtmlx.assert_settings.call(this,b,a);var c=this[b+"_setter"];return this._settings[b]=c?c.call(this,a):a},_parseSeetingColl:function(c){if(c){for(var b in c){this._define(b,c[b])}}},_parseSettings:function(c,a){var b=dhtmlx.extend({},a);if(typeof c=="object"&&!c.tagName){dhtmlx.extend(b,c)}this._parseSeetingColl(b)},_mergeSettings:function(a,c){for(var b in c){switch(typeof a[b]){case"object":a[b]=this._mergeSettings((a[b]||{}),c[b]);break;case"undefined":a[b]=c[b];break;default:break}}return a},_parseContainer:function(b,a,c){if(typeof b=="object"&&!b.tagName){b=b.container}this._obj=this.$view=dhtmlx.toNode(b);if(!this._obj&&c){this._obj=c(b)}dhtmlx.assert(this._obj,"Incorrect html container");this._obj.className+=" "+a;this._obj.onselectstart=function(){return false};this._dataobj=this._obj},_set_type:function(a){if(typeof a=="object"){return this.type_setter(a)}dhtmlx.assert(this.types,"RenderStack :: Types are not defined");dhtmlx.assert(this.types[a],"RenderStack :: Inccorect type name",a);this.type=dhtmlx.extend({},this.types[a]);this.customize()},customize:function(a){if(a){dhtmlx.extend(this.type,a)}this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type);this.render()},type_setter:function(a){this._set_type(typeof a=="object"?dhtmlx.Type.add(this,a):a);return a},template_setter:function(a){return this.type_setter({template:a})},css_setter:function(a){this._obj.className+=" "+a;return a}};dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(a){return dhtmlx.Template.fromHTML(a)},obj_setter:function(b){var a=dhtmlx.Template.setter(b);var c=this;return function(){return a.apply(c,arguments)}},fromHTML:function(a){if(typeof a=="function"){return a}if(this._cache[a]){return this._cache[a]}a=(a||"").toString();a=a.replace(/[\r\n]+/g,"\\n");a=a.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"');a=a.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"');a=a.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"');a=a.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"');a=a.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"');a=a.replace(/\{obj\}/g,'"+obj+"');a=a.replace(/\{-obj/g,"{obj");a=a.replace(/\{-common/g,"{common");a='return "'+a+'";';return this._cache[a]=Function("obj","common",a)}};dhtmlx.Type={add:function(c,b){if(!c.types&&c.prototype.types){c=c.prototype}if(dhtmlx.assert_enabled()){this.assert_event(b)}var a=b.name||"default";this._template(b);this._template(b,"edit");this._template(b,"loading");c.types[a]=dhtmlx.extend(dhtmlx.extend({},(c.types[a]||this._default)),b);return a},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(c,a){a="template"+(a?("_"+a):"");var b=c[a];if(b&&(typeof b=="string")){if(b.indexOf("->")!=-1){b=b.split("->");switch(b[0]){case"html":b=dhtmlx.html.getValue(b[1]).replace(/\"/g,'\\"');break;case"http":b=new dhtmlx.ajax().sync().get(b[1],{uid:(new Date()).valueOf()}).responseText;break;default:break}}c[a]=dhtmlx.Template.fromHTML(b)}}};dhtmlx.SingleRender={_init:function(){},_toHTML:function(a){return this.type._item_start(a,this.type)+this.type.template(a,this.type)+this.type._item_end},render:function(){if(!this.callEvent||this.callEvent("onBeforeRender",[this.data])){if(this.data){this._dataobj.innerHTML=this._toHTML(this.data)}if(this.callEvent){this.callEvent("onAfterRender",[])}}}};dhtmlx.ui.Tooltip=function(a){this.name="Tooltip";if(dhtmlx.assert_enabled()){this._assert()}if(typeof a=="string"){a={template:a}}dhtmlx.extend(this,dhtmlx.Settings);dhtmlx.extend(this,dhtmlx.SingleRender);this._parseSettings(a,{type:"default",dy:0,dx:20});this._dataobj=this._obj=document.createElement("DIV");this._obj.className="dhx_tooltip";dhtmlx.html.insertBefore(this._obj,document.body.firstChild)};dhtmlx.ui.Tooltip.prototype={show:function(a,b){if(this._disabled){return}if(this.data!=a){this.data=a;this.render(a)}this._obj.style.top=b.y+this._settings.dy+"px";this._obj.style.left=b.x+this._settings.dx+"px";this._obj.style.display="block"},hide:function(){this.data=null;this._obj.style.display="none"},disable:function(){this._disabled=true},enable:function(){this._disabled=false},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty};dhtmlx.AutoTooltip={tooltip_setter:function(b){var a=new dhtmlx.ui.Tooltip(b);this.attachEvent("onMouseMove",function(d,c){a.show(this.get(d),dhtmlx.html.pos(c))});this.attachEvent("onMouseOut",function(d,c){a.hide()});this.attachEvent("onMouseMoving",function(d,c){a.hide()});return a}};dhtmlx.compat=function(a,b){if(dhtmlx.compat[a]){dhtmlx.compat[a](b)}};if(!dhtmlx.attaches){dhtmlx.attaches={}}dhtmlx.attaches.attachAbstract=function(b,a){var e=document.createElement("DIV");e.id="CustomObject_"+dhtmlx.uid();e.style.width="100%";e.style.height="100%";e.cmp="grid";document.body.appendChild(e);this.attachObject(e.id);a.container=e.id;var d=this.vs[this.av];d.grid=new window[b](a);d.gridId=e.id;d.gridObj=e;d.grid.setSizes=function(){if(this.resize){this.resize()}else{this.render()}};var c="_viewRestore";return this.vs[this[c]()].grid};dhtmlx.attaches.attachDataView=function(a){return this.attachAbstract("dhtmlXDataView",a)};dhtmlx.attaches.attachChart=function(a){return this.attachAbstract("dhtmlXChart",a)};dhtmlx.compat.layout=function(){};function dhtmlXCellObject(c,a){this.cell=document.createElement("DIV");this.cell.className="dhx_cell"+(a||"");this._idd=c;this._isCell=true;this.conf={borders:true,idx:{},css:a||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",pr3:"dhx_cell_progress_svg",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar",cover:"dhx_cell_cover"},ofs_nodes:{t:{},b:{}}};this.dataNodes={};this.views={};var b=document.createElement("DIV");b.className="dhx_cell_cont"+this.conf.css;this.cell.appendChild(b);b=null;this._updateIdx=function(){for(var d in this.conf.idx){this.conf.idx[d]=null;delete this.conf.idx[d]}for(var g=0;g<this.cell.childNodes.length;g++){var e=this.cell.childNodes[g].className;for(var d in this.conf.idx_data){var f=new RegExp(this.conf.idx_data[d]);if(e.match(f)!=null){this.conf.idx[d]=g}}}this.callEvent("_onIdxUpdated",[])};this._adjustAttached=function(){for(var d in this.dataNodes){if(this.dataNodes[d]!=null&&typeof(this.dataNodes[d].setSizes)=="function"){this.dataNodes[d].setSizes()}}if(this.dataObj!=null&&typeof(this.dataObj.setSizes)=="function"){if(this.dataType=="layout"&&typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell&&this.dataObj._getMainInst()!=this.layout._getMainInst()){this.dataObj.setSizes();return}this.dataObj.setSizes.apply(this.dataObj,arguments)}};this._setSize=function(o,m,q,g,j,l,e,f){if(this.conf.size==null){this.conf.size={}}if(f==null){f={}}var r={left:"x",top:"y",width:"w",height:"h"};this.conf.size.x=o;this.conf.size.y=m;this.conf.size.w=Math.max(q,0);this.conf.size.h=Math.max(g,0);for(var n in r){var d=(f[n]||n);this.cell.style[d]=this.conf.size[r[n]]+"px"}this.callEvent("_onSetSize",[]);if(l!==true){this._adjustCont(j,e)}else{this._adjustAttached(j)}this._adjustProgress()};this._adjustCont=function(j,g){var h=this.cell.childNodes[this.conf.idx.cont];if(typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell&&this.conf.collapsed==true){h.style.left=h.style.top="0px";h.style.width=h.style.height="200px";h=null;return}var f=0;for(var d in this.conf.ofs_nodes.t){var e=this.conf.ofs_nodes.t[d];f+=(e=="func"?this[d]():(e==true?this.cell.childNodes[this.conf.idx[d]].offsetHeight:0))}var l=0;for(var d in this.conf.ofs_nodes.b){var e=this.conf.ofs_nodes.b[d];l+=(e=="func"?this[d]():(e==true?this.cell.childNodes[this.conf.idx[d]].offsetHeight:0))}h.style.left="0px";h.style.top=f+"px";if(this.conf.cells_cont==null){this.conf.cells_cont={};h.style.width=this.cell.offsetWidth+"px";h.style.height=Math.max(this.cell.offsetHeight-f-l,0)+"px";this.conf.cells_cont.w=parseInt(h.style.width)-h.offsetWidth;this.conf.cells_cont.h=parseInt(h.style.height)-h.offsetHeight}h.style.left="0px";h.style.top=f+"px";h.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px";h.style.height=Math.max(this.conf.size.h-f-l+this.conf.cells_cont.h,0)+"px";h=null;this._adjustAttached(j);if(g=="expand"&&this.dataType=="editor"&&this.dataObj!=null){this.dataObj._prepareContent(true)}};this._mtbUpdBorder=function(){var e=["menu","toolbar","ribbon"];for(var g=0;g<e.length;g++){if(this.conf.idx[e[g]]!=null){var h=this.cell.childNodes[this.conf.idx[e[g]]];var f="dhx_cell_"+e[g]+"_no_borders";var d="dhx_cell_"+e[g]+"_def";h.className=h.className.replace(new RegExp(this.conf.borders?f:d),this.conf.borders?d:f);h=null}}};this._resetSizeState=function(){this.conf.cells_cont=null};this.conf.view="def";this.conf.views_loaded={};this.conf.views_loaded[this.conf.view]=true;this._viewSave=function(f){this.views[f]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},url_data:this.conf.url_data,dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};var g=this.cell.childNodes[this.conf.idx.cont];while(g.childNodes.length>0){this.views[f].cellCont.push(g.firstChild);g.removeChild(g.firstChild)}g=null;this.dataType=null;this.dataObj=null;this.conf.url_data=null;for(var e in this.dataNodes){for(var d in this.conf.ofs_nodes){if(typeof(this.conf.ofs_nodes[d][e])!="undefined"){this.views[f].ofs_nodes[d][e]=this.conf.ofs_nodes[d][e];this.conf.ofs_nodes[d][e]=null;delete this.conf.ofs_nodes[d][e]}}this.views[f].dataNodesCont[e]=this.cell.childNodes[this.conf.idx[e]];this.cell.removeChild(this.cell.childNodes[this.conf.idx[e]]);this.views[f].dataNodes[e]=this.dataNodes[e];this.dataNodes[e]=null;delete this.dataNodes[e];this._updateIdx()}this.callEvent("_onViewSave",[f])};this._viewRestore=function(f){if(this.views[f]==null){return}this.dataObj=this.views[f].dataObj;this.dataType=this.views[f].dataType;this.conf.url_data=this.views[f].url_data;for(var g=0;g<this.views[f].cellCont.length;g++){this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[f].cellCont[g])}for(var e in this.views[f].dataNodes){this.dataNodes[e]=this.views[f].dataNodes[e];if(e=="menu"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont])}if(e=="toolbar"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont])}if(e=="ribbon"){this.cell.insertBefore(this.views[f].dataNodesCont[e],this.cell.childNodes[this.conf.idx.cont])}if(e=="sb"){this.cell.appendChild(this.views[f].dataNodesCont[e])}this._updateIdx()}for(var e in this.views[f].ofs_nodes){for(var d in this.views[f].ofs_nodes[e]){this.conf.ofs_nodes[e][d]=this.views[f].ofs_nodes[e][d]}}if(this.conf.borders!=this.views[f].borders){this[this.views[f].borders?"_showBorders":"_hideBorders"](true)}if(this.dataType=="url"&&this.conf.url_data!=null&&this.conf.url_data.ajax==false&&this.conf.url_data.post_data!=null){this.reloadURL()}this.callEvent("_onViewRestore",[f]);this._viewDelete(f)};this._viewDelete=function(f){if(this.views[f]==null){return}this.views[f].borders=null;for(var e in this.views[f].ofs_nodes){for(var d in this.views[f].ofs_nodes[e]){this.views[f].ofs_nodes[e][d]=null}this.views[f].ofs_nodes[e]=null}this.views[f].dataType=null;this.views[f].dataObj=null;this.views[f].url_data=null;for(var g=0;g<this.views[f].cellCont.length;g++){this.views[f].cellCont[g]=null}this.views[f].cellCont=null;for(var e in this.views[f].dataNodes){this.views[f].dataNodes[e]=null;this.views[f].dataNodesCont[e]=null}this.views[f].dataNodes=this.views[f].dataNodesCont=null;this.views[f]=null;delete this.views[f]};window.dhx4._eventable(this);this._updateIdx();return this}dhtmlXCellObject.prototype.showView=function(a){if(this.conf.view==a){return false}this._viewSave(this.conf.view);this._viewRestore(a);this._updateIdx();this._adjustCont();this.conf.view=a;var b=(typeof(this.conf.views_loaded[this.conf.view])=="undefined");this.conf.views_loaded[this.conf.view]=true;return b};dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view};dhtmlXCellObject.prototype.unloadView=function(d){if(d==this.conf.view){var e=this.conf.unloading;this.conf.unloading=true;if(typeof(this.detachMenu)=="function"){this.detachMenu()}if(typeof(this.detachToolbar)=="function"){this.detachToolbar()}if(typeof(this.detachRibbon)=="function"){this.detachRibbon()}this.detachStatusBar();this._detachObject(null,true);this.conf.unloading=e;if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(this.views[d]==null){return}var c=this.views[d];for(var b in c.dataNodes){if(typeof(c.dataNodes[b].unload)=="function"){c.dataNodes[b].unload()}c.dataNodes[b]=null;c.dataNodesCont[b]=null}if(c.dataType=="url"){if(c.cellCont!=null&&c.cellCont[0]!="null"){this._detachURLEvents(c.cellCont[0])}}else{if(c.dataObj!=null){if(typeof(c.dataObj.unload)=="function"){c.dataObj.unload()}else{if(typeof(c.dataObj.destructor)=="function"){c.dataObj.destructor()}}c.dataObj=null}}c=null;this._viewDelete(d);if(typeof(this.conf.views_loaded[d])!="undefined"){delete this.conf.views_loaded[d]}};dhtmlXCellObject.prototype.getId=function(){return this._idd};dhtmlXCellObject.prototype.progressOn=function(){if(this.conf.progress==true){return}this.conf.progress=true;var b=document.createElement("DIV");b.className=this.conf.idx_data.pr1;var a=document.createElement("DIV");if(this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)){a.className=this.conf.idx_data.pr3;a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'}else{a.className=this.conf.idx_data.pr2}if(this.conf.idx.cover!=null){this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cover])}else{this.cell.appendChild(a)}this.cell.insertBefore(b,a);b=a=null;this._updateIdx();this._adjustProgress()};dhtmlXCellObject.prototype.progressOff=function(){if(this.conf.progress!=true){return}for(var b in {pr3:3,pr2:2,pr1:1}){var c=this.cell.childNodes[this.conf.idx[b]];if(c!=null){c.parentNode.removeChild(c)}c=null}this.conf.progress=false;this._updateIdx()};dhtmlXCellObject.prototype._adjustProgress=function(){if(this.conf.idx.pr1==null){return}if(!this.conf.pr){this.conf.pr={}}var b=this.cell.childNodes[this.conf.idx.pr1];var a=this.cell.childNodes[this.conf.idx.pr2]||this.cell.childNodes[this.conf.idx.pr3];if(!this.conf.pr.ofs){a.style.width=b.offsetWidth+"px";a.style.height=b.offsetHeight+"px";this.conf.pr.ofs={w:a.offsetWidth-a.clientWidth,h:a.offsetHeight-a.clientHeight}}a.style.width=b.offsetWidth-this.conf.pr.ofs.w+"px";a.style.height=b.offsetHeight-this.conf.pr.ofs.h+"px";b=a=null};dhtmlXCellObject.prototype._showCellCover=function(){if(this.conf.cover==true){return}this.conf.cover=true;var a=document.createElement("DIV");a.className=this.conf.idx_data.cover;this.cell.appendChild(a);a=null;this._updateIdx()};dhtmlXCellObject.prototype._hideCellCover=function(){if(this.conf.cover!=true){return}this.cell.removeChild(this.cell.childNodes[this.conf.idx.cover]);this._updateIdx();this.conf.cover=false};dhtmlXCellObject.prototype._showBorders=function(a){if(this.conf.borders){return}this.conf.borders=true;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css;this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[true]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._hideBorders=function(a){if(!this.conf.borders){return}this.conf.borders=false;this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders";this.conf.cells_cont=null;this._mtbUpdBorder();this.callEvent("_onBorderChange",[false]);if(a!==true){this._adjustCont(this._idd)}};dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth};dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight};dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"};dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=true;this.callEvent("_onCellUnload",[]);this.progressOff();this.unloadView(this.conf.view);this.dataNodes=null;this.cell.parentNode.removeChild(this.cell);this.cell=null;window.dhx4._eventable(this,"clear");for(var b in this.views){this.unloadView(b)}this.conf=null;for(var b in this){this[b]=null}};dhtmlXCellObject.prototype.attachObject=function(d,c){if(window.dhx4.s2b(c)&&!(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell)){c=false}if(typeof(d)=="string"){d=document.getElementById(d)}if(d.parentNode==this.cell.childNodes[this.conf.idx.cont]){d=null;return}if(c){d.style.display="";var a=d.offsetWidth;var b=d.offsetHeight}this._attachObject(d);this.dataType="obj";d.style.display="";d=null;if(c){this._adjustByCont(a,b)}};dhtmlXCellObject.prototype.appendObject=function(a){if(typeof(a)=="string"){a=document.getElementById(a)}if(a.parentNode==this.cell.childNodes[this.conf.idx.cont]){a=null;return}if(!this.conf.append_mode){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto";this.conf.append_mode=true}this._attachObject(a,null,null,true);this.dataType="obj";a.style.display="";a=null};dhtmlXCellObject.prototype.detachObject=function(b,a){this._detachObject(null,b,a)};dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb};dhtmlXCellObject.prototype.getAttachedObject=function(){if(this.dataType=="obj"||this.dataType=="url"||this.dataType=="url-ajax"){return this.cell.childNodes[this.conf.idx.cont].firstChild}else{return this.dataObj}};dhtmlXCellObject.prototype.attachURL=function(b,n,c){if(c==true){c={}}var d=(typeof(c)!="undefined"&&c!=false&&c!=null);if(this.conf.url_data==null){this.conf.url_data={}}this.conf.url_data.url=b;this.conf.url_data.ajax=(n==true);this.conf.url_data.post_data=(c==true?{}:(c||null));if(this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(h){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}if(n==true){var m=this;if(d){var f="";for(var l in c){f+="&"+encodeURIComponent(l)+"="+encodeURIComponent(c[l])}this.conf.url_data.xml_doc=dhx4.ajax.post(b,f,function(a){if(m.attachHTMLString!=null&&typeof(a.xmlDoc.responseText)=="string"){m.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(m._doOnFrameContentLoaded)=="function"){m._doOnFrameContentLoaded()}m.dataType="url-ajax"}m=a=null})}else{this.conf.url_data.xml_doc=dhx4.ajax.get(b,function(a){if(m.attachHTMLString!=null&&typeof(a.xmlDoc.responseText)=="string"){m.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+a.xmlDoc.responseText+"</div>");if(typeof(m._doOnFrameContentLoaded)=="function"){m._doOnFrameContentLoaded()}m.dataType="url-ajax"}m=a=null})}}else{if(this.dataType=="url"){var g=this.getFrame()}else{var g=document.createElement("IFRAME");g.frameBorder=0;g.border=0;g.style.width="100%";g.style.height="100%";g.style.position="relative";this._attachObject(g);this.dataType="url";this._attachURLEvents()}if(d){var j=(typeof(this.conf.url_data.post_ifr)=="undefined");this.conf.url_data.post_ifr=true;if(j){this._attachURLEvents()}g.src="about:blank"}else{g.src=b+window.dhx4.ajax._dhxr(b)}g=null}g=null};dhtmlXCellObject.prototype.reloadURL=function(){if(!(this.dataType=="url"||this.dataType=="url-ajax")){return}if(this.conf.url_data==null){return}this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)};dhtmlXCellObject.prototype.attachHTMLString=function(str){this._attachObject(null,null,str);var z=str.match(/<script[^>]*>[^\f]*?<\/script>/g)||[];for(var i=0;i<z.length;i++){var s=z[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");if(s){if(window.execScript){window.execScript(s)}else{window.eval(s)}}}};dhtmlXCellObject.prototype.attachScheduler=function(a,g,b,d){d=d||window.scheduler;var e=false;if(b){var f=document.getElementById(b);if(f){e=true}}if(!e){var c=b||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>';var f=document.createElement("DIV");f.id="dhxSchedObj_"+new Date().getTime();f.style.width="100%";f.style.height="100%";f.style.position="relative";f.style.overflow="hidden";f.className="dhx_cal_container";f.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+c+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}this._attachObject(f);this.dataType="scheduler";this.dataObj=d;this.dataObj.setSizes=function(){this.update_view()};d.init(f.id,a,g);f=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype.attachMap=function(a){var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(!a){a={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}}this.dataType="maps";this.dataObj=new google.maps.Map(b,a);this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj};dhtmlXCellObject.prototype._createNode_sb=function(g,d,f,a,e){if(typeof(e)!="undefined"){g=e}else{var b=d||{};var j=(typeof(b.text)=="string"&&b.text.length>0?b.text:"&nbsp;");var c=(typeof(b.height)=="number"?b.height:false);var g=document.createElement("DIV");g.className="dhx_cell_statusbar_def";g.innerHTML="<div class='"+(b.paging==true?"dhx_cell_statusbar_paging":"dhx_cell_statusbar_text")+"'>"+j+"</div>";if(c!=false){g.firstChild.style.height=g.firstChild.style.lineHeight=c+"px"}}if(this.conf.idx.pr1!=null){this.cell.insertBefore(g,this.cell.childNodes[this.conf.idx.pr1])}else{this.cell.appendChild(g)}this.conf.ofs_nodes.b.sb=true;this._updateIdx();this._adjustCont(this._idd);return g};dhtmlXCellObject.prototype.attachStatusBar=function(a){if(this.dataNodes.sb){return}if(a!=null&&window.dhx4.s2b(a.paging)==true){a.height=null}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"}this.dataNodes.sb=this._attachObject("sb",a);this.dataNodes.sb.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sb.onselectstart=function(b){return false};return this.dataNodes.sb};dhtmlXCellObject.prototype.detachStatusBar=function(){if(!this.dataNodes.sb){return}if(this.conf.skin=="dhx_skyblue"&&typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")}this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null;this.dataNodes.sb=null;delete this.dataNodes.sb;this._detachObject("sb")};dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")};dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")};dhtmlXCellObject.prototype._mtbShowHide=function(b,a){if(!this.dataNodes[b]){return}this.cell.childNodes[this.conf.idx[b]].style.display=a;this._adjustCont()};dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){if(this.dataType!="url"){return null}return this.cell.childNodes[this.conf.idx.cont].firstChild};dhtmlXCellObject.prototype._attachURLEvents=function(){if(this.dataType!="url"){return}var c=this;var b=this._idd;var a=this.cell.childNodes[this.conf.idx.cont].firstChild;if(typeof(this._doOnFrameMouseDown)!="function"){this._doOnFrameMouseDown=function(d){c.callEvent("_onContentMouseDown",[b,d||event])}}if(typeof(window.addEventListener)=="function"){a.onload=function(){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.addEventListener("mousedown",c._doOnFrameMouseDown,false)}}catch(d){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(d){}}}else{a.onreadystatechange=function(d){if(this.readyState=="complete"){try{if(typeof(c._doOnFrameMouseDown)=="function"){this.contentWindow.document.body.attachEvent("onmousedown",c._doOnFrameMouseDown)}}catch(f){}try{if(typeof(c._doOnFrameContentLoaded)=="function"){c._doOnFrameContentLoaded()}}catch(f){}}}}};dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(this.conf.url_data.post_ifr==true){var h=this.getFrame().contentWindow.document;var g=h.createElement("FORM");g.method="POST";g.action=this.conf.url_data.url;h.body.appendChild(g);var c={};if(window.dhx4.ajax.cache!=true){c["dhxr"+new Date().getTime()]="1"}for(var b in this.conf.url_data.post_data){c[b]=this.conf.url_data.post_data[b]}for(var b in c){var e=h.createElement("INPUT");e.type="hidden";e.name=b;e.value=c[b];g.appendChild(e);e=null}this.conf.url_data.post_ifr=false;g.submit()}else{this.callEvent("_onContentLoaded",[this._idd])}};dhtmlXCellObject.prototype._detachURLEvents=function(a){if(a==null){if(this.dataType!="url"){return}a=this.cell.childNodes[this.conf.idx.cont].firstChild}if(typeof(window.addEventListener)=="function"){a.onload=null;try{a.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,false)}catch(b){}}else{a.onreadystatechange=null;try{a.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(b){}}a=null};dhtmlXCellObject.prototype._attachObject=function(e,b,d,a,c){if(typeof(e)=="string"&&{menu:1,toolbar:1,ribbon:1,sb:1}[e]==1){return this["_createNode_"+e].apply(this,arguments)}if(a!=true){this._detachObject(null,true,null)}if(typeof(d)=="string"){this.cell.childNodes[this.conf.idx.cont].innerHTML=d}else{this.cell.childNodes[this.conf.idx.cont].appendChild(e)}e=null};dhtmlXCellObject.prototype._detachObject=function(g,b,a){this.callEvent("_onBeforeContentDetach",[]);if(g=="menu"||g=="toolbar"||g=="ribbon"||g=="sb"){var f=this.cell.childNodes[this.conf.idx[g]];f.parentNode.removeChild(f);f=null;this.conf.ofs_nodes[g=="sb"?"b":"t"][g]=false;this._updateIdx();if(!this.conf.unloading){this._adjustCont(this._idd)}return}if(b==true){a=false}else{if(typeof(a)=="undefined"){a=document.body}else{if(typeof(a)=="string"){a=document.getElementById(a)}}}if(a===false){if(this.conf.unloading==true&&String(this.dataType).match(/ajax/)!=null){if(this.conf.url_data!=null&&this.conf.url_data.xml_doc!=null){try{this.conf.url_data.xml_doc.xmlDoc.abort()}catch(d){}this.conf.url_data.xml_doc.xmlDoc=null;this.conf.url_data.xml_doc=null}}if(this.dataType=="url"){this._detachURLEvents()}else{if(this.dataObj!=null){if(typeof(this.dataObj.unload)=="function"){this.dataObj.unload()}else{if(typeof(this.dataObj.destructor)=="function"){this.dataObj.destructor()}}}}}var f=this.cell.childNodes[this.conf.idx.cont];while(f.childNodes.length>0){if(a===false){f.removeChild(f.lastChild)}else{f.firstChild.style.display="none";a.appendChild(f.firstChild)}}if(this.conf.append_mode){f.style.overflow="";this.conf.append_mode=false}var c=(this.dataType=="tabbar");this.dataObj=null;this.dataType=null;a=f=null;if(this.conf.unloading!=true&&c){this.showHeader(true);this._showBorders()}};dhtmlXCellObject.prototype._attachFromCell=function(b){this.detachObject(true);var d="layout";if(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){d="window"}if(typeof(window.dhtmlXWindowsCell)=="function"&&b instanceof window.dhtmlXWindowsCell&&b.wins.w[b._idd].conf.parked==true){b.wins._winCellSetOpacity(b._idd,"open",false)}if(typeof(window.dhtmlXAccordionCell)=="function"&&b instanceof window.dhtmlXAccordionCell&&b.conf.opened==false){b._cellSetOpacity("open",false)}for(var c in b.dataNodes){this._attachObject(c,null,null,null,b.cell.childNodes[b.conf.idx[c]]);this.dataNodes[c]=b.dataNodes[c];b.dataNodes[c]=null;b.conf.ofs_nodes[c=="sb"?"b":"t"][c]=false;b._updateIdx()}this._mtbUpdBorder();if(b.dataType!=null&&b.dataObj!=null){this.dataType=b.dataType;this.dataObj=b.dataObj;while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}b.dataType=null;b.dataObj=null;if(this.dataType=="grid"){if(d=="window"&&this.conf.skin=="dhx_skyblue"){this.dataObj.entBox.style.border="1px solid #a4bed4";this.dataObj._sizeFix=0}else{this.dataObj.entBox.style.border="0px solid white";this.dataObj._sizeFix=2}}}else{while(b.cell.childNodes[b.conf.idx.cont].childNodes.length>0){this.cell.childNodes[this.conf.idx.cont].appendChild(b.cell.childNodes[b.conf.idx.cont].firstChild)}}this.conf.view=b.conf.view;b.conf.view="def";for(var c in b.views){this.views[c]=b.views[c];b.views[c]=null;delete b.views[c]}b._updateIdx();b._adjustCont();this._updateIdx();this._adjustCont();if(b.conf.progress==true){b.progressOff();this.progressOn()}else{this.progressOff()}if(d=="window"&&this.wins.w[this._idd].conf.parked){this.wins._winCellSetOpacity(this._idd,"close",false)}};function dhtmlXCellTop(d,b){if(arguments.length==0||typeof(d)=="undefined"){return}var a=this;this.dataNodes={};this.conf.ofs={t:0,b:0,l:0,r:0};this.conf.ofs_nodes={t:{},b:{}};this.conf.progress=false;this.conf.fs_mode=false;this.conf.fs_tm=null;this.conf.fs_resize=false;if(d==document.body){this.conf.fs_mode=true;this.base=d;if(this.base==document.body){var c={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8},material:{t:9,b:9,l:8,r:8}};this.conf.ofs=(c[this.conf.skin]!=null?c[this.conf.skin]:c.dhx_skyblue)}}else{this.base=(typeof(d)=="string"?document.getElementById(d):d)}this.base.className+=" "+this.conf.css+"_base_"+this.conf.skin;this.cont=document.createElement("DIV");this.cont.className=this.conf.css+"_cont";this.base.appendChild(this.cont);if(b!=null){this.setOffsets(b,false)}else{if(this.base._ofs!=null){this.setOffsets(this.base._ofs,false);this.base._ofs=null;try{delete this.base._ofs}catch(f){}}}this._adjustCont=function(){var h=this.conf.ofs.t;for(var g in this.conf.ofs_nodes.t){h+=(this.conf.ofs_nodes.t[g]==true?this.dataNodes[g].offsetHeight:0)}var e=this.conf.ofs.b;for(var g in this.conf.ofs_nodes.b){e+=(this.conf.ofs_nodes.b[g]==true?this.dataNodes[g].offsetHeight:0)}this.cont.style.left=this.conf.ofs.l+"px";this.cont.style.width=this.base.clientWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.cont.style.top=h+"px";this.cont.style.height=this.base.clientHeight-h-e+"px"};this._setBaseSkin=function(e){this.base.className=this.base.className.replace(new RegExp(this.conf.css+"_base_"+this.conf.skin,"gi"),this.conf.css+"_base_"+e)};this._initFSResize=function(){if(this.conf.fs_resize==true){return}this._doOnResizeStart=function(){window.clearTimeout(a.conf.fs_tm);a.conf.fs_tm=window.setTimeout(a._doOnResizeEnd,200)};this._doOnResizeEnd=function(){a.setSizes()};if(typeof(window.addEventListener)=="function"){window.addEventListener("resize",this._doOnResizeStart,false)}else{window.attachEvent("onresize",this._doOnResizeStart)}this.conf.fs_resize=true};if(this.conf.fs_mode==true){this._initFSResize()}this._unloadTop=function(){this._mtbUnload();this.detachHeader();this.detachFooter();if(this.conf.fs_mode==true){if(typeof(window.addEventListener)=="function"){window.removeEventListener("resize",this._doOnResizeStart,false)}else{window.detachEvent("onresize",this._doOnResizeStart)}}this.base.removeChild(this.cont);var e=new RegExp("s{0,}"+this.conf.css+"_base_"+this.conf.skin,"gi");this.base.className=this.base.className.replace(e,"");this.cont=this.base=null;a=null};d=null}dhtmlXCellTop.prototype.setOffsets=function(f,e){var d=false;for(var b in f){var c=b.charAt(0);if(typeof(this.conf.ofs[c])!="undefined"&&!isNaN(f[b])){this.conf.ofs[c]=parseInt(f[b]);d=true}}if(e!==false&&typeof(this.setSizes)=="function"&&d==true){this.setSizes()}};dhtmlXCellTop.prototype.attachMenu=function(a){if(this.dataNodes.menu!=null){return}this.dataNodes.menuObj=document.createElement("DIV");this.dataNodes.menuObj.className="dhxcelltop_menu";this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cont);if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.menuObj;this.dataNodes.menu=new dhtmlXMenuObject(a);this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.menuObj.style.display=="none"){return}if(this.conf.ofs_menu==null){this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.conf.ofs_menu={w:this.dataNodes.menuObj.offsetWidth-parseInt(this.dataNodes.menuObj.style.width)}}this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px";this.dataNodes.menuObj.style.marginTop=(this.dataNodes.haObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r-this.conf.ofs_menu.w+"px"});this.conf.ofs_nodes.t.menuObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.menu};dhtmlXCellTop.prototype.detachMenu=function(){if(this.dataNodes.menu==null){return}this.dataNodes.menu.unload();this.dataNodes.menu=null;this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj);this.dataNodes.menuObj=null;this.detachEvent(this.dataNodes.menuEv);this.dataNodes.menuEv=null;delete this.dataNodes.menu;delete this.dataNodes.menuObj;delete this.dataNodes.menuEv;this.conf.ofs_nodes.t.menuObj=false;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachToolbar=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.toolbarObj=document.createElement("DIV");this.dataNodes.toolbarObj.className="dhxcelltop_toolbar";this.base.insertBefore(this.dataNodes.toolbarObj,this.cont);this.dataNodes.toolbarObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.toolbarObj.firstChild;this.dataNodes.toolbar=new dhtmlXToolbarObject(a);this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.toolbarObj.style.display=="none"){return}this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px";this.dataNodes.toolbarObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.toolbar._masterCell=this;this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()});this.conf.ofs_nodes.t.toolbarObj=true;this.setSizes();a.parnt=null;a=null;return this.dataNodes.toolbar};dhtmlXCellTop.prototype.detachToolbar=function(){if(this.dataNodes.toolbar==null){return}this.dataNodes.toolbar._masterCell=null;this.dataNodes.toolbar.unload();this.dataNodes.toolbar=null;this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj);this.dataNodes.toolbarObj=null;this.detachEvent(this.dataNodes.toolbarEv);this.dataNodes.toolbarEv=null;this.conf.ofs_nodes.t.toolbarObj=false;delete this.dataNodes.toolbar;delete this.dataNodes.toolbarObj;delete this.dataNodes.toolbarEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachRibbon=function(a){if(!(this.dataNodes.ribbon==null&&this.dataNodes.toolbar==null)){return}this.dataNodes.ribbonObj=document.createElement("DIV");this.dataNodes.ribbonObj.className="dhxcelltop_ribbon";this.base.insertBefore(this.dataNodes.ribbonObj,this.cont);this.dataNodes.ribbonObj.appendChild(document.createElement("DIV"));if(typeof(a)!="object"||a==null){a={}}a.skin=this.conf.skin;a.parent=this.dataNodes.ribbonObj.firstChild;this.dataNodes.ribbon=new dhtmlXRibbon(a);this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.ribbonObj.style.display=="none"){return}this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px";this.dataNodes.ribbonObj.style.marginTop=(this.dataNodes.haObj!=null||this.dataNodes.menuObj!=null?0:this.conf.ofs.t)+"px";this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px";this.dataNodes.ribbon.setSizes()});this.conf.ofs_nodes.t.ribbonObj=true;var b=this;this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){b.setSizes()});this.setSizes();a.parnt=null;a=null;return this.dataNodes.ribbon};dhtmlXCellTop.prototype.detachRibbon=function(){if(this.dataNodes.ribbon==null){return}this.dataNodes.ribbon.unload();this.dataNodes.ribbon=null;this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj);this.dataNodes.ribbonObj=null;this.detachEvent(this.dataNodes.ribbonEv);this.dataNodes.ribbonEv=null;this.conf.ofs_nodes.t.ribbonObj=false;delete this.dataNodes.ribbon;delete this.dataNodes.ribbonObj;delete this.dataNodes.ribbonEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachStatusBar=function(a){if(this.dataNodes.sbObj){return}if(typeof(a)=="undefined"){a={}}this.dataNodes.sbObj=document.createElement("DIV");this.dataNodes.sbObj.className="dhxcelltop_statusbar";if(this.cont.nextSibling!=null){this.base.insertBefore(this.dataNodes.sbObj,this.cont.nextSibling)}else{this.base.appendChild(this.dataNodes.sbObj)}this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+(typeof(a.text)=="string"&&a.text.length>0?a.text:"&nbsp;")+"</div>";if(typeof(a.height)=="number"){this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=a.height+"px"}this.dataNodes.sbObj.setText=function(b){this.childNodes[0].innerHTML=b};this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML};this.dataNodes.sbObj.onselectstart=function(b){return false};this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){if(this.dataNodes.sbObj.style.display=="none"){return}this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px";this.dataNodes.sbObj.style.bottom=(this.dataNodes.faObj!=null?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px";this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.b.sbObj=true;this.setSizes();return this.dataNodes.sbObj};dhtmlXCellTop.prototype.detachStatusBar=function(){if(!this.dataNodes.sbObj){return}this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null;this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj);this.dataNodes.sbObj=null;this.detachEvent(this.dataNodes.sbEv);this.dataNodes.sbEv=null;this.conf.ofs_nodes.b.sbObj=false;delete this.dataNodes.sb;delete this.dataNodes.sbObj;delete this.dataNodes.sbEv;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.showMenu=function(){this._mtbShowHide("menuObj","")};dhtmlXCellTop.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")};dhtmlXCellTop.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")};dhtmlXCellTop.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")};dhtmlXCellTop.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")};dhtmlXCellTop.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")};dhtmlXCellTop.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")};dhtmlXCellTop.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")};dhtmlXCellTop.prototype._mtbShowHide=function(b,a){if(this.dataNodes[b]==null){return}this.dataNodes[b].style.display=a;this.setSizes()};dhtmlXCellTop.prototype._mtbUnload=function(b,a){this.detachMenu();this.detachToolbar();this.detachStatusBar();this.detachRibbon()};dhtmlXCellTop.prototype.getAttachedMenu=function(){return this.dataNodes.menu};dhtmlXCellTop.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar};dhtmlXCellTop.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon};dhtmlXCellTop.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj};dhtmlXCellTop.prototype.progressOn=function(){if(this.conf.progress){return}this.conf.progress=true;var b=document.createElement("DIV");b.className="dhxcelltop_progress";this.base.appendChild(b);var a=document.createElement("DIV");if(this.conf.skin=="material"&&(window.dhx4.isFF||window.dhx4.isChrome||window.dhx4.isOpera||window.dhx4.isEdge)){a.className="dhxcelltop_progress_svg";a.innerHTML='<svg class="dhx_cell_prsvg" viewBox="25 25 50 50"><circle class="dhx_cell_prcircle" cx="50" cy="50" r="20"/></svg>'}else{var a=document.createElement("DIV");a.className="dhxcelltop_progress_img"}this.base.appendChild(a);b=a=null};dhtmlXCellTop.prototype.progressOff=function(){if(!this.conf.progress){return}var d={dhxcelltop_progress:true,dhxcelltop_progress_img:true,dhxcelltop_progress_svg:true};for(var c=0;c<this.base.childNodes.length;c++){if(typeof(this.base.childNodes[c].className)!="undefined"&&d[this.base.childNodes[c].className]==true){d[this.base.childNodes[c].className]=this.base.childNodes[c]}}for(var b in d){if(d[b]!=true){this.base.removeChild(d[b])}d[b]=null}this.conf.progress=false;d=null};dhtmlXCellTop.prototype.attachHeader=function(b,a){if(this.dataNodes.haObj!=null){return}if(typeof(b)!="object"){b=document.getElementById(b)}this.dataNodes.haObj=document.createElement("DIV");this.dataNodes.haObj.className="dhxcelltop_hdr";this.dataNodes.haObj.style.height=(a||b.offsetHeight)+"px";this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cont);this.dataNodes.haObj.appendChild(b);b.style.visibility="visible";b=null;this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px";this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px";this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.conf.ofs_nodes.t.haObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachHeader=function(){if(!this.dataNodes.haObj){return}while(this.dataNodes.haObj.childNodes.length>0){this.dataNodes.haObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.haObj.lastChild)}this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj);this.dataNodes.haObj=null;this.detachEvent(this.dataNodes.haEv);this.dataNodes.haEv=null;this.conf.ofs_nodes.t.haObj=false;delete this.dataNodes.haEv;delete this.dataNodes.haObj;if(!this.conf.unloading){this.setSizes()}};dhtmlXCellTop.prototype.attachFooter=function(c,a){if(this.dataNodes.faObj!=null){return}if(typeof(c)!="object"){c=document.getElementById(c)}this.dataNodes.faObj=document.createElement("DIV");this.dataNodes.faObj.className="dhxcelltop_ftr";this.dataNodes.faObj.style.height=(a||c.offsetHeight)+"px";var b=(this.dataNodes.sbObj||this.cont);if(this.base.lastChild==b){this.base.appendChild(this.dataNodes.faObj)}else{this.base.insertBefore(this.dataNodes.faObj,b.nextSibling)}this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px";this.dataNodes.faObj.style.bottom=this.conf.ofs.b+"px";this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"});this.dataNodes.faObj.appendChild(c);c.style.visibility="visible";b=c=null;this.conf.ofs_nodes.b.faObj=true;this.setSizes()};dhtmlXCellTop.prototype.detachFooter=function(){if(!this.dataNodes.faObj){return}while(this.dataNodes.faObj.childNodes.length>0){this.dataNodes.faObj.lastChild.style.visibility="hidden";document.body.appendChild(this.dataNodes.faObj.lastChild)}this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj);this.dataNodes.faObj=null;this.detachEvent(this.dataNodes.faEv);this.dataNodes.faEv=null;this.conf.ofs_nodes.b.faObj=false;delete this.dataNodes.faEv;delete this.dataNodes.faObj;if(!this.conf.unloading){this.setSizes()}};function dhtmlXCombo(f,l,c,h,e){var g=this;var d=null;var m=null;if(typeof(f)=="object"&&!f.tagName){d=f;f=d.parent;c=d.width;l=d.name;h=d.mode;m=d.skin}this.cont=(typeof(f)=="string"?document.getElementById(f):f);this.conf={skin:null,form_name:l||"dhxcombo",combo_width:(parseInt(c)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0),combo_image:false,combo_focus:false,opts_type:(typeof(h)=="string"&&typeof(this.modes[h])!="undefined"?h:"option"),opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:true,allow_empty_value:true,free_text_empty:false,enabled:true,btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0),ro_mode:false,ro_text:"",ro_tm:null,ro_tm_time:750,img_path:"",img_def:"",img_def_dis:true,template:{header:true,input:"#text#",option:"#text#"},f_func:null,f_mode:false,f_url:false,f_cache:false,f_cache_data:{},f_dyn:false,f_dyn_end:false,f_mask:"",f_ac:true,f_ac_text:"",f_server_tm:null,f_server_last:"",f_loading:false,s_tm:null,s_time:200,s_mode:"select",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:false,clear_blur:false,clear_bsp:false,clear_key:false,i_ofs:23,sp:{dhx_skyblue:{list_ofs:1,hdr_ofs:1,scr_ofs:1},dhx_web:{list_ofs:0,hdr_ofs:1,scr_ofs:0},dhx_terrace:{list_ofs:1,hdr_ofs:1,scr_ofs:1},material:{list_ofs:0,hdr_ofs:1,scr_ofs:1}},col_w:null};this.conf.combo_image=(this.modes[this.conf.opts_type].image==true);this.t={};this.base=document.createElement("DIV");this.base.style.width=this.conf.combo_width+"px";this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0))+"px;"+(this.conf.combo_image?"margin-left:"+this.conf.i_ofs+"px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":"");this.cont.appendChild(this.base);this.list=document.createElement("DIV");this.list._listId=window.dhx4.newId();this.list.style.display="none";document.body.insertBefore(this.list,document.body.firstChild);this._doOnListScroll=function(){if(g.conf.s_tm!=null){window.clearTimeout(g.conf.s_tm)}g.conf.s_tm=window.setTimeout(g._doOnListScrollAction,g.conf.s_time)};this._doOnListScrollAction=function(){g.conf.s_tm=null;if(g.conf.s_mode=="scroll"&&g.list.scrollHeight-g.list.scrollTop-10<g.list.clientHeight){g._subloadRequest()}};if(typeof(window.addEventListener)=="function"){this.list.addEventListener("scroll",this._doOnListScroll,false)}else{this.list.attachEvent("onscroll",this._doOnListScroll)}this.setSkin(m||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"material");this._updateTopImage=function(a){if(!this.conf.combo_image){return}if(a!=null){this.base.lastChild.innerHTML=this.t[a].obj.getTopImage(this.t[a].item,this.conf.enabled)}else{this.base.lastChild.innerHTML=this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)}};this._filterOpts=function(w){if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}var s=String(this.base.firstChild.value).replace(new RegExp(this._fixRE(this.conf.f_ac_text)+"$","i"),"");if(this.conf.f_server_last==s.toLowerCase()){this._checkForMatch();return}if(this.conf.f_url!=null&&this.checkEvent("onDynXLS")){this.conf.f_server_last=s.toLowerCase();this.callEvent("onDynXLS",[s]);return}if(this.conf.f_url!=null){if(s.length==0){this.conf.f_server_last=s.toLowerCase();this.clearAll();return}if(this.conf.f_cache==true&&this.conf.f_cache_data[s]!=null){this.clearAll();this.conf.f_server_last=s.toLowerCase();for(var o=0;o<this.conf.f_cache_data[s].data.length;o++){this.load(this.conf.f_cache_data[s].data[o])}if(this.conf.f_dyn){this.conf.f_dyn_end=this.conf.f_cache_data[s].dyn_end;this.conf.f_mask=this.conf.f_cache_data[s].mask}if(w!==true){this._showList(true);this._checkForMatch()}}else{this.conf.f_server_tm=window.setTimeout(function(){g.conf.f_server_last=s.toLowerCase();g.conf.f_mask=s;var q="mask="+encodeURIComponent(s);if(g.conf.f_dyn){q+="&pos=0";g.conf.f_dyn_end=false}var a=function(B){if(g.conf.f_cache){if(!g.conf.f_cache_data[s]){g.conf.f_cache_data[s]={data:[],dyn_end:false,mask:s}}g.conf.f_cache_data[s].data.push(B.xmlDoc.responseXML)}g.clearAll();g.load(B.xmlDoc.responseXML);var A=(g.base.offsetWidth>0&&g.base.offsetHeight>0);if(A==true&&g.conf.enabled==true&&g.conf.combo_focus==true&&w!==true){if(g.conf.f_ac&&g.conf.f_mode=="start"&&g.conf.clear_bsp==false&&g.list.firstChild!=null){var t=g.list.firstChild._optId;var C=String(g.t[t].obj.getText(g.list.firstChild,true));if(s==g.base.firstChild.value&&String(C).toLowerCase().indexOf(String(s).toLowerCase())===0){g.base.firstChild.value=C;g.conf.f_ac_text=C.substr(s.length);g._selectRange(s.length,C.length)}}g._showList(true);g._checkForMatch()}a=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(g.conf.f_url,q,a)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(g.conf.f_url+(String(g.conf.f_url).indexOf("?")>=0?"&":"?")+q,a)}}},200)}}else{this.conf.f_server_last=s.toLowerCase();var n=(s.length==0?true:new RegExp((this.conf.f_mode=="start"?"^":"")+this._fixRE(s),"i"));var u=null;for(var x in this.t){var z=false;if(n!==true){if(this.conf.f_func!=null){var v=this._getOption(this.t[x].item._optId,o);z=(this.conf.f_func.apply(window,[s,v])==true)}else{var y=this.t[x].obj.getText(this.t[x].item,true);z=(n.test(y)==true)}}if(n===true||z==true){this.t[x].item.style.display="";if(u==null&&s.length>0){u=String(this.t[x].obj.getText(this.t[x].item,true))}}else{this.t[x].item.style.display="none"}}if(this.conf.f_ac&&this.conf.f_mode=="start"&&this.conf.clear_bsp==false&&u!=null){this.conf.f_ac_text=u.replace(new RegExp("^"+s,"i"),"");this.base.firstChild.value=u;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}if(this.conf.f_mode=="between"&&this.conf.clear_bsp==true){this._checkForMatch(true)}if(w!==true){this._showList(true);this._checkForMatch()}}};this._searchRO=function(n){if(this.conf.ro_tm){window.clearTimeout(this.conf.ro_tm)}this.conf.ro_text+=n;this._showList();for(var o=0;o<this.list.childNodes.length;o++){var a=this.list.childNodes[o]._optId;var r=String(this.t[a].obj.getText(this.list.childNodes[o],true)).toLowerCase();if(r.indexOf(this.conf.ro_text)===0){this._setSelected(a,true,true);this._confirmSelect("script",false);break}}this.conf.ro_tm=window.setTimeout(function(){g.conf.ro_text=""},this.conf.ro_tm_time)};this._fixRE=function(a){return String(a).replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/gi,"\\$&")};this._initObj=function(a){if(typeof(a.template)!="undefined"){this.setTemplate(a.template)}if(a.add!=true&&this.conf.f_loading!=true){this.clearAll(false)}this.addOption(a.options)};this._xmlToObj=function(J,s,r){var x={add:false,options:[]};var D=(s==true?J:J.getElementsByTagName("complete"));if(D.length>0){if(window.dhx4.s2b(D[0].getAttribute("add"))==true){x.add=true}var C=D[0].childNodes;for(var A=0;A<C.length;A++){if(typeof(C[A].tagName)!="undefined"){if(String(C[A].tagName).toLowerCase()=="template"){var I={};for(var v=0;v<C[A].childNodes.length;v++){var B=C[A].childNodes[v];if(B.tagName!=null){var E=B.tagName;if(typeof(this.conf.template[E])!="undefined"){I[E]=window.dhx4._xmlNodeValue(B)}if(E=="columns"){for(var G=0;G<B.childNodes.length;G++){var u=B.childNodes[G];if(u.tagName!=null&&u.tagName=="column"){var z={};for(var H in {width:1,css:1,header:1,option:1}){if(u.getAttribute(H)!=null){z[H]=u.getAttribute(H)}}for(var H in {header:1,option:1}){var F=u.getElementsByTagName(H);if(F[0]!=null&&F[0].firstChild!=null){z[H]=window.dhx4._xmlNodeValue(F[0])}}if(I.columns==null){I.columns=[]}I.columns.push(z)}u=null}}}B=null}this.setTemplate(I)}if(String(C[A].tagName).toLowerCase()=="option"){var y=false;if(s==true){y=(x.options.length==r)}else{y=window.dhx4.s2b(C[A].getAttribute("selected"))}var o={value:C[A].getAttribute("value"),text:window.dhx4._xmlNodeValue(C[A]),selected:y,checked:window.dhx4.s2b(C[A].getAttribute("checked"))};for(var H in {img:1,img_dis:1,img_src:1,img_src_dis:1,css:1}){if(C[A].getAttribute(H)!=null){o[H]=C[A].getAttribute(H)}}for(var v=0;v<C[A].childNodes.length;v++){if(C[A].childNodes[v].tagName!=null&&String(C[A].childNodes[v].tagName).toLowerCase()=="text"){o.text={};var B=C[A].childNodes[v];for(var G=0;G<B.childNodes.length;G++){if(B.childNodes[G].tagName!=null){o.text[B.childNodes[G].tagName]=window.dhx4._xmlNodeValue(B.childNodes[G])}}}}x.options.push(o)}}}D=C=null}return x};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:true});window.dhx4._eventable(this);this._getNearItem=function(o,n){var a=null;while(o!=null){o=o[n<0?"previousSibling":"nextSibling"];if(a==null&&o!=null&&o.style.display==""&&o._optId!=null){a=o;o=null}}return a};this.setName(this.conf.form_name);this._doOnListMouseMove=function(n){n=n||event;var a=n.target||n.srcElement;while(a!=null&&a!=this){if(typeof(a._optId)!="undefined"){if(g.conf.tm_hover){window.clearTimeout(g.conf.tm_hover)}g._setSelected(a._optId,false,false,true)}a=a.parentNode}a=null};this._doOnListMouseDown=function(a){a=a||event;a.cancelBubble=true;g.conf.clear_click=true;window.setTimeout(function(){g.base.firstChild.focus()},1)};this._doOnListMouseUp=function(o){o=o||event;if(o.button!=g.conf.btn_left){return}var a=o.target||o.srcElement;while(a!=null&&a!=this){if(typeof(a._optId)!="undefined"){var n=true;if(typeof(g.t[a._optId].obj.optionClick)=="function"&&g.t[a._optId].obj.optionClick(a,o,g)!==true){n=false}if(n){g._setSelected(a._optId,null,true);g._confirmSelect("click")}}a=a.parentNode}a=null};this._doOnListMouseOut=function(a){if(g.conf.tm_hover){window.clearTimeout(g.conf.tm_hover)}g.conf.tm_hover=window.setTimeout(function(){var n=g.conf.last_match||g.conf.last_selected;if(g.conf.last_match==null&&g.t[n]!=null){if(g.base.firstChild.value!=g.t[n].obj.getText(g.t[n].item,true)){n=null}}g._setSelected(n,null,true,true)},1)};this._doOnBaseMouseDown=function(r){if(!g.conf.enabled){return}g.conf.clear_click=true;r=r||event;if(r.button!=g.conf.btn_left){return}var n=r.target||r.srcElement;if(n!=this.firstChild){window.setTimeout(function(){g.base.firstChild.focus()},1);var q=n;while(q!=this&&q!=null){if(q==this.lastChild){if(typeof(g.modes[g.conf.opts_type].topImageClick)=="function"){var o=(g.conf.last_hover||g.conf.last_selected);var a=(o!=null?g.t[o].item:null);if(g.modes[g.conf.opts_type].topImageClick(a,g)!==true){o=a=null;return}}q=null}else{q=q.parentNode}}}if(g._isListVisible()){g._hideList()}else{if(n!=this.firstChild){g.conf.clear_blur=true}g._showList();g._setSelected(g.conf.last_selected,true,true)}n=null};this._doOnBodyMouseDown=function(){if(g.conf.clear_click){g.conf.clear_click=false;return}g._confirmSelect("blur")};this._doOnInputFocus=function(){g.conf.clear_blur=false;if(g.conf.tm_confirm_blur){window.clearTimeout(g.conf.tm_confirm_blur)}if(g.conf.combo_focus==false){g.conf.combo_focus=true;if(g.conf.skin=="material"&&g.base.className.match(/dhxcombo_actv/)==null){g.base.className+=" dhxcombo_actv"}g.callEvent("onFocus",[])}};this._doOnInputBlur=function(){if(g.conf.clear_blur==true){g.conf.clear_blur=false;return}if(g.conf.tm_confirm_blur){window.clearTimeout(g.conf.tm_confirm_blur)}g.conf.tm_confirm_blur=window.setTimeout(function(){if(g.conf.clear_click==false){g._confirmSelect("blur");g.conf.combo_focus=false;if(g.conf.skin=="material"&&g.base.className.match(/dhxcombo_actv/)!=null){g.base.className=g.base.className.replace(/\s*dhxcombo_actv/gi,"")}g.callEvent("onBlur",[])}},20)};this._doOnInputKeyUp=function(a){a=a||event;if(g.conf.f_mode!=false){g.conf.clear_bsp=(a.keyCode==8||a.keyCode==46);g._filterOpts();return}else{g._checkForMatch()}};this._doOnInputKeyDown=function(a){a=a||event;if((a.keyCode==38||a.keyCode==40)&&!a.ctrlKey&&!a.shiftKey&&!a.altKey){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;g._keyOnUpDown(a.keyCode==38?-1:1)}if(a.keyCode==113){if(!g._isListVisible()){g._showList();if(g.base.firstChild.value==g.conf.last_text){g._setSelected(g.conf.last_selected,true,true);g.base.firstChild.value=g.conf.last_text;g.conf.f_server_last=g.base.firstChild.value.toLowerCase()}else{g.conf.f_server_last=g.base.firstChild.value.toLowerCase();if(g.conf.f_mode==false){g._checkForMatch()}}}else{}}if(a.keyCode==27){if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}a.cancelBubble=true;g._cancelSelect()}if(a.keyCode==13){if(a.preventDefault){a.preventDefault()}g._confirmSelect("kbd")}if(g.conf.ro_mode==true&&((a.keyCode>=48&&a.keyCode<=57)||(a.keyCode>=65&&a.keyCode<=90))){g._searchRO(String.fromCharCode(a.keyCode).toLowerCase());a.cancelBubble=true}g.conf.clear_key=true;g.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._doOnInputKeyPress=function(a){if(g.conf.clear_key){g.conf.clear_key=false;return}a=a||event;g.callEvent("onKeyPressed",[a.keyCode||a.charCode])};this._keyOnUpDown=function(a){var n=null;if(this.conf.last_hover){n=this.t[this.conf.last_hover].item}else{if(this.conf.last_selected){n=this.t[this.conf.last_selected].item}}if(!n&&this._getListVisibleCount()==0){return}if(n!=null&&n.style.display!=""){n=null}this._showList();if(n!=null){if(this.t[n._optId].obj.isSelected(n)){n=this._getNearItem(n,a)}}else{n=this.list.firstChild;if(n.style.display!=""){n=this._getNearItem(n,1)}}if(n==null){return}this._setSelected(n._optId,true,true);if(this.conf.f_mode==false){this.base.firstChild.value=this.t[n._optId].obj.getText(n,true)}else{var o=String(this.t[n._optId].obj.getText(n,true));if(this.conf.f_mode=="start"&&this.conf.f_ac==true){if(o.toLowerCase().indexOf(this.conf.f_server_last)===0){this.conf.f_ac_text=o.substring(this.conf.f_server_last.length,o.length);this.base.firstChild.value=o;this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)}else{this.base.firstChild.value=o;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this._selectRange(0,this.base.firstChild.value.length)}}else{this.base.firstChild.value=o;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}}n=null};this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var b=0;b<this.conf.evs_nodes.length;b++){for(var j in this.conf.evs_nodes[b].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[b].node.addEventListener(j,this[this.conf.evs_nodes[b].evs[j]],false)}else{this.conf.evs_nodes[b].node.attachEvent("on"+j,this[this.conf.evs_nodes[b].evs[j]])}}}this.unload=function(){this.clearAll();this.t=null;for(var o=0;o<this.conf.evs_nodes.length;o++){for(var n in this.conf.evs_nodes[o].evs){if(typeof(window.addEventListener)=="function"){this.conf.evs_nodes[o].node.removeEventListener(n,this[this.conf.evs_nodes[o].evs[n]],false)}else{this.conf.evs_nodes[o].node.detachEvent("on"+n,this[this.conf.evs_nodes[o].evs[n]])}this.conf.evs_nodes[o].evs[n]=null;delete this.conf.evs_nodes[o].evs[n]}this.conf.evs_nodes[o].node=null;this.conf.evs_nodes[o].evs=null;delete this.conf.evs_nodes[o].node;delete this.conf.evs_nodes[o].evs;this.conf.evs_nodes[o]=null}window.dhx4._eventable(this,"clear");window.dhx4._enableDataLoading(this,null,null,null,"clear");this._mcDetachHeader();this.DOMelem_input=this.DOMelem_button=this.DOMlist=this.DOMelem=this.DOMParent=null;for(var n in this.conf){this.conf[n]=null;delete this.conf[n]}this.conf=null;if(typeof(window.addEventListener)=="function"){this.list.removeEventListener("scroll",this._doOnListScroll,false)}else{this.list.detachEvent("onscroll",this._doOnListScroll)}this.base.parentNode.removeChild(this.base);this.list.parentNode.removeChild(this.list);this.base=this.list=this.cont=null;this.modes=null;for(var n in this){if(typeof(this[n])=="function"){this[n]=null}}g=null};this.DOMelem_input=this.base.firstChild;this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)];this.DOMlist=this.list;this.DOMelem=this.base;this.DOMParent=f;f=null;if(d!=null){if(d.filter!=null){if(typeof(d.filter)=="string"){this.enableFilteringMode(true,d.filter,window.dhx4.s2b(d.filter_cache),window.dhx4.s2b(d.filter_sub_load))}else{this.enableFilteringMode(true)}}if(d.image_path!=null){this.setImagePath(d.image_path)}if(d.default_image!=null||d.default_image_dis!=null){this.setDefaultImage(d.default_image,d.default_image_dis)}if(d.items||d.options){this.addOption(d.items||d.options)}if(d.xml||d.json){this.load(d.xml||d.json)}if(typeof(d.readonly)!="undefined"){this.readonly(d.readonly)}d=null}return this}function dhtmlXComboFromSelect(c){if(typeof(c)=="string"){c=document.getElementById(c)}var b=c.offsetWidth;var l=c.getAttribute("name")||null;var d=document.createElement("SPAN");c.parentNode.insertBefore(d,c);var f=c.getAttribute("mode")||c.getAttribute("opt_type")||"option";var e=new dhtmlXCombo(d,l,b,f);d=null;var h=c.getAttribute("imagePath");if(h){e.setImagePath(h)}var j=c.getAttribute("defaultImage");var g=c.getAttribute("defaultImageDis");if(window.dhx4.s2b(g)==true){g=true}if(j!=null||g!=null){e.setDefaultImage(j,g)}var a=e._xmlToObj([c],true,c.selectedIndex);if(a.options.length>0){e.addOption(a.options)}a=null;c.parentNode.removeChild(c);c=null;return e}dhtmlXCombo.prototype.setName=function(a){this.conf.form_name=a;this.base.childNodes[1].name=a;this.base.childNodes[2].name=a.replace(/(\[.*)?$/,"_new_value$1")};dhtmlXCombo.prototype.readonly=function(a){if(window.dhx4.s2b(a)){this.base.firstChild.setAttribute("readOnly","true");this.conf.ro_mode=true}else{this.base.firstChild.removeAttribute("readOnly");this.conf.ro_mode=false}};dhtmlXCombo.prototype.setPlaceholder=function(a){if(typeof(a)=="undefined"||a==null){a=""}this.base.firstChild.setAttribute("placeholder",String(a))};dhtmlXCombo.prototype.setTemplate=function(c){for(var b in c){if(typeof(this.conf.template[b])!="undefined"){if(b=="header"){this.conf.template[b]=window.dhx4.s2b(c[b])}else{this.conf.template[b]=String(c[b])}}}if(c.columns!=null){this._mcMakeTemplate(c.columns)}else{this._mcDetachHeader()}for(var b in this.t){this.t[b].obj.setText(this.t[b].item,this.t[b].item._conf.text)}this._confirmSelect()};dhtmlXCombo.prototype.setSkin=function(a){if(a==this.conf.skin){return}this.conf.skin=a;this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled");this.list.className="dhxcombolist_"+this.conf.skin+(this.hdr!=null?" dhxcombolist_multicolumn":"");if(this.hdr!=null){this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr"}this.conf.i_ofs=(a=="material"?26:23);this._adjustBase()};dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild};dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]};dhtmlXCombo.prototype.getList=function(){return this.list};dhtmlXCombo.prototype.getBase=function(){return this.base};dhtmlXCombo.prototype.getParent=function(){return this.DOMParent};dhtmlXCombo.prototype.forEachOption=function(a){for(var b=0;b<this.list.childNodes.length;b++){a.apply(window,[this._getOption(this.list.childNodes[b]._optId,b)])}};dhtmlXCombo.prototype.setFocus=function(){if(this.conf.enabled){this.base.firstChild.focus()}};dhtmlXCombo.prototype.setFontSize=function(a,b){if(a!=null){this.base.firstChild.style.fontSize=a}if(b!=null){this.list.style.fontSize=b}};dhtmlXCombo.prototype.getOption=function(e){var f=null;var c=null;for(var d=0;d<this.list.childNodes.length;d++){if(f==null){var b=this.list.childNodes[d]._optId;if(this.t[b].obj.getValue(this.t[b].item)==e){f=b;c=d}}}return(f==null?null:this._getOption(f,c))};dhtmlXCombo.prototype.getOptionByIndex=function(a){if(a<0){return null}if(this.list.childNodes[a]==null){return null}return this._getOption(this.list.childNodes[a]._optId,a)};dhtmlXCombo.prototype.getOptionByLabel=function(e){var f=null;var c=null;for(var d=0;d<this.list.childNodes.length;d++){if(f==null){var b=this.list.childNodes[d]._optId;if(this.t[b].obj.getText(this.t[b].item,true)==e){f=b;c=d}}}return(f==null?null:this._getOption(f,c))};dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)};dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")};dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.temp_selected||this.conf.last_selected,"value",null)};dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value};dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value};dhtmlXCombo.prototype.getIndexByValue=function(b){var a=this.getOption(b);return(a!=null?a.index:-1)};dhtmlXCombo.prototype.setComboText=function(a){if(this.conf.allow_free_text!=true){return}this.unSelectOption();this.conf.last_text=this.base.firstChild.value=a;this.conf.f_server_last=this.base.firstChild.value.toLowerCase()};dhtmlXCombo.prototype.setComboValue=function(b){var a=this.getOption(b);if(a!=null){this.selectOption(a.index)}else{this.conf.last_value=b;this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="true"}};dhtmlXCombo.prototype.selectOption=function(b,c,a){if(b<0||b>=this.list.childNodes.length){return}var d=this.list.childNodes[b]._optId;this._setSelected(d,this._isListVisible(),true);this._confirmSelect("script")};dhtmlXCombo.prototype.unSelectOption=function(){if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null}this.base.firstChild.value="";if(this.conf.f_mode!=false){this._filterOpts(true)}this._hideList();this._updateTopImage(null);this._confirmSelect("script")};dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")};dhtmlXCombo.prototype.enable=function(a){a=(typeof(a)=="undefined"?true:window.dhx4.s2b(a));if(this.conf.enabled==a){return}this.conf.enabled=a;if(a){this.base.className="dhxcombo_"+this.conf.skin;this.base.firstChild.removeAttribute("disabled")}else{this._hideList();this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled";this.base.firstChild.setAttribute("disabled","true")}this._updateTopImage(this.conf.last_selected)};dhtmlXCombo.prototype.disable=function(a){a=(typeof(a)=="undefined"?true:window.dhx4.s2b(a));this.enable(!a)};dhtmlXCombo.prototype.isEnabled=function(){return(this.conf.enabled==true)};dhtmlXCombo.prototype.show=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.base.style.display=(a==true?"":"none")};dhtmlXCombo.prototype.hide=function(a){if(typeof(a)=="undefined"){a=true}this.show(!a)};dhtmlXCombo.prototype.isVisible=function(){return(this.base.style.display=="")};dhtmlXCombo.prototype.setFilterHandler=function(a){if(typeof(a)=="function"){this.conf.f_func=a;this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{if(typeof(a)=="string"&&typeof(window[a])=="function"){this.conf.f_func=window[a];this.conf.f_mode=true;this.conf.f_dyn=this.conf.f_cache=this.conf.f_url=null}else{this.conf.f_func=null}}};dhtmlXCombo.prototype.enableFilteringMode=function(d,b,a,c){if(d==true||d=="between"){this.conf.f_mode=(d==true?"start":"between");if(b!=null){this.conf.f_url=b;this.conf.f_cache=window.dhx4.s2b(a);this.conf.f_dyn=window.dhx4.s2b(c)}else{this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}}else{this.conf.f_mode=false;this.conf.f_url=null;this.conf.f_cache=false;this.conf.f_dyn=false}};dhtmlXCombo.prototype.filter=function(c,a){for(var d=0;d<this.list.childNodes.length;d++){var b=c.apply(window,[this._getOption(this.list.childNodes[d]._optId,d)]);this.list.childNodes[d].style.display=(b===true?"":"none")}if(typeof(a)=="undefined"||a==true){this._showList(true)}};dhtmlXCombo.prototype.sort=function(c){var a=[];for(var b=0;b<this.list.childNodes.length;b++){var d=this.list.childNodes[b]._optId;a.push([d,this._getOption(d,b)])}if(c=="asc"||c=="desc"){k=true;a.sort(function(f,e){f=f[1].text_option.toLowerCase();e=e[1].text_option.toLowerCase();var g=(c=="asc"?1:-1);return(f>e?g:-1*g)})}else{if(typeof(c)=="function"||typeof(window[c])=="function"){if(typeof(window[c])=="function"){c=window[c]}a.sort(function(f,e){return c.apply(window,[f[1],e[1]])})}}while(this.list.childNodes.length>0){this.list.removeChild(this.list.lastChild)}for(var b=0;b<a.length;b++){this.list.appendChild(this.t[a[b][0]].item)}};dhtmlXCombo.prototype.enableAutocomplete=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.conf.f_ac=a};dhtmlXCombo.prototype.disableAutocomplete=function(a){if(typeof(a)=="undefined"){a=true}else{a=window.dhx4.s2b(a)}this.enableAutocomplete(!a)};dhtmlXCombo.prototype.allowFreeText=function(b,a){this.conf.allow_free_text=(typeof(b)=="undefined"?true:window.dhx4.s2b(b));this.conf.free_text_empty=(typeof(a)=="undefined"?false:window.dhx4.s2b(a))};dhtmlXCombo.prototype._checkForMatch=function(d){var a=window.dhx4.trim(this.base.firstChild.value).toLowerCase();var e=null;var b=this.list.firstChild;while(b!=null){if(b.style.display==""&&b._optId!=null){var c=window.dhx4.trim(this.t[b._optId].obj.getText(b,true)).toLowerCase();if(a==c){e=b._optId;b=null}}if(b!=null){b=b.nextSibling}}if(this.conf.last_match==null){if(e!=null){this._setSelected(e,true,true);this.conf.last_match=e}else{if(this.conf.f_mode!="between"||d==true){this._setSelected(null,true,true);this.conf.last_match=null}}}else{if(e!=null){if(e!=this.conf.last_match){this._setSelected(e,true,true);this.conf.last_match=e}}else{this._setSelected(null,true,true);this.conf.last_match=null}}};dhtmlXCombo.prototype._selectRange=function(b,a){if(this.conf.combo_focus==true){window.dhx4.selectTextRange(this.base.firstChild,b,a)}};dhtmlXCombo.prototype.openSelect=function(){if(!this._isListVisible()){this._showList()}};dhtmlXCombo.prototype.closeAll=function(){this._hideList()};dhtmlXCombo.prototype._showList=function(a){if(this._getListVisibleCount()==0){if(a&&this._isListVisible()){this._hideList()}return}if(this._isListVisible()){this._checkListHeight();return}this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id);if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.zIndex=Number(this.list.style.zIndex)+1}this.list.style.visibility="hidden";this.list.style.display="";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.visibility=this.list.style.visibility;this.hdr.style.display=this.list.style.display}var b=(this.hdr!=null&&this.conf.template.header==true?this.hdr.offsetHeight:0);this.list.style.width=Math.max(this.conf.opts_width||this.conf.col_w||0,this.conf.combo_width)+"px";this.list.style.top=window.dhx4.absTop(this.base)+b+this.base.offsetHeight-1+"px";this.list.style.left=window.dhx4.absLeft(this.base)+"px";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.width=this.list.style.width;this.hdr.style.left=this.list.style.left;this.hdr.style.top=parseInt(this.list.style.top)-b+"px"}this._checkListHeight();this.list.style.visibility="visible";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.visibility="visible"}this.callEvent("onOpen",[])};dhtmlXCombo.prototype._hideList=function(){if(!this._isListVisible()){return}window.dhx4.zim.clear(this.conf.list_zi_id);this.list.style.display="none";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.display="none"}this.conf.clear_click=false;this.callEvent("onClose",[])};dhtmlXCombo.prototype._isListVisible=function(){return(this.list.style.display=="")};dhtmlXCombo.prototype._getListVisibleCount=function(){var a=0;for(var b=0;b<this.list.childNodes.length;b++){a+=(this.list.childNodes[b].style.display==""?1:0)}return a};dhtmlXCombo.prototype._checkListHeight=function(){if(!this._isListVisible()){return}if(this.conf.item_h==null){var l=this.list.firstChild;while(l!=null){if(l.style.display==""){this.conf.item_h=l.offsetHeight+(this.hdr!=null?-1:0);l=null}else{l=l.nextSibling}}l=null}var m=window.dhx4.screenDim();var f=window.dhx4.absTop(this.base);var b=this.base.offsetHeight;var a=(this.hdr!=null&&this.conf.template.header==true?this.hdr.offsetHeight:0);var c=Math.max(0,Math.floor((f+a-m.top)/this.conf.item_h));var j=Math.max(0,Math.floor((m.bottom-(f+b+a))/this.conf.item_h));var n=this._getListVisibleCount();if(j<Math.min(this.conf.opts_count_min,n)&&c>j){j=null}var g=Math.min((j==null?c:j),this.conf.opts_count,n);var d=(g<n?(g*this.conf.item_h)+"px":"");var e=this.conf.sp[this.conf.skin][this.hdr!=null&&this.conf.template.header==true?"hdr_ofs":"list_ofs"];this.list.style.height=d;this.list.style.top=(j==null?f-this.list.offsetHeight+e:f+b+a-e)+"px";if(this.hdr!=null&&this.conf.template.header==true){this.hdr.style.top=(j==null?f-a-this.list.offsetHeight+e:f+b-e)+"px"}};dhtmlXCombo.prototype._scrollToItem=function(e){var d=this.t[e].item.offsetTop;var c=d+this.t[e].item.offsetHeight;var b=this.list.scrollTop;var a=b+this.list.clientHeight;if(d<b){this.list.scrollTop=d+(this.hdr!=null&&this.conf.template.header==true?1:0)}else{if(c>a){this.list.scrollTop=c-this.list.clientHeight+(this.hdr!=null&&this.conf.template.header==true?-this.conf.sp[this.conf.skin].scr_ofs:0)}}};dhtmlXCombo.prototype._setSelected=function(d,c,b,a){this.conf.temp_selected=null;if(b){this._updateTopImage(d)}if(d!=null&&this.conf.last_hover==d){if(c){this._scrollToItem(d)}return}if(this.conf.last_hover!=null){this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,false);this.conf.last_hover=null;if(d==null){this.callEvent("onSelectionChange",[])}}if(d!=null){this.t[d].obj.setSelected(this.t[d].item,true);this.conf.last_hover=d;if(a!=true){this.conf.temp_selected=d;this.callEvent("onSelectionChange",[])}if(this.conf.s_mode=="select"&&this.t[d].item==this.t[d].item.parentNode.lastChild){this._subloadRequest()}if(c){this._scrollToItem(d)}}};dhtmlXCombo.prototype._subloadRequest=function(){if(this.conf.f_url!=null&&this.conf.f_dyn==true&&this.conf.f_dyn_end==false){var c="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length;var a=this;var b=function(e){if(a.conf.f_cache){a.conf.f_cache_data[a.conf.f_mask].data.push(e.xmlDoc.responseXML)}var d=a.list.childNodes.length;a.conf.f_loading=true;a.load(e.xmlDoc.responseXML);a.conf.f_loading=false;if(d==a.list.childNodes.length){a.conf.f_dyn_end=true;if(a.conf.f_cache){a.conf.f_cache_data[a.conf.f_mask].dyn_end=true}}b=a=null};if(window.dhx4.ajax.method=="post"){window.dhx4.ajax.post(this.conf.f_url,c,b)}else{if(window.dhx4.ajax.method=="get"){window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+c,b)}}}};dhtmlXCombo.prototype.addOption=function(f,g,b,a,d){var c=null;if(!(f instanceof Array)){var h=this._renderOption({value:f,text:g,css:b,img:a});if(c==null&&window.dhx4.s2b(d)==true){c=h}}else{for(var e=0;e<f.length;e++){if(typeof(f[e])=="undefined"){continue}if(f[e] instanceof Array){h=this._renderOption({value:f[e][0],text:f[e][1],css:f[e][2],img:f[e][3]});if(c==null&&window.dhx4.s2b(f[e][4])==true){c=h}}else{var h=this._renderOption(f[e]);if(c==null&&window.dhx4.s2b(f[e].selected)==true){c=h}}}}if(c!=null){this._setSelected(c,this._isListVisible(),true);this._confirmSelect("onInit")}};dhtmlXCombo.prototype.updateOption=function(a,c,b,d){var e=this._getOptionId(a);if(e==null){return}this.t[e].obj.update(this.t[e].item,{value:c,text:b,css:d});if(this.conf.last_selected==e){this.conf.last_text=this.base.firstChild.value=this.t[e].obj.getText(this.t[e].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase()}};dhtmlXCombo.prototype.deleteOption=function(d){for(var b in this.t){var c=this.t[b].obj.getValue(this.t[b].item);if(c==d){this._removeOption(b)}}if(this._isListVisible()){this._showList(true)}};dhtmlXCombo.prototype.clearAll=function(b){b=(typeof(b)=="undefined"?true:window.dhx4.s2b(b));for(var c in this.t){this._removeOption(c)}if(this.conf.tm_hover){window.clearTimeout(this.conf.tm_hover)}this.conf.last_hover=null;this.conf.last_selected=null;this.list.scrollTop=0;if(b==true){this._hideList()}};dhtmlXCombo.prototype._renderOption=function(d){var e=window.dhx4.newId();var c=document.createElement("DIV");c._optId=e;c._tpl=this.conf.template;if(typeof(d.img)=="undefined"&&typeof(d.img_src)!="undefined"){d.img=d.img_src;delete d.img_src}if(typeof(d.img_dis)=="undefined"&&typeof(d.img_src_dis)!="undefined"){d.img_dis=d.img_src_dis;delete d.img_src_dis}d.img_path=this.conf.img_path;d.img_def=this.conf.img_def;d.img_def_dis=this.conf.img_def_dis;this.list.appendChild(c);var b=(this._isListVisible()&&window.dhx4.isFF==true);if(b==true){var a=this.list.scrollTop;this.list.scrollTop-=1}if(this.hdr!=null){d.multicol=true}this.t[c._optId]={obj:this.modes[this.conf.opts_type].render(c,d),item:c,conf:{type:this.conf.opts_type}};c=null;if(b==true){this.list.scrollTop+=1}return e};dhtmlXCombo.prototype._removeOption=function(a){this.t[a].obj.destruct(this.t[a].item);this.t[a].obj=null;this.t[a].item.parentNode.removeChild(this.t[a].item);this.t[a].item=null;this.t[a].conf=null;this.t[a]=null;delete this.t[a];if(this.conf.last_hover==a){this.conf.last_hover=null}if(this.conf.last_selected==a){this.conf.last_selected=null;this._confirmSelect("onDelete")}};dhtmlXCombo.prototype._confirmSelect=function(c,a){var b=false;if(typeof(a)=="undefined"){a=true}if(this.conf.f_server_tm){window.clearTimeout(this.conf.f_server_tm)}if(this.conf.last_hover!=null){b=b||(this.conf.last_value!=this._getOptionValue(this.conf.last_hover));this.conf.last_match=this.conf.last_selected=this.conf.last_hover;this.conf.last_value=this._getOptionValue(this.conf.last_selected);this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,true);this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_value;this.base.childNodes[2].value="false"}else{if(this.conf.allow_free_text||(this.base.firstChild.value==""&&this.conf.allow_empty_value)){b=b||(this.conf.last_text!=this.base.firstChild.value);this.conf.last_match=this.conf.last_value=this.conf.last_selected=null;this.conf.last_text=this.base.firstChild.value;this.conf.f_server_last=this.base.firstChild.value.toLowerCase();this.base.childNodes[1].value=this.conf.last_text;this.base.childNodes[2].value="true"}else{this._cancelSelect(true);this._updateTopImage(this.conf.last_selected);return}}if(this.conf.f_ac&&this.conf.f_mode=="start"){this.conf.f_ac_text="";if(c!="blur"){this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)}}if(a){this._hideList()}if(b==true&&c!="onInit"&&c!="onDelete"){this.callEvent("onSelectionChange",[]);this.callEvent("onChange",[this.conf.last_value,this.conf.last_text])}};dhtmlXCombo.prototype._cancelSelect=function(a){this._hideList();if(a==true&&this.conf.allow_free_text==false&&this.conf.free_text_empty==true){this.conf.f_server_last=this.conf.last_match=this.conf.last_value=this.conf.last_selected=null;this.base.childNodes[1].value=this.conf.last_text=this.base.firstChild.value="";this.base.childNodes[2].value="false"}else{this.base.firstChild.value=this.conf.last_text}if(this.conf.f_mode!=false){this._filterOpts(true)}};dhtmlXCombo.prototype._getOption=function(g,d){if(!this.t[g]){return null}if(typeof(d)=="undefined"){d=-1}if(d<0){for(var f=0;f<this.list.childNodes.length;f++){if(d<0&&this.list.childNodes[f]._optId==g){d=f}}}var e={value:this.t[g].obj.getValue(this.t[g].item),text:this.t[g].obj.getText(this.t[g].item),text_input:this.t[g].obj.getText(this.t[g].item,true),text_option:this.t[g].obj.getText(this.t[g].item,null,true),css:this.t[g].obj.getCss(this.t[g].item),selected:(g==this.conf.last_selected),index:d};if(typeof(this.t[g].obj.getExtraData)=="function"){var c=this.t[g].obj.getExtraData(this.t[g].item);for(var b in c){if(typeof(e[b])=="undefined"){e[b]=c[b]}}}return e};dhtmlXCombo.prototype._getOptionProp=function(d,c,b){if(d!=null){var a=this._getOption(d);if(a!=null){return a[c]}}return b};dhtmlXCombo.prototype._getOptionId=function(b){var d=null;for(var a=0;a<this.list.childNodes.length;a++){if(d==null){var c=this.list.childNodes[a]._optId;if(b==this.t[c].obj.getValue(this.t[c].item)){d=c}}}return d};dhtmlXCombo.prototype._getOptionValue=function(a){return this._getOptionProp(a,"value",null)};dhtmlXCombo.prototype.setSize=function(a){this.conf.combo_width=parseInt(a)-(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?2:0);this.base.style.width=Math.max(0,this.conf.combo_width)+"px";this._adjustBase()};dhtmlXCombo.prototype._adjustBase=function(){this.base.firstChild.style.width=Math.max(0,(this.conf.combo_width-(this.conf.i_ofs+1)-(this.conf.combo_image?this.conf.i_ofs:0)))+"px";this.base.firstChild.style.marginLeft=(this.conf.combo_image?this.conf.i_ofs+"px":"0px")};dhtmlXCombo.prototype.setOptionWidth=function(a){this.conf.opts_width=(parseInt(a)||null)};dhtmlXCombo.prototype.setOptionIndex=function(c,a){if(isNaN(a)||a<0){return}var d=this.getOption(c);if(d==null){return}if(a==d.index){return}var b=this.list.childNodes[d.index];b.parentNode.removeChild(b);if(this.list.childNodes[a]!=null){this.list.insertBefore(b,this.list.childNodes[a])}else{this.list.appendChild(b)}b=null};dhtmlXCombo.prototype.getOptionsCount=function(){return this.list.childNodes.length};dhtmlXCombo.prototype._mcMakeTemplate=function(j){var e="";var d="";this.conf.col_w=0;for(var f=0;f<j.length;f++){var a=Number(parseInt(j[f].width)||50);var c=(j[f].css||"");var g=(f==0&&window.dhx4.isIE6==true?"_first":"");d+="<div class='dhxcombo_cell"+g+" "+c+"' style='width:"+a+"px;'><div class='dhxcombo_cell_text'>"+(j[f].option||"&nbsp;")+"</div></div>";e+="<div class='dhxcombo_hdrcell"+g+" "+c+"' style='width:"+a+"px;'><div class='dhxcombo_hdrcell_text'>"+(j[f].header||"&nbsp;")+"</div></div>";this.conf.col_w+=a+1}var a=500;var b=document.createElement("DIV");b.style.position="absolute";b.style.top="10px";b.style.left=-a*2+"px";b.style.width=a+"px";b.style.height="50px";b.style.overflowY="scroll";b.innerHTML="<div>&nbsp;</div>";document.body.appendChild(b);this.conf.col_w+=a-b.firstChild.offsetWidth+10;b.parentNode.removeChild(b);b=null;this.conf.template.option=d;this._mcAttachHeader(e);this.list.className+=" dhxcombolist_multicolumn"};dhtmlXCombo.prototype._mcAttachHeader=function(a){if(this.hdr==null){this.hdr=document.createElement("DIV");this.hdr.className="dhxcombolist_"+this.conf.skin+" dhxcombolist_hdr";this.hdr.style.display="none";this.list.parentNode.insertBefore(this.hdr,this.list);if(typeof(window.addEventListener)=="function"){this.hdr.addEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.attachEvent("onmousedown",this._doOnListMouseDown)}if(this.conf.opts_type=="checkbox"&&this.conf.combo_image==true){this.conf.combo_image=false;if(this.base.lastChild.className.match(/dhxcombo_top_image/)!=null){this.base.removeChild(this.base.lastChild)}this._adjustBase()}}this.hdr.innerHTML="<div class='dhxcombo_hdrtext'>"+a+"</div>"};dhtmlXCombo.prototype._mcDetachHeader=function(){if(this.hdr!=null){if(typeof(window.addEventListener)=="function"){this.hdr.removeEventListener("mousedown",this._doOnListMouseDown,false)}else{this.hdr.detachEvent("onmousedown",this._doOnListMouseDown)}this.hdr.parentNode.removeChild(this.hdr);this.hdr=null}this.conf.col_w=null;this.conf.item_h=null};dhtmlXCombo.prototype.modes={};dhtmlXCombo.prototype.doWithItem=function(a,g,e,c){var f=(a>=0&&a<this.list.childNodes.length?this.list.childNodes[a]._optId:null);if(f==null){return null}if(typeof(this.t[f].obj[g])!="function"){return null}var d=[this.t[f].item];for(var b=2;b<arguments.length;b++){d.push(arguments[b])}return this.t[f].obj[g].apply(this.t[f].obj,d)};function dhtmlXComboExtend(d,c){for(var b in dhtmlXCombo.prototype.modes[c]){if(typeof(dhtmlXCombo.prototype.modes[d][b])=="undefined"){dhtmlXCombo.prototype.modes[d][b]=dhtmlXCombo.prototype.modes[c][b]}}}dhtmlXCombo.prototype.modes.option={image:false,html:false,option_css:"dhxcombo_option_text",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>";if(b.css!=null){a.lastChild.style.cssText=b.css;a._conf.css=b.css}this.setText(a,b.text);return this},destruct:function(a){a._conf=null},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text)},setText:function(b,c){b._conf.text=c;var a=(typeof(c)=="object"?window.dhx4.template(b._tpl.option,this.replaceHtml(b._conf.text),true):window.dhx4.trim(this.replaceHtml(b._conf.text)||""));b.lastChild.innerHTML=(a.length==0?"&nbsp;":a)},getText:function(c,a,b){if(window.dhx4.s2b(a)&&typeof(c._conf.text)=="object"){return window.dhx4.template(c._tpl.input,c._conf.text,true)}if(window.dhx4.s2b(b)&&typeof(c._conf.text)=="object"){return window.dhx4.template(c._tpl.option,c._conf.text,true)}return c._conf.text},getValue:function(a){return a._conf.value},getCss:function(a){return a._conf.css},setSelected:function(a,b){a.className="dhxcombo_option"+(b?" dhxcombo_option_selected":"")},isSelected:function(a){return String(a.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(a){return{type:"option"}},replaceHtml:function(d){if(this.html==true){return d}if(typeof(d)=="object"){var c={};for(var b in d){c[b]=this.replaceHtml(d[b])}}else{var c=(d||"").replace(/[\<\>\&\s]/g,function(a){switch(a){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case" ":return"&nbsp;"}return a})}return c}};dhtmlXCombo.prototype.modes.checkbox={image:true,html:false,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(a,b){if(this.image_css_regexp==null){this.image_css_regexp=new RegExp(this.image_css.replace("#state#","\\d*"))}a._conf={value:b.value,css:"",checked:window.dhx4.s2b(b.checked)};a.className="dhxcombo_option";if(b.multicol==true){b.text.checkbox="<div class='"+String(this.image_css).replace("#state#",(a._conf.checked?"1":"0"))+"'></div>&nbsp;";a.innerHTML="<div class='"+dhtmlXCombo.prototype.modes.option.option_css+"'></div>"}else{a.innerHTML="<div class='"+String(this.image_css).replace("#state#",(a._conf.checked?"1":"0"))+"'></div><div class='"+this.option_css+"'>&nbsp;</div>"}if(b.css!=null){a.lastChild.style.cssText+=b.css;a._conf.css=b.css}this.setText(a,b.text);return this},setChecked:function(b,c){b._conf.checked=window.dhx4.s2b(c);var a=String(this.image_css).replace("#state#",(b._conf.checked?"1":"0"));this._changeChbxCss(b.childNodes,a)},_changeChbxCss:function(a,b){for(var c=0;c<a.length;c++){if(a[c].tagName!=null&&a[c].className!=null&&a[c].className.match(this.image_css_regexp)!=null){a[c].className=b}else{if(a[c].childNodes.length>0){this._changeChbxCss(a[c].childNodes,b)}}}},isChecked:function(a){return(a._conf.checked==true)},getExtraData:function(a){return{type:"checkbox",checked:a._conf.checked}},optionClick:function(e,d,f){var c=true;var b=(d.target||d.srcElement);while(c==true&&b!=null&&b!=e&&b.className!=null){if(b.className.match(this.image_css_regexp)!=null){var a=[e._conf.value,!e._conf.checked];if(f.callEvent("onBeforeCheck",a)===true){this.setChecked(e,!this.isChecked(e));f.callEvent("onCheck",a)}c=false;a=null}else{b=b.parentNode}}b=f=e=null;return c},getTopImage:function(b,a){return""},topImageClick:function(a,b){return true}};dhtmlXComboExtend("checkbox","option");dhtmlXCombo.prototype.setChecked=function(a,b){this.doWithItem(a,"setChecked",b)};dhtmlXCombo.prototype.getChecked=function(a){var b=[];for(var c=0;c<this.list.childNodes.length;c++){if(this.isChecked(c)){b.push(this._getOptionProp(this.list.childNodes[c]._optId,"value",""))}}return b};dhtmlXCombo.prototype.isChecked=function(a){return this.doWithItem(a,"isChecked")};dhtmlXCombo.prototype.modes.image={image:true,html:false,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(a,b){a._conf={value:b.value,css:""};a.className="dhxcombo_option";a.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>";if(b.css!=null){a.lastChild.style.cssText+=b.css;a._conf.css=b.css}this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis);return this},update:function(a,b){a._conf.value=b.value;a._conf.css=b.css;a.lastChild.style.cssText=b.css;this.setText(a,b.text);this.setImage(a,b.img,b.img_dis,b.img_path,b.img_def,b.img_def_dis)},setImage:function(c,a,e,f,d,b){if(a!=null&&a.length>0){a=f+a}else{if(d!=null&&d.length>0){a=f+d}else{a=null}}if(e!=null&&e.length>0){e=f+e}else{if(b!=null&&b.length>0){e=f+b}else{if(b==true){e=a}else{e=null}}}c._conf.img=a;c._conf.img_dis=e;c.firstChild.style.backgroundImage=(a!=null?"url("+a+")":"none")},getExtraData:function(a){return{type:"image"}},getTopImage:function(d,c){var b=(c?"img":"img_dis");if(d!=null&&d._conf[b]!=null){return"<div class='"+this.image_css+"' style='background-image:url("+d._conf[b]+");'></div>"}return""}};dhtmlXComboExtend("image","option");dhtmlXCombo.prototype.setDefaultImage=function(a,b){if(a!=null){this.conf.img_def=a}if(b!=null){this.conf.img_def_dis=b}};dhtmlXCombo.prototype.setImagePath=function(a){this.conf.img_path=a};function dhtmlXColorPicker(g){if(!(this instanceof window.dhtmlXColorPicker)){return new dhtmlXColorPicker(g)}dhx4._eventable(this);var e=this,d=undefined,f=null,c,a,b;this._nodes=[];this.activeNode=null;this._inputListenerId=null;this.base=null;this._globalNode=null;this.memory=null;this.skin=null;this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:false,selectedColor:null,hide:false,hideOnSelect:false,lang:"en",closeable:true};this.value={red:-1,blue:-1,green:-1,hue:-1,sat:-1,lum:-1};this._initMoveSelection=function(h){h=h||event;if(typeof(window.addEventListener)=="function"){e._controllerNodes.colorArea.addEventListener("mousemove",e._setMoveSelection,false);document.body.addEventListener("mouseup",e._cleanMoveSelection,false)}else{e._controllerNodes.colorArea.attachEvent("onmousemove",e._setMoveSelection);document.body.attachEvent("onmouseup",e._cleanMoveSelection)}e._setMoveSelection(h,e._controllerNodes.colorArea);return false};this._cleanMoveSelection=function(){if(typeof(window.removeEventListener)=="function"){e._controllerNodes.colorArea.removeEventListener("mousemove",e._setMoveSelection,false);document.body.removeEventListener("mouseup",e._cleanMoveSelection,false)}else{e._controllerNodes.colorArea.detachEvent("onmousemove",e._setMoveSelection);document.body.detachEvent("onmouseup",e._cleanMoveSelection)}return false};this._setMoveSelection=function(h){h=h||event;var j=e._getOffsetPosition(h,e._controllerNodes.colorArea);if(e._controllerNodes.fr_cover){setTimeout(function(){e._setColorAreaXY(j.x,j.y);e._setColorByXYC()},0)}else{e._setColorAreaXY(j.x,j.y);e._setColorByXYC()}return false};this._initMoveContrast=function(h){h=h||event;if(typeof(window.addEventListener)=="function"){document.body.addEventListener("mousemove",e._setMoveContrast,false);document.body.addEventListener("mouseup",e._cleanMoveContrast,false)}else{document.body.attachEvent("onmousemove",e._setMoveContrast);document.body.attachEvent("onmouseup",e._cleanMoveContrast)}e._setMoveContrast(h,e._controllerNodes.contrastArea)};this._cleanMoveContrast=function(){if(typeof(window.removeEventListener)=="function"){document.body.removeEventListener("mousemove",e._setMoveContrast,false);document.body.removeEventListener("mouseup",e._cleanMoveContrast,false)}else{document.body.detachEvent("onmousemove",e._setMoveContrast);document.body.detachEvent("onmouseup",e._cleanMoveContrast)}};this._setMoveContrast=function(h){h=h||event;var j=e._getOffsetPosition(h,e._controllerNodes.contrastArea);e._setContrastY(j.y);e._setColorByXYC(true)};this._doOnSelectColor=function(){var h=e.colorAIP.rgb2hex({r:e.value.red,g:e.value.green,b:e.value.blue});if(e.activeNode!=null){if(e.activeNode.valueCont){e.activeNode.valueCont.value=h}if(e.activeNode.valueColor){e.activeNode.valueColor.style.backgroundColor=h}}if(e.base._dhx_remove||e.conf.hideOnSelect){e.hide()}e.callEvent("onSelect",[h,((e.activeNode)?e.activeNode.node:null)])};this._doOnCancel=function(){if(e.callEvent("onCancel",[((e.activeNode)?e.activeNode.node:null)])==true&&e.conf.closeable==true){e.hide()}};this._doOnFocusByInput=function(){var j=(this!=window)?this:event.srcElement;var h=(e.activeNode&&e.activeNode.valueCont&&e.activeNode.valueCont==j)?e.activeNode:e._getNodeByValueCont(j);e.activeNode=h;if(h&&h==e.activeNode){e._initListenerInput()}};this._doOnBlurByInput=function(){var j=(this!=window)?this:event.srcElement;var h=(e.activeNode&&e.activeNode.valueCont&&e.activeNode.valueCont==j)?e.activeNode:e._getNodeByValueCont(j);if(h&&h==e.activeNode){e._removeListenerInput()}};this._doOnClickByNode=function(j){j=j||event;var h=(this!=window)?this:event.srcElement;e.activeNode=(e.activeNode.node!=h)?e._getNodeByElement(h):e.activeNode;if(!e.isVisible()){e.show()}};this.saveColor=function(){e.memory.setValue(e.value)};this._onSelectMemoryEl=function(j){var h;e._refreshCoordinatesByHSL(j.value.hue,j.value.sat,j.value.lum);for(h in j.value){e.value[h]=j.value[h]}e._refreshContrast();e._refreshInputValues();e._refreshColorValue()};this._doOnClickByBody=function(l){l=l||event;var h=true,j=l.target||l.srcElement;if(e._isBaseNode(j)){h=false}if(h&&e.activeNode&&(e.activeNode.node==j||e.activeNode.valueCont==j)){h=false}if(h){e.hide()}};this._doOnChangeHSL=function(){var l=parseInt(e._controllerNodes.hue.value),j=parseInt(e._controllerNodes.sat.value),h=parseInt(e._controllerNodes.lum.value),m;if(isNaN(l)||l>359||l<0){e._controllerNodes.hue.value=e.value.hue}else{e.value.hue=l}if(isNaN(j)||j>100||j<0){e._controllerNodes.sat.value=e.value.sat}else{e.value.sat=j}if(isNaN(h)||h>100||h<0){e._controllerNodes.lum.value=e.value.lum}else{e.value.lum=h}m=e.colorAIP.hsl2rgb(e.value.hue,e.value.sat/100,e.value.lum/100);e.value.red=Math.round(255*m.r);e.value.green=Math.round(255*m.g);e.value.blue=Math.round(255*m.b);e._refreshCoordinatesByHSL(e.value.hue,e.value.sat,e.value.lum);e._refreshContrast();e._refreshInputValues();e._refreshColorValue()};this._doOnChangeRGB=function(){var m=parseInt(e._controllerNodes.red.value),l=parseInt(e._controllerNodes.green.value),h=parseInt(e._controllerNodes.blue.value),j;if(isNaN(m)||m>255||m<0){e._controllerNodes.red.value=e.value.red}else{e.value.red=m}if(isNaN(l)||l>255||l<0){e._controllerNodes.green.value=e.value.green}else{e.value.green=l}if(isNaN(h)||h>255||h<0){e._controllerNodes.blue.value=e.value.blue}else{e.value.blue=h}j=e.colorAIP.rgb2hsl(e.value.red/255,e.value.green/255,e.value.blue/255);e.value.hue=Math.round(j.h);e.value.sat=Math.round(j.s*100);e.value.lum=Math.round(j.l*100);e._refreshCoordinatesByHSL(e.value.hue,e.value.sat,e.value.lum);e._refreshContrast();e._refreshInputValues();e._refreshColorValue()};this._doOnChangeHSV=function(){e._controllerNodes.hsv.value=e.setColor(e._controllerNodes.hsv.value)};this._checkType=function(j){var h;if(j instanceof Array){h=e._checkType(j[0]);switch(h){case"string":return"array_string";break;case"input":case"textarea":return"array_input";break;case"object":return"array_object";break;default:return undefined}}else{if(j==undefined){return null}else{if(typeof(j)=="string"){return"string"}else{if(j.tagName&&j.tagName.toLowerCase()=="input"){return"input"}else{if(j.tagName&&j.tagName.toLowerCase()=="textarea"){return"textarea"}else{if(j.tagName){return"container"}else{if(typeof(j)=="object"){return"object"}else{return undefined}}}}}}}};this._initByObject=function(h){if(h.parent&&h.parent.tagName){e.base=h.parent}else{if(typeof(h.parent)=="string"){e.base=document.getElementById(h.parent)}else{e.base=document.createElement("div");e.base._dhx_remove=true}}if(h.color){e.conf.selectedColor=h.color}if(typeof(h.closeable)!="undefined"){this.conf.closeable=dhx4.s2b(h.closeable)}if(h.custom_colors){this._tempInitCC=function(){var n,m;this.initMemoryColors();this.conf.customColors=true;if(h.custom_colors instanceof Array){m=h.custom_colors.length;for(n=0;n<m;n++){this.setCustomColors(h.custom_colors[n])}}if(this.base.parentNode){this.showMemory()}delete this._tempInitCC}}if(h.hide){e.conf.hide=true}if(h.input){e._addNode(h.input,h.target_color,h.target_value)}var j=h.skin||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"material";e.setSkin(j);if(h.colors){e.initMemoryColors();e.conf.customColors=true}if(h.link){e._addNode(h.link)}};this.unload=function(){var m,h,j;if(this.isVisible()){this.hide()}this.destructMemory();h=this._nodes.length;for(m=0;m<h;m++){this._detachEventsFromNode(this._nodes[m]);for(j in this._nodes[m]){this._nodes[m][j]=null}delete this._nodes[m]}this._nodes=null;if(!this.base._dhx_remove){this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,"")}else{delete this.base._dhx_remove}if(typeof(window.addEventListener)=="function"){this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,false);this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,false);this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,false);this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,false);this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,false);this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,false)}else{this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection);this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor);this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast);this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor);this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel);this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV)}if(this._controllerNodes.fr_cover){if(this._controllerNodes.fr_cover.parentNode){this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover)}delete this._controllerNodes.fr_cover}dhx4.zim.clear(this.conf.cp_id);dhx4._eventable(this,"clear");for(j in this){this[j]=null}e=null,f=null,b=null};d=this._checkType(g);switch(d){case"object":e._initByObject(g);break;case"input":case"textarea":e._initByObject({});this._addNode(g);break;case"string":f=document.getElementById(g);return new dhtmlXColorPicker(f);break;case"container":e._initByObject({parent:g});break;case null:e._initByObject({});break;case"array_string":case"array_input":e._initByObject({});a=g.length;for(c=0;c<a;c++){this._addNode(g[c])}break;case"array_object":e._initByObject({});a=g.length;for(c=0;c<a;c++){b=this._addNode(g[c].input,g[c].target_color,g[c].target_value).conf;b.customColors=(g[c].custom_colors!=undefined)?dhx4.s2b(g[c].custom_colors):b.customColors;b.selectedColor=(g[c].color!=undefined)?g[c].color:b.selectedColor}break}this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'></div><div class='dhxcp_h_line'></div></div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'></div></div></div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'></div><input type='text' class='dhxcp_value'/></div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelHue+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelLum+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr></table></div><div class='dhxcp_g_memory_area'></div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"</button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+"</button></div></div>";"</div>";this._globalNode=this.base.firstChild;this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]};if(typeof(this._tempInitCC)=="function"){this._tempInitCC()}if(typeof(window.addEventListener)=="function"){this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,false);this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,false);this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,false);this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,false);this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,false);this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,false);this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,false);this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,false)}else{this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection);this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor);this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast);this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor);this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel);this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL);this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB);this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV)}this.setColor(this.conf.selectedColor||"#ffffff");if(this._nodes.length){for(var c=0;c<this._nodes.length;c++){this._attachEventsToNode(this._nodes[c])}}if(this.conf.hide){this.hide()}if(typeof(this._cpInitFRM)=="function"){this._cpInitFRM()}}dhtmlXColorPicker.prototype.linkTo=function(b,c,d){if(arguments.length==1){c=d=b}var a;b=b||null;d=d||null;if(typeof(c)=="string"){c=document.getElementById(c)}a=this._addNode(c,b,d);if(a){this._attachEventsToNode(a)}return a};dhtmlXColorPicker.prototype._isBaseNode=function(a){if(a==this.base){return true}if(a.parentElement==document.body){return false}else{if(!a.parentElement){return false}else{return this._isBaseNode(a.parentElement)}}};dhtmlXColorPicker.prototype._hasInput=function(c){var b,a,d=false;a=this._nodes.length;for(b=0;b<a;b++){if(this._nodes[b].valueCont==c){d=true;break}}return d};dhtmlXColorPicker.prototype._findNodesByArray=function(e){var c,a,b,d=[];a=e.length;for(c=0;c<a;c++){if(typeof(e[c])=="string"){b=document.getElementById(e[c])}else{b=e[c]}if(b){this._addNode(b)}}};dhtmlXColorPicker.prototype._addNode=function(e,g,f){var b,d,c,a;if(typeof(e)=="string"){b=document.getElementById(e)}else{b=e}if(typeof(g)=="string"){g=document.getElementById(g)}if(typeof(f)=="string"){f=document.getElementById(f)}if(!b){return null}if(dhx4.s2b(b.getAttribute("colorbox"))){d=document.createElement("div");d.style.width=b.offsetWidth+"px";d.style.height=b.offsetHeight+"px";b.style.width=b.offsetWidth-(b.offsetHeight+8)+"px";b.parentNode.insertBefore(d,b);d.style.position="relative";c=document.createElement("div");d.appendChild(b);d.appendChild(c);c.className="dhxcp_colorBox";b.className+=" dhxcp_colorInput";c.style.width=c.style.height=b.offsetHeight+"px"}a={node:b,valueColor:(g!=undefined)?g:c||b,valueCont:(f!=undefined)?f:b,conf:{customColors:(b.getAttribute("customcolors")!=null)?dhx4.s2b(b.getAttribute("customcolors")):null,selectedColor:b.getAttribute("selectedcolor")}};this._nodes.push(a);if(!this.activeNode){this.activeNode=a}return a};dhtmlXColorPicker.prototype.getNode=function(c){var a=null,b=null;if(typeof(c)=="string"){a=document.getElementById(c)}else{a=c}if(a.tagName!=undefined){b=this._getNodeByElement(a)}return b};dhtmlXColorPicker.prototype._getNodeByElement=function(c){var d=null,b,a;a=this._nodes.length;for(b=0;b<a;b++){if(this._nodes[b].node==c){d=this._nodes[b]}}return d};dhtmlXColorPicker.prototype._getNodeByValueCont=function(c){var d=null,b,a;a=this._nodes.length;for(b=0;b<a;b++){if(this._nodes[b].valueCont&&this._nodes[b].valueCont==c){d=this._nodes[b]}}return d};dhtmlXColorPicker.prototype.initMemoryColors=function(){var b=this;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"</div></button></div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a></div>";this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]);this.memory.onSelect=this._onSelectMemoryEl;this.memory.onSave=function(d){var c=b.colorAIP.rgb2hex({r:d.red,g:d.green,b:d.blue});b.callEvent("onSaveColor",[c])};var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild;if(typeof(window.addEventListener)=="function"){a.addEventListener("click",this.saveColor,false)}else{a.attachEvent("onclick",this.saveColor)}};dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(f,e,b){var a,d,c;a=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*f/359)+this.configColorArea.minX;d=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-b)/100)+this.configColorArea.minY;c=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-e)/100)+this.configColorArea.minY;this._setColorAreaXY(a,d);this._setContrastY(c)};dhtmlXColorPicker.prototype._parseColor=function(c){if(c instanceof Array){var b={r:parseInt(c[0]),g:parseInt(c[1]),b:parseInt(c[2])}}else{if(typeof(c)=="string"){c=c.replace(/\s/g,"");if(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(c)){var a=c.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);var b={r:parseInt(a[1]),g:parseInt(a[2]),b:parseInt(a[3])}}else{var b=this.colorAIP.hex2rgb(c)}}}return b};dhtmlXColorPicker.prototype.setColor=function(f){var b=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});var c=this._parseColor(f);var e=(c instanceof Object);e=e&&(0<=c.r&&c.r<=255);e=e&&(0<=c.g&&c.g<=255);e=e&&(0<=c.b&&c.b<=255);if(!e){return b}var d=this.colorAIP.rgb2hex({r:c.r,g:c.g,b:c.b});if(d==b){return b}this.value.red=c.r;this.value.green=c.g;this.value.blue=c.b;var a=this.colorAIP.rgb2hsl(c.r/255,c.g/255,c.b/255);this.value.hue=Math.round(a.h);this.value.sat=Math.round(a.s*100);this.value.lum=Math.round(a.l*100);this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum);this._refreshContrast();this._refreshInputValues();this._refreshColorValue();return d};dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]};dhtmlXColorPicker.prototype._attachEventsToNode=function(a){if(typeof(window.addEventListener)=="function"){a.node.addEventListener("click",this._doOnClickByNode,false)}else{a.node.attachEvent("onclick",this._doOnClickByNode)}if(a.valueCont&&a.valueCont.tagName.toLowerCase()=="input"){if(typeof(window.addEventListener)=="function"){a.valueCont.addEventListener("focus",this._doOnFocusByInput,false);a.valueCont.addEventListener("blur",this._doOnBlurByInput,false)}else{a.valueCont.attachEvent("onfocus",this._doOnFocusByInput);a.valueCont.attachEvent("onblur",this._doOnBlurByInput)}}};dhtmlXColorPicker.prototype._detachEventsFromNode=function(a){if(typeof(window.addEventListener)=="function"){a.node.removeEventListener("click",this._doOnClickByNode,false)}else{a.node.detachEvent("onclick",this._doOnClickByNode)}if(a.valueCont&&a.valueCont.tagName.toLowerCase()=="input"){if(typeof(window.addEventListener)=="function"){a.valueCont.removeEventListener("focus",this._doOnFocusByInput,false);a.valueCont.removeEventListener("blur",this._doOnBlurByInput,false)}else{a.valueCont.detachEvent("onfocus",this._doOnFocusByInput);a.valueCont.detachEvent("onblur",this._doOnBlurByInput)}}};dhtmlXColorPicker.prototype.show=function(b){var a=false;if(b!=undefined){this.activeNode=this.getNode(b)||this.activeNode}if(this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value){this.setColor(this.activeNode.valueCont.value)}if(this.activeNode){a=(this.activeNode.conf.customColors!=null?this.activeNode.conf.customColors:this.conf.customColors);this.setColor(this.activeNode.conf.selectedColor)}else{a=this.conf.customColors}if(a){this.showMemory()}else{this.hideMemory()}if(this.base._dhx_remove){this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id);this.base.style.visibility="hidden";if(document.body.firstChild){document.body.insertBefore(this.base,document.body.firstChild)}else{document.body.appendChild(this.base)}this._refreshPosition();this.base.style.visibility="visible";if(typeof(window.addEventListener)=="function"){document.body.addEventListener("mousedown",this._doOnClickByBody,false)}else{document.body.attachEvent("onmousedown",this._doOnClickByBody)}}else{this.base.appendChild(this._globalNode)}if(this._controllerNodes.fr_cover){this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode)}this.callEvent("onShow",[((this.activeNode)?this.activeNode.node:null)])};dhtmlXColorPicker.prototype.setPosition=function(b,e){var d=null;var a=parseInt(b);var c=parseInt(e);if(isNaN(a)){d=({right:"right",bottom:"bottom"}[b.toLowerCase()]?b:null)}if(this.base._dhx_remove){if(d==null){}else{this.conf.position=d;this._refreshPosition(d)}}else{if(isNaN(a)||isNaN(c)){}else{this._globalNode.style.left=a+"px";this._globalNode.style.top=c+"px";if(this._controllerNodes.fr_cover){this._controllerNodes.fr_cover.style.left=this._globalNode.style.left;this._controllerNodes.fr_cover.style.top=this._globalNode.style.top}}}};dhtmlXColorPicker.prototype._initListenerInput=function(){var a=this;this._inputListenerId=this._inputListenerId||setInterval(function(){a._refreshValueByInput()},70)};dhtmlXColorPicker.prototype._removeListenerInput=function(){if(this._inputListenerId){clearInterval(this._inputListenerId);this._inputListenerId=null}};dhtmlXColorPicker.prototype._refreshValueByInput=function(){var b=this.activeNode.valueCont.value,a=this.getSelectedColor()[0];if(this._inputListenerId){if(/^#[\da-f]{6}$/i.test(b)&&b!=a){this.setColor(b);this.callEvent("onSelect",[b,this.activeNode.node])}}};dhtmlXColorPicker.prototype._refreshPosition=function(b){if(this.activeNode==null){return}var h=dhx4.absTop(this.activeNode.node);var a=dhx4.absLeft(this.activeNode.node);var d=dhx4.screenDim();var c=this._globalNode.offsetWidth;var e=this._globalNode.offsetHeight;var g=0;b=b||this.conf.position;switch(b){case"bottom":var g=h+this.activeNode.node.offsetHeight+this.conf.indent;var f=a;if(f+c>d.left+d.right){f=a+this.activeNode.node.offsetWidth-c}if(f<d.left){f=a}if(g+e>d.top+d.bottom){g=h-e-this.conf.indent}if(g-d.top<0){g=d.top+this.conf.indent}this._globalNode.style.top=g+"px";this._globalNode.style.left=f+"px";break;default:var f=a+this.activeNode.node.offsetWidth+this.conf.indent;g=h;if(b=="right"){if(f+c>d.left+d.right){f=a-c-this.conf.indent}if(f<d.left){f=a+this.activeNode.node.offsetWidth+this.conf.indent}}if(d.bottom-(g+e)<=0){g=h+this.activeNode.node.offsetHeight-e}if(g-d.top<0){g=d.top+this.conf.indent}this._globalNode.style.left=f+"px";this._globalNode.style.top=g+"px"}if(this._controllerNodes.fr_cover){this._controllerNodes.fr_cover.style.left=this._globalNode.style.left;this._controllerNodes.fr_cover.style.top=this._globalNode.style.top}};dhtmlXColorPicker.prototype.isVisible=function(){var a=false;if(this.base._dhx_remove){a=this.base.parentNode==document.body}else{a=this._globalNode.parentNode==this.base}return a};dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove){if(this.base.parentNode){this.base.parentNode.removeChild(this.base);dhx4.zim.clear(this.conf.cp_id);if(typeof(window.addEventListener)=="function"){document.body.removeEventListener("mousedown",this._doOnClickByBody,false)}else{document.body.detachEvent("onmousedown",this._doOnClickByBody)}}}else{if(this.isVisible()==false){return}this.base.removeChild(this._globalNode)}if(this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode){this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover)}if(this.callEvent!=undefined){this.callEvent("onHide",[((this.activeNode)?this.activeNode.node:null)])}};dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119};dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:true,dhx_web:true,dhx_terrace:true,material:true};dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}};dhtmlXColorPicker.prototype.loadUserLanguage=function(a){if(typeof(this._mergeLangModules)=="function"){this._mergeLangModules()}this.conf.lang=a;this._refreshLanguage()};dhtmlXColorPicker.prototype._refreshLanguage=function(){var a,b=this.i18n[this.conf.lang];for(a in b){if(this._labelNodes[a]){this._labelNodes[a].innerHTML=b[a]}}};dhtmlXColorPicker.prototype._setColorAreaXY=function(a,c){var b=this.configColorArea;a=parseInt(a);if(b.minX>a){this.conf.x=b.minX}else{if(a>b.maxX){this.conf.x=b.maxX}else{if(!isNaN(a)){this.conf.x=a}}}c=parseInt(c);if(b.minY>c){this.conf.y=b.minY}else{if(c>b.maxY){this.conf.y=b.maxY}else{if(!isNaN(c)){this.conf.y=c}}}this._refreshLines()};dhtmlXColorPicker.prototype._setColorByXYC=function(b){b=b||false;this.value.hue=Math.round((359*(this.conf.x-this.configColorArea.minX))/(this.configColorArea.maxX-this.configColorArea.minX));this.value.lum=Math.round(100-(100*(this.conf.y-this.configColorArea.minY))/(this.configColorArea.maxY-this.configColorArea.minY));this.value.sat=Math.round(100-(100*(this.conf.c-this.configColorArea.minY))/(this.configColorArea.maxY-this.configColorArea.minY));var a=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*a.r);this.value.green=Math.round(255*a.g);this.value.blue=Math.round(255*a.b);if(!b){this._refreshContrast()}this._refreshInputValues();this._refreshColorValue()};dhtmlXColorPicker.prototype._setContrastY=function(b){var a=this.configColorArea;b=parseInt(b);if(!isNaN(b)){this.conf.c=Math.min(Math.max(a.minY,b),a.maxY)}this._refreshContrastLine()};dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue;this._controllerNodes.sat.value=this.value.sat;this._controllerNodes.lum.value=this.value.lum;this._controllerNodes.red.value=this.value.red;this._controllerNodes.green.value=this.value.green;this._controllerNodes.blue.value=this.value.blue};dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var a=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=a;this.callEvent("onChange",[a])};dhtmlXColorPicker.prototype._refreshContrast=function(){var d=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100);var e=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100);var c=this._checkIeVersion();if(c&&c<=9){var g=this._controllerNodes.contrastArea.firstChild;if(g==this._controllerNodes.contrast_line){g=document.createElement("div");g.className+="dhxcp_ie_gradient";this._controllerNodes.contrastArea.appendChild(g);this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line)}var b=this.colorAIP.rgb2hex({r:Math.round(255*d.r),g:Math.round(255*d.g),b:Math.round(255*d.b)});var a=this.colorAIP.rgb2hex({r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b)});g.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+a+"', endColorstr='"+b+"', GradientType=0)"}else{d=[Math.round(255*d.r),Math.round(255*d.g),Math.round(255*d.b)];e=[Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b)];var f="linear-gradient(rgb("+e.join(",")+"), rgb("+d.join(",")+"))";if(window.dhx4.isKHTML==true&&navigator.userAgent.match(/Windows/gi)!=null){f="-webkit-"+f}this._controllerNodes.contrastArea.style.backgroundImage=f}};dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px";this._controllerNodes.h_line.style.top=this.conf.y+"px"};dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"};dhtmlXColorPicker.prototype._getOffsetPosition=function(d,a){var b={x:NaN,y:NaN},c=d.target||d.srcElement;if(c==a){b.x=(d.offsetX!=undefined)?d.offsetX:d.layerX;b.y=(d.offsetY!=undefined)?d.offsetY:d.layerY}else{if(c==this._controllerNodes.v_line){b.y=(d.offsetY!=undefined)?d.offsetY:d.layerY}else{b.x=(d.offsetX!=undefined)?d.offsetX:d.layerX}}return b};dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(b){var a=b.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);if(a!=null){return{r:parseInt("0x"+a[2]),g:parseInt("0x"+a[3]),b:parseInt("0x"+a[4])}}else{return null}},rgb2hex:function(e){var d=parseInt(e.r),c=parseInt(e.g),a=parseInt(e.b);d=d||0,c=c||0,a=a||0;return"#"+((d)?((d<16)?"0"+d.toString(16):d.toString(16)):"00")+((c)?((c<16)?"0"+c.toString(16):c.toString(16)):"00")+((a)?((a<16)?"0"+a.toString(16):a.toString(16)):"00")},rgb2hsl:function(l,j,d){var h,f,c;var a=Math.max(l,j,d),e=Math.min(l,j,d);c=0.5*(a+e);if(a==e){h=0}else{if(a==l){h=60*(j-d)/(a-e);if(j<d){h+=360}}else{if(a==j){h=60*(d-l)/(a-e)+120}else{h=60*(l-j)/(a-e)+240}}}if(c==0||a==e){f=0}else{if(c<=0.5){f=0.5*(a-e)/c}else{f=0.5*(a-e)/(1-c)}}return{h:h,s:f,l:c}},hsl2rgb:function(j,c,g){var e,f,h;var b=[],a=[];if(g<=0.5){e=g*(1+c)}else{e=g+c-(g*c)}f=2*g-e;h=j/360;b.push(h+1/3);b.push(h);b.push(h-1/3);for(var d=0;d<3;d++){if(b[d]<0){b[d]+=1}else{if(b[d]>1){b[d]-=1}}if(b[d]<1/6){a.push(f+(e-f)*6*b[d])}else{if(b[d]<0.5){a.push(e)}else{if(b[d]<2/3){a.push(f+(e-f)*(2/3-b[d])*6)}else{a.push(f)}}}}return{r:a[0],g:a[1],b:a[2]}}};dhtmlXColorPicker.prototype._checkIeVersion=function(){var a;var b=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);a=(b&&b[2])?parseInt(b[2]):null;return a};dhtmlXColorPicker.prototype.setCustomColors=function(){if(this.memory==null){this.initMemoryColors();this.conf.customColors=true}var d,c,f,b,e,a;c=arguments.length;for(d=0;d<c;d++){if(arguments[d] instanceof Array){f=this._rgb2value(arguments[d][0],arguments[d][1],arguments[d][2]);this.memory.setValue(f,null,false);continue}else{if(typeof(arguments[d])=="string"){b=arguments[d].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i);if(b instanceof Array){f=this._rgb2value(b[1],b[2],b[3]);this.memory.setValue(f,null,false);continue}b=arguments[d].match(/(#[\da-f]{6})/ig);if(b instanceof Array){a=b.length;for(e=0;e<a;e++){f=this._hex2value(b[e]);this.memory.setValue(f,null,false)}}}}}};dhtmlXColorPicker.prototype.getCustomColors=function(){var b=[];if(this.memory!=null&&this.conf.customColors==true){for(var c=0;c<this.memory.controllers.length;c++){var a=this.memory.controllers[c].value;b.push(this.colorAIP.rgb2hex({r:a.red,g:a.green,b:a.blue}))}}return b};dhtmlXColorPicker.prototype._rgb2value=function(e,d,a){var c=this.colorAIP.rgb2hsl(e/255,d/255,a/255);return{red:e,green:d,blue:a,hue:Math.round(c.h),sat:Math.round(c.s*100),lum:Math.round(c.l*100)}};dhtmlXColorPicker.prototype._hex2value=function(c){var b,a;b=this.colorAIP.hex2rgb(c);a=this.colorAIP.rgb2hsl(b.r/255,b.g/255,b.b/255);return{red:b.r,green:b.g,blue:b.b,hue:Math.round(a.h),sat:Math.round(a.s*100),lum:Math.round(a.l*100)}};dhtmlXColorPicker.prototype.showMemory=function(){if(this.memory==null){this.initMemoryColors()}if(!this._globalNode.className.match(/dhxcp_add_memory/)){this._globalNode.className+=" dhxcp_add_memory"}this.conf.customColors=true};dhtmlXColorPicker.prototype.hideMemory=function(){if(this.memory!=null){this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,"")}this.conf.customColors=false};dhtmlXColorPicker.prototype.setSkin=function(e){if(this._skinCollection[e]!=true){return}var d="dhtmlxcp_"+(this.skin||"dummy");this.base.className=this.base.className.replace(new RegExp(d),"");this.base.className+=" dhtmlxcp_"+e;this.skin=e;if(this.skin=="material"){var c={labelHue:"H",labelSat:"S",labelLum:"L",labelRed:"R",labelGreen:"G",labelBlue:"B"};for(var b in c){this.i18n.en[b]=c[b]}}if(this.base.className.match(/dhxcp_shadow/)==null&&!(dhx4.isIE6||dhx4.isIE7||dhx4.isIE8)){this.base.className+=" dhxcp_shadow"}};dhtmlXColorPicker.prototype.hideOnSelect=function(a){a=dhx4.s2b(a);this.conf.hideOnSelect=a};dhtmlXColorPicker.prototype._indexOf=function(a,d){var c,b,e=-1;b=a.length;for(c=b;c>=0;c--){if(a[c]==d){e=c;break}}return e};dhtmlXColorPicker.prototype.destructMemory=function(){if(this.memory==null){return}this.hideMemory();var a=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null;if(typeof(window.addEventListener)=="function"){a.removeEventListener("click",this.saveColor,false)}else{a.detachEvent("onclick",this.saveColor)}this.memory.remove();this._controllerNodes.memory_block.innerHTML="";this.memory=null};dhtmlXColorPicker.prototype.Memory=function(c){var b=this,a=null,d={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var f=(this!=window)?this:event.srcElement;var e=e||f.dhxpc_memory;if(a!=null){b.unSelect()}a=e;e.domElement.className+=" dhxcp_memory_el_select";if(typeof(b.onSelect)=="function"){b.onSelect(e)}};this.onSelect=null;this.onSave=null;this._createMemoryController=function(e){var f={domElement:e,value:dhx4._copyObj(d)};e.dhxpc_memory=f;if(typeof(window.addEventListener)=="function"){e.addEventListener("click",b.select,false)}else{e.attachEvent("onclick",b.select)}return f};this._findMemoryControllers=function(j){var g=j.getElementsByTagName("a"),f,e,h=[];e=g.length;for(f=0;f<e;f++){h.push(this._createMemoryController(g[f]))}return h};this.controllers=this._findMemoryControllers(c);this.unSelect=function(){if(a){a.domElement.className=a.domElement.className.replace(/\s.*$/i,"")}a=null};this.setActiveNext=function(){var f=null,e;if(a==null){a=this.controllers[0]}else{f=this.getIndex(a);e=this.controllers.length;this.unSelect();a=(f+1<e)?this.controllers[f+1]:this.controllers[0]}a.domElement.className+=" dhxcp_memory_el_next";return a};this.setValue=function(f,e,g){a=e||a;if(a==null){a=this.controllers[0]}a.value.red=f.red;a.value.blue=f.blue;a.value.green=f.green;a.value.hue=f.hue;a.value.sat=f.sat;a.value.lum=f.lum;a.domElement.style.backgroundColor="rgb("+[f.red,f.green,f.blue].join(", ")+")";this.setActiveNext();if((g!=false)&&(typeof(this.onSave)=="function")){this.onSave(f)}};this.clean=function(){var e=this.controllers.length,g;for(var f=0;f<e;f++){g=this.controllers[f];g.value=dhx4._copyObj(d);g.domElement.style.backgroundColor="rgb("+[d.red,d.green,d.blue].join(", ")+")"}this.unSelect();a=this.controllers[0]};this.getIndex=function(g){var f,e,h=-1;e=this.controllers.length;for(f=0;f<e;f++){if(this.controllers[f]==g){h=f;break}}return h};this.remove=function(){var f,e;e=this.controllers.length;for(f=0;f<e;f++){if(typeof(window.addEventListener)=="function"){this.controllers[f].domElement.removeEventListener("click",this.select,false)}else{this.controllers[f].domElement.detachEvent("onclick",this.select)}delete this.controllers[f].domElement.dhxpc_memory}delete this.onSelect;delete this.controllers;delete this.onSave}};if(window.dhx4.isIE6){dhtmlXColorPicker.prototype._cpInitFRM=function(){var a;if(!this._controllerNodes.fr_cover){a=document.createElement("IFRAME");a.className="dhxcp_frm";a.border=0;a.frameBorder=0;this._controllerNodes.fr_cover=a}if(!this.base._dhx_remove){this.base.insertBefore(a,this._globalNode)}}}dhtmlx.ui.pager=function(a){this.name="Pager";if(dhtmlx.assert_enabled()){this._assert()}dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,"dhx_pager");dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.SingleRender);dhtmlx.extend(this,dhtmlx.MouseEvents);this._parseSettings(a,{size:10,page:-1,group:5,count:0,type:"default"});this.data=this._settings;this.refresh()};dhtmlx.ui.pager.prototype={_id:"dhx_p_id",on_click:{dhx_pager_item:function(a,b){this.select(b)}},select:function(a){switch(a){case"next":a=this._settings.page+1;break;case"prev":a=this._settings.page-1;break;case"first":a=0;break;case"last":a=this._settings.limit-1;break;default:break}if(a<0){a=0}if(a>=this.data.limit){a=this.data.limit-1}if(this.callEvent("onBeforePageChange",[this._settings.page,a])){this.data.page=a*1;this.refresh();this.callEvent("onAfterPageChange",[a])}},types:{"default":{template:dhtmlx.Template.fromHTML("{common.pages()}"),pages:function(c){var b="";if(c.page==-1){return""}c.min=c.page-Math.round((c.group-1)/2);c.max=c.min+c.group-1;if(c.min<0){c.max+=c.min*(-1);c.min=0}if(c.max>=c.limit){c.min-=Math.min(c.min,c.max-c.limit+1);c.max=c.limit-1}for(var a=(c.min||0);a<=c.max;a++){b+=this.button({id:a,index:(a+1),selected:(a==c.page?"_selected":"")})}return b},page:function(a){return a.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}</div>")}},refresh:function(){var a=this._settings;a.limit=Math.ceil(a.count/a.size);if(a.limit&&a.limit!=a.old_limit){a.page=Math.min(a.limit-1,a.page)}var b=a.page;if(b!=-1&&(b!=a.old_page)||(a.limit!=a.old_limit)){this.render();this.callEvent("onRefresh",[]);a.old_limit=a.limit;a.old_page=a.page}},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.DataProcessor={_dp_init:function(b){var a="_methods";b[a]=["setItemStyle","","changeId","remove"];this.attachEvent("onAfterAdd",function(c){b.setUpdated(c,true,"inserted")});this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(d,c){if(d.getUserData){d.getUserData(c,this._userdata)}},this));this.attachEvent("onBeforeDelete",function(d){if(b._silent_mode){return true}var c=b.getState(d);if(c=="inserted"){b.setUpdated(d,false);return true}if(c=="deleted"){return false}if(c=="true_deleted"){return true}b.setUpdated(d,true,"deleted");return false});this.attachEvent("onAfterEditStop",function(c){b.setUpdated(c,true,"updated")});this.attachEvent("onBindUpdate",function(c){window.setTimeout(function(){b.setUpdated(c.id,true,"updated")},1)});a="_getRowData";b[a]=function(g,c){var e=this.obj.data.get(g);var f={};for(var d in e){if(d.indexOf("_")===0){continue}f[d]=e[d]}return f};a="_clearUpdateFlag";b[a]=function(){};this._userdata={};b.attachEvent("insertCallback",this._dp_callback);b.attachEvent("updateCallback",this._dp_callback);b.attachEvent("deleteCallback",function(c,d){this.obj.setUserData(d,this.action_param,"true_deleted");this.obj.remove(d)});dhtmlx.compat("dataProcessor",b)},_dp_callback:function(a,b){this.obj.data.set(b,dhtmlx.DataDriver.xml.getDetails(a.firstChild));this.obj.data.refresh(b)},setItemStyle:function(c,a){var b=this._locateHTML(c);if(b){b.style.cssText+=";"+a}},changeId:function(b,a){this.data.changeId(b,a);this.refresh()},setUserData:function(c,a,b){if(c){this.data.get(c)[a]=b}else{this._userdata[a]=b}},getUserData:function(b,a){return b?this.data.get(b)[a]:this._userdata[a]}};(function(){var a="_dp_init";dhtmlx.DataProcessor[a]=dhtmlx.DataProcessor._dp_init})();dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var h="_dragged";var d=dhtmlDragAndDropObject.prototype.checkLanding;dhtmlDragAndDropObject.prototype.checkLanding=function(l,m,j){d.apply(this,arguments);if(!j){var n=dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};if(!n.from){n.from=this.dragStartObject}dhtmlx.DragControl._checkLand(l,m,true)}};var b=dhtmlDragAndDropObject.prototype.stopDrag;dhtmlDragAndDropObject.prototype.stopDrag=function(m,j,l){if(!l){if(dhtmlx.DragControl._last){dhtmlx.DragControl._active=g.dragStartNode;dhtmlx.DragControl._stopDrag(m,true)}}b.apply(this,arguments)};var g=new dhtmlDragAndDropObject();var e=dhtmlx.DragControl._startDrag;dhtmlx.DragControl._startDrag=function(){e.apply(this,arguments);var n=dhtmlx.DragControl._drag_context;if(!n){return}var m=[];var l=[];for(var j=0;j<n.source.length;j++){m[j]={idd:n.source[j]};l.push(n.source[j])}g.dragStartNode={parentNode:{},parentObject:{idd:m,id:(l.length==1?l[0]:l),treeNod:{object:n.from}}};g.dragStartNode.parentObject.treeNod[h]=m;g.dragStartObject=n.from};var f=dhtmlx.DragControl._checkLand;dhtmlx.DragControl._checkLand=function(l,m,j){f.apply(this,arguments);if(!this._last&&!j){l=g.checkLanding(l,m,true)}};var a=dhtmlx.DragControl._stopDrag;dhtmlx.DragControl._stopDrag=function(l,j){a.apply(this,arguments);if(g.lastLanding&&!j){g.stopDrag(l,false,true)}};var c=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(l){var m=null;if(l){m=c.apply(this,arguments)}if(!m){m=g.dragStartObject;var n=[];var o=m[h];for(var j=0;j<o.length;j++){n.push(o[j].idd||o[j].id)}dhtmlx.DragControl._drag_context.source=n}return m}}};dhtmlx.DataMove={_init:function(){dhtmlx.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(b,e,a,d){var c=this.get(b);if(!c){dhtmlx.log("Warning","Incorrect ID in DataMove::copy");return}if(a){dhtmlx.assert(a.externalData,"DataMove :: External object doesn't support operation");c=a.externalData(c)}a=a||this;return a.add(a.externalData(c,d),e)},move:function(c,g,b,f){if(c instanceof Array){for(var d=0;d<c.length;d++){var a=(b||this).indexById(this.move(c[d],g,b,c[d]));if(c[d+1]){g=a+(this.indexById(c[d+1])<a?0:1)}}return}nid=c;if(g<0){dhtmlx.log("Info","DataMove::move - moving outside of bounds is ignored");return}var e=this.get(c);if(!e){dhtmlx.log("Warning","Incorrect ID in DataMove::move");return}if(!b||b==this){this.data.move(this.indexById(c),g)}else{dhtmlx.assert(b.externalData,"DataMove :: External object doesn't support operation");nid=b.add(b.externalData(e,f),g);this.remove(c)}return nid},moveUp:function(b,a){return this.move(b,this.indexById(b)-(a||1))},moveDown:function(b,a){return this.moveUp(b,(a||1)*-1)},moveTop:function(a){return this.move(a,0)},moveBottom:function(a){return this.move(a,this.data.dataCount()-1)},externalData:function(a,c){var b=dhtmlx.extend({},a);b.id=c||dhtmlx.uid();b.$selected=b.$template=null;return b}};dhtmlx.DragControl={_drag_masters:dhtmlx.toArray(["dummy"]),addDrop:function(b,c,a){b=dhtmlx.toNode(b);b.dhx_drop=this._getCtrl(c);if(a){b.dhx_master=true}},_getCtrl:function(b){b=b||dhtmlx.DragControl;var a=this._drag_masters.find(b);if(a<0){a=this._drag_masters.length;this._drag_masters.push(b)}return a},addDrag:function(a,b){a=dhtmlx.toNode(a);a.dhx_drag=this._getCtrl(b);dhtmlx.event(a,"mousedown",this._preStart,a)},_preStart:function(a){if(dhtmlx.DragControl._active){dhtmlx.DragControl._preStartFalse();dhtmlx.DragControl.destroyDrag()}dhtmlx.DragControl._active=this;dhtmlx.DragControl._start_pos={x:a.pageX,y:a.pageY};dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._startDrag);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._preStartFalse);dhtmlx.DragControl._dhx_drag_sc=dhtmlx.event(this,"scroll",dhtmlx.DragControl._preStartFalse);a.cancelBubble=true;return false},_preStartFalse:function(a){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);dhtmlx.DragControl._dhx_drag_sc=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_sc)},_startDrag:function(a){var b={x:a.pageX,y:a.pageY};if(Math.abs(b.x-dhtmlx.DragControl._start_pos.x)<5&&Math.abs(b.y-dhtmlx.DragControl._start_pos.y)<5){return}dhtmlx.DragControl._preStartFalse();if(!dhtmlx.DragControl.createDrag(a)){return}dhtmlx.DragControl.sendSignal("start");dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._moveDrag);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._stopDrag);dhtmlx.DragControl._moveDrag(a)},_stopDrag:function(a){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm);dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu);if(dhtmlx.DragControl._last){dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,a);dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,a)}dhtmlx.DragControl.destroyDrag();dhtmlx.DragControl.sendSignal("stop")},_moveDrag:function(a){var b=dhtmlx.html.pos(a);dhtmlx.DragControl._html.style.top=b.y+dhtmlx.DragControl.top+"px";dhtmlx.DragControl._html.style.left=b.x+dhtmlx.DragControl.left+"px";if(dhtmlx.DragControl._skip){dhtmlx.DragControl._skip=false}else{dhtmlx.DragControl._checkLand((a.srcElement||a.target),a)}a.cancelBubble=true;return false},_checkLand:function(a,b){while(a&&a.tagName!="BODY"){if(a.dhx_drop){if(this._last&&(this._last!=a||a.dhx_master)){this.onDragOut(this._active,this._last,a,b)}if(!this._last||this._last!=a||a.dhx_master){this._last=null;this._landing=this.onDragIn(dhtmlx.DragControl._active,a,b);if(this._landing){this._last=a}return}return}a=a.parentNode}if(this._last){this._last=this._landing=this.onDragOut(this._active,this._last,null,b)}},sendSignal:function(a){dhtmlx.DragControl.active=(a=="start")},getMaster:function(a){return this._drag_masters[a.dhx_drag||a.dhx_drop]},getContext:function(a){return this._drag_context},createDrag:function(f){var c=dhtmlx.DragControl._active;var d=this._drag_masters[c.dhx_drag];var b;if(d.onDragCreate){b=d.onDragCreate(c,f);b.style.position="absolute";b.style.zIndex=dhtmlx.zIndex.drag;b.onmousemove=dhtmlx.DragControl._skip_mark}else{var g=dhtmlx.DragControl.onDrag(c,f);if(!g){return false}var b=document.createElement("DIV");b.innerHTML=g;b.className="dhx_drag_zone";b.onmousemove=dhtmlx.DragControl._skip_mark;document.body.appendChild(b)}dhtmlx.DragControl._html=b;return true},_skip_mark:function(){dhtmlx.DragControl._skip=true},destroyDrag:function(){var b=dhtmlx.DragControl._active;var c=this._drag_masters[b.dhx_drag];if(c&&c.onDragDestroy){c.onDragDestroy(b,dhtmlx.DragControl._html)}else{dhtmlx.html.remove(dhtmlx.DragControl._html)}dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl._html=null},top:5,left:5,onDragIn:function(c,b,d){var a=this._drag_masters[b.dhx_drop];if(a.onDragIn&&a!=this){return a.onDragIn(c,b,d)}b.className=b.className+" dhx_drop_zone";return b},onDragOut:function(c,b,f,d){var a=this._drag_masters[b.dhx_drop];if(a.onDragOut&&a!=this){return a.onDragOut(c,b,f,d)}b.className=b.className.replace("dhx_drop_zone","");return null},onDrop:function(c,b,g,f){var a=this._drag_masters[b.dhx_drop];dhtmlx.DragControl._drag_context.from=dhtmlx.DragControl.getMaster(c);if(a.onDrop&&a!=this){return a.onDrop(c,b,g,f)}b.appendChild(c)},onDrag:function(b,c){var a=this._drag_masters[b.dhx_drag];if(a.onDrag&&a!=this){return a.onDrag(b,c)}dhtmlx.DragControl._drag_context={source:b,from:b};return"<div style='"+b.style.cssText+"'>"+b.innerHTML+"</div>"}};dhtmlx.DragItem={_init:function(){dhtmlx.assert(this.move,"DragItem :: Component doesn't have DataMove interface");dhtmlx.assert(this.locate,"DragItem :: Component doesn't have RenderStack interface");dhtmlx.assert(dhtmlx.DragControl,"DragItem :: DragControl is not included");if(!this._settings||this._settings.drag){dhtmlx.DragItem._initHandlers(this)}else{if(this._settings){this.drag_setter=function(a){if(a){this._initHandlers(this);delete this.drag_setter}return a}}}if(this.dragMarker){this.attachEvent("onBeforeDragIn",this.dragMarker);this.attachEvent("onDragOut",this.dragMarker)}},_initHandlers:function(a){dhtmlx.DragControl.addDrop(a._obj,a,true);dhtmlx.DragControl.addDrag(a._obj,a)},onDragIn:function(d,c,f){var h=this.locate(f)||null;var b=dhtmlx.DragControl._drag_context;var g=dhtmlx.DragControl.getMaster(d);var a=(this._locateHTML(h)||this._obj);if(a==dhtmlx.DragControl._landing){return a}b.target=h;b.to=g;if(!this.callEvent("onBeforeDragIn",[b,f])){b.id=null;return null}dhtmlx.html.addCss(a,"dhx_drag_over");return a},onDragOut:function(d,c,h,f){var g=this.locate(f)||null;if(h!=this._dataobj){g=null}var b=(this._locateHTML(g)||(h?dhtmlx.DragControl.getMaster(h)._obj:window.undefined));if(b==dhtmlx.DragControl._landing){return null}var a=dhtmlx.DragControl._drag_context;dhtmlx.html.removeCss(dhtmlx.DragControl._landing,"dhx_drag_over");a.target=a.to=null;this.callEvent("onDragOut",[a,f]);return null},onDrop:function(c,b,g,f){var a=dhtmlx.DragControl._drag_context;a.to=this;a.index=a.target?this.indexById(a.target):this.dataCount();a.new_id=dhtmlx.uid();if(!this.callEvent("onBeforeDrop",[a,f])){return}if(a.from==a.to){this.move(a.source,a.index)}else{if(a.from){a.from.move(a.source,a.index,a.to,a.new_id)}else{dhtmlx.error("Unsopported d-n-d combination")}}this.callEvent("onAfterDrop",[a,f])},onDrag:function(c,f){var g=this.locate(f);var d=[g];if(g){if(this.getSelected){var b=this.getSelected();if(dhtmlx.PowerArray.find.call(b,g)!=-1){d=b}}var a=dhtmlx.DragControl._drag_context={source:d,start:g};a.from=this;if(this.callEvent("onBeforeDrag",[a,f])){return a.html||this._toHTML(this.get(g))}}return null}};dhtmlx.EditAbility={_init:function(a){this._edit_id=null;this._edit_bind=null;dhtmlx.assert(this.data,"EditAbility :: Component doesn't have DataStore");dhtmlx.assert(this._locateHTML,"EditAbility :: Component doesn't have RenderStack");this.attachEvent("onEditKeyPress",function(c,d,b){if(c==13&&!b){this.stopEdit()}else{if(c==27){this.stopEdit(true)}}});this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this._edit_id},edit:function(b){if(this.stopEdit(false,b)){if(!this.callEvent("onBeforeEditStart",[b])){return}var a=this.data.get(b);if(a.$template){return}a.$template="edit";this.data.refresh(b);this._edit_id=b;this._save_binding(b);this._edit_bind(true,a);this.callEvent("onAfterEditStart",[b])}},stopEdit:function(c,e){if(!this._edit_id){return true}if(this._edit_id==e){return false}var a={};if(!c){this._edit_bind(false,a)}else{a=null}if(!this.callEvent("onBeforeEditStop",[this._edit_id,a])){return false}var b=this.data.get(this._edit_id);b.$template=null;if(!c){this._edit_bind(false,b)}var d=this._edit_id;this._edit_bind=this._edit_id=null;this.data.refresh(d);this.callEvent("onAfterEditStop",[d,a]);return true},_save_binding:function(h){var a=this._locateHTML(h);var c="";var f="";var e=[];if(a){var d=a.getElementsByTagName("*");var g="";for(var b=0;b<d.length;b++){if(d[b].nodeType==1&&(g=d[b].getAttribute("bind"))){c+="els["+e.length+"].value="+g+";";f+=g+"=els["+e.length+"].value;";e.push(d[b]);d[b].className+=" dhx_allow_selection";d[b].onselectstart=this._block_native}}d=null}c=Function("obj","els",c);f=Function("obj","els",f);this._edit_bind=function(l,j){if(l){c(j,e);if(e.length&&e[0].select){e[0].select()}}else{f(j,e)}}},_block_native:function(a){(a||event).cancelBubble=true;return true}};dhtmlx.SelectionModel={_init:function(){this._selected=dhtmlx.toArray();dhtmlx.assert(this.data,"SelectionModel :: Component doesn't have DataStore");this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this._data_updated,this));this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._data_loaded,this));this.data.attachEvent("onAfterFilter",dhtmlx.bind(this._data_filtered,this));this.data.attachEvent("onIdChange",dhtmlx.bind(this._id_changed,this))},_id_changed:function(c,a){for(var b=this._selected.length-1;b>=0;b--){if(this._selected[b]==c){this._selected[b]=a}}},_data_filtered:function(){for(var a=this._selected.length-1;a>=0;a--){if(this.data.indexById(this._selected[a])<0){var c=this._selected[a];var b=this.item(c);if(b){delete b.$selected}this._selected.splice(a,1);this.callEvent("onSelectChange",[c])}}},_data_updated:function(c,b,a){if(a=="delete"){this._selected.remove(c)}else{if(!this.data.dataCount()&&!this.data._filter_order){this._selected=dhtmlx.toArray()}}},_data_loaded:function(){if(this._settings.select){this.data.each(function(a){if(a.$selected){this.select(a.id)}},this)}},_select_mark:function(c,b,a){if(!a&&!this.callEvent("onBeforeSelect",[c,b])){return false}this.data.item(c).$selected=b;if(a){a.push(c)}else{if(b){this._selected.push(c)}else{this._selected.remove(c)}this._refresh_selection(c)}return true},select:function(d,c,a){if(!d){return this.selectAll()}if(d instanceof Array){for(var b=0;b<d.length;b++){this.select(d[b],c,a)}return}if(!this.data.exists(d)){dhtmlx.error("Incorrect id in select command: "+d);return}if(a&&this._selected.length){return this.selectAll(this._selected[this._selected.length-1],d)}if(!c&&(this._selected.length!=1||this._selected[0]!=d)){this._silent_selection=true;this.unselectAll();this._silent_selection=false}if(this.isSelected(d)){if(c){this.unselect(d)}return}if(this._select_mark(d,true)){this.callEvent("onAfterSelect",[d])}},unselect:function(a){if(!a){return this.unselectAll()}if(!this.isSelected(a)){return}this._select_mark(a,false)},selectAll:function(d,c){var a;var b=[];if(d||c){a=this.data.getRange(d||null,c||null)}else{a=this.data.getRange()}a.each(function(e){var f=this.data.item(e.id);if(!f.$selected){this._selected.push(e.id);this._select_mark(e.id,true,b)}return e.id},this);this._refresh_selection(b)},unselectAll:function(){var a=[];this._selected.each(function(b){this._select_mark(b,false,a)},this);this._selected=dhtmlx.toArray();this._refresh_selection(a)},isSelected:function(a){return this._selected.find(a)!=-1},getSelected:function(a){switch(this._selected.length){case 0:return a?[]:"";case 1:return a?[this._selected[0]]:this._selected[0];default:return([].concat(this._selected))}},_is_mass_selection:function(a){return a.length>100||a.length>this.data.dataCount/2},_refresh_selection:function(b){if(typeof b!="object"){b=[b]}if(!b.length){return}if(this._is_mass_selection(b)){this.data.refresh()}else{for(var a=0;a<b.length;a++){this.render(b[a],this.data.item(b[a]),"update")}}if(!this._silent_selection){this.callEvent("onSelectChange",[b])}}};dhtmlx.RenderStack={_init:function(){dhtmlx.assert(this.data,"RenderStack :: Component doesn't have DataStore");dhtmlx.assert(dhtmlx.Template,"dhtmlx.Template :: dhtmlx.Template is not accessible");this._html=document.createElement("DIV")},_toHTML:function(a){dhtmlx.assert((!a.$template||this.type["template_"+a.$template]),"RenderStack :: Unknown template: "+a.$template);this.callEvent("onItemRender",[a]);return this.type._item_start(a,this.type)+(a.$template?this.type["template_"+a.$template]:this.type.template)(a,this.type)+this.type._item_end},_toHTMLObject:function(a){this._html.innerHTML=this._toHTML(a);return this._html.firstChild},_locateHTML:function(a){if(this._htmlmap){return this._htmlmap[a]}this._htmlmap={};var c=this._dataobj.childNodes;for(var b=0;b<c.length;b++){var d=c[b].getAttribute(this._id);if(d){this._htmlmap[d]=c[b]}}return this._locateHTML(a)},locate:function(a){return dhtmlx.html.locate(a,this._id)},show:function(b){var a=this._locateHTML(b);if(a){this._dataobj.scrollTop=a.offsetTop-this._dataobj.offsetTop}},render:function(f,d,c,e){if(f){var a=this._locateHTML(f);switch(c){case"update":if(!a){return}var b=this._htmlmap[f]=this._toHTMLObject(d);dhtmlx.html.insertBefore(b,a);dhtmlx.html.remove(a);break;case"delete":if(!a){return}dhtmlx.html.remove(a);delete this._htmlmap[f];break;case"add":var b=this._htmlmap[f]=this._toHTMLObject(d);dhtmlx.html.insertBefore(b,this._locateHTML(this.data.next(f)),this._dataobj);break;case"move":this.render(f,d,"delete");this.render(f,d,"add");break;default:dhtmlx.error("Unknown render command: "+c);break}}else{if(this.callEvent("onBeforeRender",[this.data])){this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join("");this._htmlmap=null}}this.callEvent("onAfterRender",[])},pager_setter:function(b){this.attachEvent("onBeforeRender",function(){var d=this._settings.pager._settings;if(d.page==-1){return false}this.data.min=d.page*d.size;this.data.max=(d.page+1)*d.size-1;return true});var a=new dhtmlx.ui.pager(b);var c=dhtmlx.bind(function(){this.data.refresh()},this);a.attachEvent("onRefresh",c);this.data.attachEvent("onStoreUpdated",function(e){var d=this.dataCount();if(d!=a._settings.count){a._settings.count=d;if(a._settings.page==-1){a._settings.page=0}a.refresh()}});return a},height_setter:function(a){if(a=="auto"){this.attachEvent("onAfterRender",this._correct_height);dhtmlx.event(window,"resize",dhtmlx.bind(this._correct_height,this))}return a},_correct_height:function(){this._dataobj.style.overflow="hidden";this._dataobj.style.height="1px";var a=this._dataobj.scrollHeight;this._dataobj.style.height=a+"px";if(dhtmlx._isFF){var b=this._dataobj.scrollHeight;if(b!=a){this._dataobj.style.height=b+"px"}}this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var a=this.type;var b=(a.border||0)+(a.padding||0)*2+(a.margin||0)*2;return{x:a.width+b,y:a.height+b}},x_count_setter:function(b){var c=this._getDimension();var a=dhtmlx.$customScroll?0:18;this._dataobj.style.width=c.x*b+(this._settings.height!="auto"?a:0)+"px";return b},y_count_setter:function(a){var b=this._getDimension();this._dataobj.style.height=b.y*a+"px";return a}};dhtmlx.VirtualRenderStack={_init:function(){dhtmlx.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first");this._htmlmap={};this._dataobj.style.overflowY="scroll";dhtmlx.event(this._dataobj,"scroll",dhtmlx.bind(this._render_visible_rows,this));dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this));this.data._unrendered_area=[];this.data.getIndexRange=this._getIndexRange},_locateHTML:function(a){return this._htmlmap[a]},show:function(c){range=this._getVisibleRange();var b=this.data.indexById(c);var a=Math.floor(b/range._dx)*range._y;this._dataobj.scrollTop=a},_getIndexRange:function(e,d){if(d!==0){d=Math.min((d||Infinity),this.dataCount()-1)}var a=dhtmlx.toArray();for(var b=(e||0);b<=d;b++){var c=this.item(this.order[b]);if(this.order.length>b){if(!c){this.order[b]=dhtmlx.uid();c={id:this.order[b],$template:"loading"};this._unrendered_area.push(this.order[b])}else{if(c.$template=="loading"){this._unrendered_area.push(this.order[b])}}a.push(c)}}return a},render:function(f,d,c,e){if(f){var a=this._locateHTML(f);switch(c){case"update":if(!a){return}var b=this._htmlmap[f]=this._toHTMLObject(d);dhtmlx.html.insertBefore(b,a);dhtmlx.html.remove(a);break;default:this._render_delayed();break}}else{if(this.callEvent("onBeforeRender",[this.data])){this._htmlmap={};this._render_visible_rows(null,true);this._wait_for_render=false;this.callEvent("onAfterRender",[])}}},_render_delayed:function(){if(this._wait_for_render){return}this._wait_for_render=true;window.setTimeout(dhtmlx.bind(function(){this.render()},this),1)},_create_placeholder:function(a){var b=document.createElement("DIV");b.className="dhxdataview_placeholder";b.style.cssText="height:"+a+"px; width:100%; overflow:hidden;";return b},_render_visible_rows:function(v,y){this.data._unrendered_area=[];var u=this._getVisibleRange();if(!this._dataobj.firstChild||y){this._dataobj.innerHTML="";this._dataobj.appendChild(this._create_placeholder(u._max));this._htmlrows=[this._dataobj.firstChild]}var d=Math.max(u._from,0);var s=(this.data.max||this.data.max===0)?this.data.max:Infinity;while(d<=u._height){while(this._htmlrows[d]&&this._htmlrows[d]._filled&&d<=u._height){d++}if(d>u._height){break}var j=d;while(!this._htmlrows[j]){j--}var a=this._htmlrows[j];var c=d*u._dx+(this.data.min||0);if(c>s){break}var f=Math.min(c+u._dx-1,s);var m=this._create_placeholder(u._y);var g=this.data.getIndexRange(c,f);if(!g.length){break}m.innerHTML=g.map(this._toHTML,this).join("");for(var q=0;q<g.length;q++){this._htmlmap[this.data.idByIndex(c+q)]=m.childNodes[q]}var r=parseInt(a.style.height,10);var x=(d-j)*u._y;var o=(r-x-u._y);dhtmlx.html.insertBefore(m,x?a.nextSibling:a,this._dataobj);this._htmlrows[d]=m;m._filled=true;if(x<=0&&o>0){a.style.height=o+"px";this._htmlrows[d+1]=a}else{if(x<0){dhtmlx.html.remove(a)}else{a.style.height=x+"px"}if(o>0){var l=this._htmlrows[d+1]=this._create_placeholder(o);dhtmlx.html.insertBefore(l,m.nextSibling,this._dataobj)}}d++}if(this.data._unrendered_area.length){var n=this.indexById(this.data._unrendered_area[0]);var b=this.indexById(this.data._unrendered_area.pop())+1;if(b>n){if(!this.callEvent("onDataRequest",[n,b-n])){return false}dhtmlx.assert(this.data.feed,"Data feed is missed");this.data.feed.call(this,n,b-n)}}if(dhtmlx._isIE){var w=this._getVisibleRange();if(w._from!=u._from){this._render_visible_rows()}}},_getVisibleRange:function(){var b=dhtmlx.$customScroll?0:18;var g=this._dataobj.scrollTop;var a=this._dataobj.scrollWidth;var h=this._dataobj.offsetHeight;var l=this.type;var d=this._getDimension();var m=Math.floor(a/d.x)||1;var c=Math.floor(g/d.y);var j=Math.ceil((h+g)/d.y)-1;var e=this.data.max?(this.data.max-this.data.min):this.data.dataCount();var f=Math.ceil(e/m)*d.y;return{_from:c,_height:j,_top:g,_max:f,_y:d.y,_dx:m}}};dhtmlXDataView=function(a){this.name="DataView";if(dhtmlx.assert_enabled()){this._assert()}dhtmlx.extend(this,dhtmlx.Settings);this._parseContainer(a,"dhx_dataview");dhtmlx.extend(this,dhtmlx.AtomDataLoader);dhtmlx.extend(this,dhtmlx.DataLoader);dhtmlx.extend(this,dhtmlx.EventSystem);dhtmlx.extend(this,dhtmlx.RenderStack);dhtmlx.extend(this,dhtmlx.SelectionModel);dhtmlx.extend(this,dhtmlx.MouseEvents);dhtmlx.extend(this,dhtmlx.KeyEvents);dhtmlx.extend(this,dhtmlx.EditAbility);dhtmlx.extend(this,dhtmlx.DataMove);dhtmlx.extend(this,dhtmlx.DragItem);dhtmlx.extend(this,dhtmlx.DataProcessor);dhtmlx.extend(this,dhtmlx.AutoTooltip);dhtmlx.extend(this,dhtmlx.Destruction);this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this));this._parseSettings(a,{drag:false,edit:false,select:"multiselect",type:"default"});if(this._settings.height!="auto"&&!this._settings.renderAll){dhtmlx.extend(this,dhtmlx.VirtualRenderStack)}this.data.provideApi(this,true);if(this.config.autowidth){this.attachEvent("onBeforeRender",function(){this.type.width=Math.floor((this._dataobj.scrollWidth)/(this.config.autowidth*1||1))-this.type.padding*2-this.type.margin*2-this.type.border*2;this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type));this.type._item_end=this.template_item_end(this.type)});dhtmlx.event(window,"resize",function(){this.refresh()},this)}if(dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(this)}};dhtmlXDataView.prototype={bind:function(){dhtmlx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhtmlx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(c,e){var d=this._locateHTML(c.target);if(this.type.drag_marker){if(this._drag_marker){this._drag_marker.style.backgroundImage="";this._drag_marker.style.backgroundRepeat=""}if(d){d.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")";d.style.backgroundRepeat="no-repeat";this._drag_marker=d}}if(d&&this._settings.auto_scroll){var a=d.offsetTop;var f=d.offsetHeight;var b=this._obj.scrollTop;var g=this._obj.offsetHeight;if(a-f>=0&&a-f*0.75<b){b=Math.max(a-f,0)}else{if(a+f/0.75>b+g){b=b+f}}this._obj.scrollTop=b}return true},_id:"dhx_f_id",on_click:{dhx_dataview_item:function(a,b){if(this.stopEdit(false,b)){if(this._settings.select){if(this._settings.select=="multiselect"){this.select(b,a.ctrlKey,a.shiftKey)}else{this.select(b)}}}}},on_dblclick:{dhx_dataview_item:function(a,b){if(this._settings.edit){this.edit(b)}}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")};dhtmlx.compat("layout");if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachDataView=function(a){this.callEvent("_onBeforeContentAttach",["dataview"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(typeof(a)=="undefined"){a={}}b.id="DataViewObject_"+new Date().getTime();a.container=b.id;a.skin=this.conf.skin;this.dataType="dataview";this.dataObj=new dhtmlXDataView(a);this.dataObj.setSizes=function(){this.render()};b=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}function dhtmlXForm(e,d,f){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20};this.idef_const={offsetNested:20};this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"};this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var c=this;this.setSkin=function(a){this.skin=a;this.cont.className="dhxform_obj_"+this.skin;this.cont.style.fontSize=(a=="material"?"14px":(a=="dhx_terrace"?"13px":"12px"));this._updateBlocks();this.forEachItem(function(h){var g=c.getItemType(h);if(typeof(c.items[g])!="undefined"&&typeof(c.items[g].setSkin)=="function"){c.doWithItem(h,"setSkin",a)}})};this.skin=(f||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"material");this.separator=",";this.live_validate=false;this._type="checkbox";this._rGroup="default";this._idIndex={};this._indexId=[];this.cont=(typeof(e)=="object"?e:document.getElementById(e));if(!e._isNestedForm){this._parentForm=true;this.cont.style.fontSize=(this.skin=="material"?"14px":(this.skin=="dhx_terrace"?"13px":"12px"));this.cont.className="dhxform_obj_"+this.skin;this.setFontSize=function(a){this.cont.style.fontSize=a;this._updateBlocks()};this.getForm=function(){return this};this.cont.onkeypress=function(g){g=(g||event);if(g.keyCode==13){var a=(g.target||g.srcElement);if(typeof(a.tagName)!="undefined"&&String(a.tagName).toLowerCase()=="textarea"&&!g.ctrlKey){return}c.callEvent("onEnter",[])}}}this.b_index=null;this.base=[];this._prepare=function(n,o){if(this.b_index==null){this.b_index=0}else{this.b_index++}var h=null;var g=null;if(o!=null){if(o<0){o=0}var l=0;for(var a=0;a<this.cont.childNodes.length;a++){for(var m=0;m<this.cont.childNodes[a].childNodes.length;m++){if(g==null&&this.cont.childNodes[a].childNodes[m]._isNestedForm!=true){if(l==o){h=this.cont.childNodes[a].nextSibling;g=this.cont.childNodes[a].childNodes[m]}l++}}}}this.base[this.b_index]=document.createElement("DIV");this.base[this.b_index].className="dhxform_base";if(typeof(n)!="undefined"){this.base[this.b_index].style.cssText+=" margin-left:"+n+"px!important;"}if(h!=null){this.cont.insertBefore(this.base[this.b_index],h);h=null}else{this.cont.appendChild(this.base[this.b_index])}if(g!=null){while(g!=null){var j=g;g=g.nextSibling;this.base[this.b_index].appendChild(j);j=null}}};this.setSizes=function(){};this._mergeSettings=function(m){var h=-1;var j={type:"settings"};for(var g in this.idef){j[g]=this.idef[g]}for(var l=0;l<m.length;l++){if(typeof(m[l])!="undefined"&&m[l].type=="settings"){for(var g in m[l]){j[g]=m[l][g]}h=l}}m[h>=0?h:m.length]=j;return m};this._genStr=function(a){var g="dhxId_";var j="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";for(var h=0;h<a;h++){g+=j.charAt(Math.floor(Math.random()*j.length))}return g};this.idPrefix="dhxForm_"+this._genStr(12)+"_";this._rId=(this._parentForm?this._genStr(12)+"_":e._rId);this.objPull={};this.itemPull={};this._ic=0;this._addItem=function(x,l,r,n,u,y,t){if(this.items[x]._index){this.getForm()._indexId.push(l);this.getForm()._idIndex[l]={ind:this.getForm()._indexId.length-1}}if(!x){x=this._type}if(x=="list"&&u!=null&&this.itemPull[this.idPrefix+u]!=null&&typeof(this.itemPull[this.idPrefix+u]._addSubListNode)=="function"){var v=this.itemPull[this.idPrefix+u]._addSubListNode()}else{if(x=="newcolumn"){var v={}}else{var m=this.base[this.b_index];var g=null;if(typeof(y)!="undefined"&&!isNaN(y)&&x!="list"){y=Math.max(parseInt(y),0)+1;for(var A=0;A<this.cont.childNodes.length;A++){for(var h=0;h<this.cont.childNodes[A].childNodes.length;h++){if(g==null&&this.cont.childNodes[A].childNodes[h]._isNestedForm!=true){y--;if(y==0){g=this.cont.childNodes[A].childNodes[h];m=this.cont.childNodes[A]}}}}}else{if(x=="list"){for(var z in this.itemPull){if(z==this.idPrefix+l){g=this.itemPull[z].nextSibling;if(this.itemPull[z]._listBase!=null&&this.itemPull[z]._listBase.length>0){g=this.itemPull[z]._listBase[this.itemPull[z]._listBase.length-1]}}}}}var v=document.createElement("DIV");if(t==true&&g!=null){g=g.nextSibling}if(g!=null){m.insertBefore(v,g)}else{m.appendChild(v)}}}v._idd=l;v._rId=this._rId;if(typeof(v.style)!="undefined"){if(typeof(r.offsetLeft)=="undefined"&&this.idef.offsetLeft>0){r.offsetLeft=this.idef.offsetLeft}if(typeof(r.offsetTop)=="undefined"&&this.idef.offsetTop>0){r.offsetTop=this.idef.offsetTop}var o="";if(typeof(r.offsetLeft)!="undefined"){o+=" padding-left:"+r.offsetLeft+"px!important;"}if(typeof(r.offsetTop)!="undefined"){o+=" padding-top:"+r.offsetTop+"px!important;"}v.style.cssText+=o}if(x=="block"){if(isNaN(r.blockOffset)){r.blockOffset=this.idef.blockOffset}}if(x=="list"){if(typeof(v._ofsNested)=="undefined"){v._ofsNested=this.idef_const.offsetNested}if(n!=null){v._sId=n}var s=this.items[x].render(v,this.skin);if(!this.itemPull[this.idPrefix+l]._listObj){this.itemPull[this.idPrefix+l]._listObj=[]}if(!this.itemPull[this.idPrefix+l]._list){this.itemPull[this.idPrefix+l]._list=[]}if(!this.itemPull[this.idPrefix+l]._listBase){this.itemPull[this.idPrefix+l]._listBase=[]}(this.itemPull[this.idPrefix+l]._listObj).push(s[0]);(this.itemPull[this.idPrefix+l]._list).push(s[1]);(this.itemPull[this.idPrefix+l]._listBase).push(v);s[1].checkEvent=function(a){return c.checkEvent(a)};s[1].callEvent=function(a,q){return c.callEvent(a,q)};s[1].getForm=function(){return c.getForm()};s[1]._initObj(this._mergeSettings(r));if(v._inBlcok){v.className+=" in_block"}return s[1]}if(x=="newcolumn"){this._prepare(r.offset,y);return}if(x=="label"&&this._ic++==0){r._isTopmost=true}r.position=this.apos_css[(!r.position||!this.apos_css[r.position]?this.idef.position:r.position)];v.className=r.position+(typeof(r.className)=="string"?" "+r.className:"");if(!r.labelWidth){r.labelWidth=this.idef.labelWidth}if(!r.labelHeight){r.labelHeight=this.idef.labelHeight}if(typeof(r.wrap)!="undefined"){r.wrap=window.dhx4.s2b(r.wrap)}r.labelAlign=(this.align_css[r.labelAlign]?this.align_css[r.labelAlign]:this.align_css[this.idef.labelAlign]);r.inputWidth=(r.width?r.width:(r.inputWidth?r.inputWidth:this.idef.inputWidth));if(!r.inputHeight){r.inputHeight=this.idef.inputHeight}if(typeof(r.note)!="undefined"){if(r.note.length!=null&&r.note[0]!=null){r.note=r.note[0]}if(typeof(r.note.width)=="undefined"){r.note.width=this.idef.noteWidth}if(r.note.width=="auto"){r.note.width=r.inputWidth}}v.checkEvent=function(a){return c.checkEvent(a)};v.callEvent=function(a,q){return c.callEvent(a,q)};v.getForm=function(){return c.getForm()};v._autoCheck=function(a){c._autoCheck(a)};if(typeof(r.readonly)=="string"){r.readonly=window.dhx4.s2b(r.readonly)}if(typeof(r.autoStart)=="string"){r.autoStart=window.dhx4.s2b(r.autoStart)}if(typeof(r.autoRemove)=="string"){r.autoRemove=window.dhx4.s2b(r.autoRemove)}if(typeof(r.titleScreen)=="string"){r.titleScreen=window.dhx4.s2b(r.titleScreen)}if(typeof(r.info)=="string"){r.info=window.dhx4.s2b(r.info)}if(typeof(r.hidden)=="string"){r.hidden=window.dhx4.s2b(r.hidden)}if(typeof(r.checked)=="string"){r.checked=window.dhx4.s2b(r.checked)}if(typeof(r.userdata)!="undefined"){for(var z in r.userdata){this.getForm().setUserData(l,z,r.userdata[z])}}if(r.validate){if(typeof(r.validate!="undefined")&&(typeof(r.validate)=="function"||typeof(window[r.validate])=="function")){v._validate=[r.validate]}else{v._validate=String(r.validate).split(this.separator)}}if(typeof(r.required)!="undefined"){if(typeof(r.required)=="string"){r.required=window.dhx4.s2b(r.required)}v._required=(r.required==true)}if(v._required){if(!v._validate){v._validate=[]}var j=false;for(h=0;h<v._validate.length;h++){j=(j||(v._validate[h]=="NotEmpty"))}if(!j){v._validate.push("NotEmpty")}}v._ll=(r.position==this.apos_css["label-left"]||r.position==this.apos_css["label-top"]);this.objPull[this.idPrefix+l]=this.items[x].render(v,r);this.itemPull[this.idPrefix+l]=v};this._initObj=function(l,h){if(typeof(l.data)!="undefined"){var m=null;if(typeof(h)!="undefined"){m=h.match(/(\?|\&)id\=([a-z0-9_\-]*)/i);if(m!=null&&m[0]!=null){m=m[0].split("=")[1]}}if(this.callEvent("onBeforeDataLoad",[m,window.dhx4._copyObj(l.data)])===true){this.formId=m;this._last_load_data=l;this.setFormData(l.data);this.resetDataProcessor("updated")}return}this._prepare();for(var j=0;j<l.length;j++){if(typeof(l[j])!="undefined"&&l[j].type=="settings"){for(var g in l[j]){this.idef[g]=l[j][g]}}}for(var j=0;j<l.length;j++){this._prepareItem(l[j])}this._autoCheck()};this._prepareItem=function(l,o,j){var h=(l!=null&&l.type!=null?l.type:"");if(this.items[h]){if(!l.name){l.name=this._genStr(12)}var n=l.name;if(this.objPull[this.idPrefix+n]!=null||h=="radio"){n=this._genStr(12)}var m=l;m.label=m.label||"";m.value=m.value;m.checked=window.dhx4.s2b(m.checked);m.disabled=window.dhx4.s2b(m.disabled);m.name=m.name||this._genStr(12);m.options=m.options||[];m.rows=m.rows||"none";m.uid=this._genStr(12);this._addItem(h,n,m,null,null,o,j);o=null;if(this._parentEnabled===false){this._disableItem(n)}for(var g=0;g<m.options.length;g++){if(m.options[g].list!=null){if(!m.options[g].value){m.options[g].value=this._genStr()}var a=this._addItem("list",n,m.options[g].list,m.options[g].value,null);a._subSelect=true;a._subSelectId=m.options[g].value}}if(l.list!=null){if(!l.listParent){l.listParent=m.name}var a=this._addItem("list",n,l.list,null,l.listParent)}}};this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"};this._xmlToObject=function(u,g){if(typeof(g)=="undefined"){g=true}if(g){var x=u.getElementsByTagName("items");x=(x!=null&&x[0]!=null?x[0]:null);var h=u.getElementsByTagName("data");h=(h!=null&&h[0]!=null?h[0]:null)}else{x=u}var s=(g?[]:{});if(x!=null){for(var l=0;l<x.childNodes.length;l++){if(typeof(x.childNodes[l].tagName)!="undefined"){var m=x.childNodes[l].tagName;if(this._xmlSubItems[m]!=null){var n=this._xmlSubItems[m];if(typeof(s[n])=="undefined"){s[n]=[]}var t=x.childNodes[l];var r={};for(var B=0;B<t.attributes.length;B++){var y=t.attributes[B].name;var v=t.attributes[B].value;r[y]=v}if(n=="note"){r.text=t.firstChild.nodeValue}if(n=="_userdata"){r.value=(t.firstChild!=null&&t.firstChild.nodeValue!=null?t.firstChild.nodeValue:"")}var o=this._xmlToObject(t,false);for(var z in o){if(z=="_userdata"){if(!r.userdata){r.userdata={}}for(var B=0;B<o[z].length;B++){r.userdata[o[z][B].name]=o[z][B].value}}else{r[z]=o[z]}}t=null;if(g){s.push(r)}else{s[n].push(r)}}}}}if(h!=null){s={data:{}};for(var l=0;l<h.childNodes.length;l++){if(typeof(h.childNodes[l].tagName)!="undefined"){var j=h.childNodes[l].tagName;var A=(h.childNodes[l].firstChild!=null?h.childNodes[l].firstChild.nodeValue:"");s.data[j]=A}}}return s};this._autoCheck=function(m){if(this._locked===true){m=false}else{if(typeof(m)=="undefined"){m=true}}for(var j in this.itemPull){var n=(m&&(this.itemPull[j]._udis!==true));this[n?"_enableItem":"_disableItem"](this.itemPull[j]._idd);if(this.getForm()._idIndex[this.itemPull[j]._idd]!=null){this.getForm()._idIndex[this.itemPull[j]._idd].enabled=n}var h=(n&&(typeof(this.itemPull[j]._checked)=="boolean"?this.itemPull[j]._checked:true));if(this.itemPull[j]._list){for(var r=0;r<this.itemPull[j]._list.length;r++){var o=true;if(this.itemPull[j]._list[r]._subSelect==true){o=false;var l=this.getItemValue(this.itemPull[j]._idd);if(!(typeof(l)=="object"&&typeof(l.length)=="number")){l=[l]}for(var g=0;g<l.length;g++){o=(l[g]==this.itemPull[j]._list[r]._subSelectId)||o}this.itemPull[j]._listObj[r][o?"show":"hide"](this.itemPull[j]._listBase[r])}this.itemPull[j]._list[r]._autoCheck(h&&o)}}}};this.doWithItem=function(j,g,s,r,o,n){if(typeof(j)=="object"){var u=j[0];var t=j[1];var v=null;var m=null;for(var l in this.itemPull){if((this.itemPull[l]._value==t||t===null)&&this.itemPull[l]._group==u){return this.objPull[l][g](this.itemPull[l],s,r,o,n)}if(this.itemPull[l]._list!=null&&!m){for(var h=0;h<this.itemPull[l]._list.length;h++){m=this.itemPull[l]._list[h].doWithItem(j,g,s,r,o)}}}if(m!=null){return m}else{if(g=="getType"){return this.doWithItem(j[0],"getType")}}}else{if(!this.itemPull[this.idPrefix+j]){var m=null;for(var l in this.itemPull){if(this.itemPull[l]._list&&!m){for(var h=0;h<this.itemPull[l]._list.length;h++){if(m==null){m=this.itemPull[l]._list[h].doWithItem(j,g,s,r,o,n)}}}}return m}else{return this.objPull[this.idPrefix+j][g](this.itemPull[this.idPrefix+j],s,r,o,n)}}};this._removeItem=function(g,a){if(a!=null){g=this.doWithItem([g,a],"destruct")}else{this.doWithItem(g,"destruct")}this._clearItemData(g)};this._clearItemData=function(j){if(this.itemPull[this.idPrefix+j]){j=this.idPrefix+j;try{this.objPull[j]=null;this.itemPull[j]=null;delete this.objPull[j];delete this.itemPull[j]}catch(h){}}else{for(var a in this.itemPull){if(this.itemPull[a]._list){for(var g=0;g<this.itemPull[a]._list.length;g++){this.itemPull[a]._list[g]._clearItemData(j)}}}}};this.isItem=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isExist")};this.getItemType=function(g,a){g=[g,(a||null)];return this.doWithItem(g,"getType")};this.forEachItem=function(h){for(var g in this.objPull){if(this.objPull[g].t=="radio"){h(this.itemPull[g]._group,this.itemPull[g]._value)}else{h(String(g).replace(this.idPrefix,""))}if(this.itemPull[g]._list){for(var j=0;j<this.itemPull[g]._list.length;j++){this.itemPull[g]._list[j].forEachItem(h)}}}};this.setItemLabel=function(h,a,g){if(g!=null){h=[h,a]}else{g=a}this.doWithItem(h,"setText",g)};this.getItemLabel=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"getText")};this._enableItem=function(a){this.doWithItem(a,"enable")};this._disableItem=function(a){this.doWithItem(a,"disable")};this._isItemEnabled=function(a){return this.doWithItem(a,"isEnabled")};this.checkItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"check");this._autoCheck()};this.uncheckItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"unCheck");this._autoCheck()};this.isItemChecked=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isChecked")};this.getCheckedValue=function(a){return this.doWithItem([a,null],"getChecked")};this._getRGroup=function(m,l){for(var g in this.itemPull){if(this.itemPull[g]._group==m&&(l==null||this.itemPull[g]._value==l)){return this.itemPull[g]._idd}if(this.itemPull[g]._list!=null){for(var j=0;j<this.itemPull[g]._list.length;j++){var h=this.itemPull[g]._list[j]._getRGroup(m,l);if(h!=null){return h}}}}return null};this.setItemValue=function(g,a){this.resetValidateCss(g,a);if(this.getItemType(g)=="radio"){if(this._getRGroup(g,a)!=null){this.checkItem(g,a)}else{this.uncheckItem(g,this.getCheckedValue(g))}return null}return this.doWithItem(g,"setValue",a)};this.getItemValue=function(g,a){if(this.getItemType(g)=="radio"){return this.getCheckedValue(g)}return this.doWithItem(g,"getValue",a)};this.updateValues=function(){this._updateValues()};this.showItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"show")};this.hideItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"hide")};this.isItemHidden=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isHidden")};this.getOptions=function(a){return this.doWithItem(a,"getOptions")};this.setItemWidth=function(g,a){this.doWithItem(g,"setWidth",a)};this.getItemWidth=function(a){return this.doWithItem(a,"getWidth")};this.setItemHeight=function(g,a){this.doWithItem(g,"setHeight",a)};this.setItemFocus=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"setFocus")};this._updateValues=function(){for(var g in this.itemPull){if(this.objPull[g]&&typeof(this.objPull[g].updateValue)=="function"){this.objPull[g].updateValue(this.itemPull[g])}if(this.itemPull[g]._list){for(var h=0;h<this.itemPull[g]._list.length;h++){this.itemPull[g]._list[h]._updateValues()}}}};this._getItemByName=function(l){for(var g in this.itemPull){if(this.itemPull[g]._idd==l){return this.itemPull[g]}if(this.itemPull[g]._list!=null){for(var j=0;j<this.itemPull[g]._list.length;j++){var h=this.itemPull[g]._list[j]._getItemByName(l);if(h!=null){return h}}}}return null};this._resetValidateCss=function(a){a.className=(a.className).replace(a._vcss,"");a._vcss=null};this.setValidateCss=function(a,j,h){var g=this._getItemByName(a);if(!g){return}if(g._vcss!=null){this._resetValidateCss(g)}g._vcss=(typeof(h)=="string"?h:"validate_"+(j===true?"ok":"error"));g.className+=" "+g._vcss};this.resetValidateCss=function(h){for(var g in this.itemPull){if(this.itemPull[g]._vcss!=null){this._resetValidateCss(this.itemPull[g])}if(this.itemPull[g]._list!=null){for(var j=0;j<this.itemPull[g]._list.length;j++){this.itemPull[g]._list[j].resetValidateCss()}}}};this._validateLoop=function(h){for(var g in this.objPull){h(String(g).replace(this.idPrefix,""));if(this.itemPull[g]._list){for(var j=0;j<this.itemPull[g]._list.length;j++){this.itemPull[g]._list[j]._validateLoop(h)}}}};this.validate=function(g){if(this.callEvent("onBeforeValidate",[])==false){return}var a=true;this._validateLoop(function(j,l){var h=c.doWithItem(j,"_validate");if(typeof(h)!="boolean"){h=true}a=h&&a},true);this.callEvent("onAfterValidate",[a]);return a};this.validateItem=function(a,g){if(typeof(g)!="undefined"){a=[a,g]}return this.doWithItem(a,"_validate")};this.enableLiveValidation=function(a){this.live_validate=(a==true)};this.setReadonly=function(g,a){this.doWithItem(g,"setReadonly",a)};this.isReadonly=function(a){return this.doWithItem(a,"isReadonly")};this.getFirstActive=function(g){for(var j=0;j<this._indexId.length;j++){var a=true;if(g==true){var h=this.getItemType(this._indexId[j]);if(!dhtmlXForm.prototype.items[h].setFocus){a=false}}if(a&&this._idIndex[this._indexId[j]].enabled){return this._indexId[j]}}return null};this.setFocusOnFirstActive=function(){var a=this.getFirstActive(true);if(a!=null){this.setItemFocus(a)}};this.enableItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"userEnable");this._autoCheck()};this.disableItem=function(g,a){if(a!=null){g=[g,a]}this.doWithItem(g,"userDisable");this._autoCheck()};this.isItemEnabled=function(g,a){if(a!=null){g=[g,a]}return this.doWithItem(g,"isUserEnabled")};this.clear=function(){var h={};this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");for(var j in this.itemPull){var l=this.itemPull[j]._idd;if(this.itemPull[j]._type=="ch"){this.uncheckItem(l)}if(this.itemPull[j]._type in {ta:1,editor:1,calendar:1,pw:1,hd:1}){this.setItemValue(l,"")}if(this.itemPull[j]._type=="combo"){this.itemPull[j]._apiChange=true;var r=this.getCombo(l);r.selectOption(0);r=null;this.itemPull[j]._apiChange=false}if(this.itemPull[j]._type=="se"){var n=this.getOptions(l);if(n.length>0){n[0].selected=true}}if(this.itemPull[j]._type=="ra"){var m=this.itemPull[j]._group;if(!h[m]){this.checkItem(m,this.doWithItem(l,"_getFirstValue"));h[m]=true}}if(this.itemPull[j]._list){for(var o=0;o<this.itemPull[j]._list.length;o++){this.itemPull[j]._list[o].clear()}}if(this["setFormData_"+this.itemPull[j]._type]){this["setFormData_"+this.itemPull[j]._type](l,"")}}h=null;if(this._parentForm){this._autoCheck()}this.resetValidateCss()};this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear");window.dhx4._eventable(this,"clear");for(var g in this.objPull){this._removeItem(String(g).replace(this.idPrefix,""))}if(this._ccTm){window.clearTimeout(this._ccTm)}this._formLS=null;for(var h=0;h<this.base.length;h++){while(this.base[h].childNodes.length>0){this.base[h].removeChild(this.base[h].childNodes[0])}if(this.base[h].parentNode){this.base[h].parentNode.removeChild(this.base[h])}this.base[h]=null}this.base=null;this.cont.onkeypress=null;this.cont.className="";this.cont=null;for(var g in this){this[g]=null}c=null};for(var b in this.items){this.items[b].t=b;if(typeof(this.items[b]._index)=="undefined"){this.items[b]._index=true}if(!this.items[b].show){this.items[b].show=function(a){a.style.display="";if(a._listObj){for(var g=0;g<a._listObj.length;g++){a._listObj[g].show(a._listBase[g])}}}}if(!this.items[b].hide){this.items[b].hide=function(a){a.style.display="none";if(a._listObj){for(var g=0;g<a._listObj.length;g++){a._listObj[g].hide(a._listBase[g])}}}}if(!this.items[b].isHidden){this.items[b].isHidden=function(a){return(a.style.display=="none")}}if(!this.items[b].userEnable){this.items[b].userEnable=function(a){a._udis=false}}if(!this.items[b].userDisable){this.items[b].userDisable=function(a){a._udis=true}}if(!this.items[b].isUserEnabled){this.items[b].isUserEnabled=function(a){return(a._udis!==true)}}if(!this.items[b].getType){this.items[b].getType=function(){return this.t}}if(!this.items[b].isExist){this.items[b].isExist=function(){return true}}if(!this.items[b]._validate){this.items[b]._validate=function(h){if(!h._validate||!h._enabled){return true}if(h._type=="ch"||h._type=="ra"){var m=(this.isChecked(h)?this.getValue(h):0);if(h._type=="ra"&&typeof(m)=="undefined"){m=0}}else{var m=this.getValue(h)}var g=true;for(var l=0;l<h._validate.length;l++){var a="is"+h._validate[l];if((m==null||m.length==0)&&a!="isNotEmpty"&&h._type!="container"){}else{var j=dhtmlxValidation[a];if(h._type=="container"&&typeof(j)=="function"){j=function(){return true}}if(typeof(j)!="function"&&typeof(h._validate[l])=="function"){j=h._validate[l]}if(typeof(j)!="function"&&typeof(window[h._validate[l]])=="function"){j=window[h._validate[l]]}g=((typeof(j)=="function"?j(m,h._idd):new RegExp(h._validate[l]).test(m))&&g);j=null}}if(!(h.callEvent("onValidate"+(g?"Success":"Error"),[h._idd,m,g])===false)){h.getForm().setValidateCss(h._idd,g)}return g}}}this._locked=false;this._doLock=function(g){var a=(g===true?true:false);if(this._locked==a){return}else{this._locked=a}this._autoCheck(!this._locked)};this.lock=function(){this._doLock(true)};this.unlock=function(){this._doLock(false)};this.isLocked=function(){return this._locked};this.setNumberFormat=function(j,g,a,h){return this.doWithItem(j,"setNumberFormat",g,a,h)};window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:true,data:true});window.dhx4._eventable(this);this.attachEvent("_onButtonClick",function(a,g){this.callEvent("onButtonClick",[a,g])});this._updateBlocks=function(){this.forEachItem(function(a){if(c.getItemType(a)=="block"||c.getItemType(a)=="combo"){c.doWithItem(a,"_setCss",c.skin,c.cont.style.fontSize)}})};this._isObj=function(a){return(a!=null&&typeof(a)=="object"&&typeof(a.length)=="undefined")};this._copyObj=function(j){if(this._isObj(j)){var h={};for(var g in j){if(typeof(j[g])=="object"&&j[g]!=null){h[g]=this._copyObj(j[g])}else{h[g]=j[g]}}}else{var h=[];for(var g=0;g<j.length;g++){if(typeof(j[g])=="object"&&j[g]!=null){h[g]=this._copyObj(j[g])}else{h[g]=j[g]}}}return h};if(d!=null&&typeof(d)=="object"){this._initObj(this._copyObj(d))}if(this._parentForm){this._updateBlocks()}this._ccActive=false;this._ccTm=null;return this}dhtmlXForm.prototype.getInput=function(a){return this.doWithItem(a,"getInput")};dhtmlXForm.prototype.getSelect=function(a){return this.doWithItem(a,"getSelect")};dhtmlXForm.prototype.items={};dhtmlXForm.prototype.items.checkbox={render:function(a,b){a._type="ch";a._enabled=true;a._checked=false;a._value=(typeof(b.value)=="undefined"?null:String(b.value));a._ro=(b.readonly==true);if(b._autoInputWidth!==false){b.inputWidth=14}this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","TEXT",true,true,"dhxform_textarea");a.childNodes[a._ll?1:0].className+=" dhxform_img_node";var c=document.createElement("DIV");c.className="dhxform_img chbx0";a.appendChild(c);if(!isNaN(b.inputLeft)){a.childNodes[a._ll?1:0].style.left=parseInt(b.inputLeft)+"px"}if(!isNaN(b.inputTop)){a.childNodes[a._ll?1:0].style.top=parseInt(b.inputTop)+"px"}a.childNodes[a._ll?1:0].appendChild(c);a.childNodes[a._ll?1:0].firstChild.value=String(b.value);a._updateImgNode=function(e,f){var d=e.childNodes[e._ll?1:0].lastChild;d.className=(f?"dhxform_actv_c":"dhxform_img")+" "+(e._checked?"chbx1":"chbx0");e=d=null};a._doOnFocus=function(d){d.getForm().callEvent("onFocus",[d._idd])};a._doOnBlur=function(d){d.getForm().callEvent("onBlur",[d._idd])};a._doOnKeyUpDown=function(e,d){this.callEvent(e,[this.childNodes[this._ll?0:1].childNodes[0],d,this._idd])};if(b.checked==true){this.check(a)}if(b.hidden==true){this.hide(a)}if(b.disabled==true){this.userDisable(a)}this.doAttachEvents(a);return this},destruct:function(a){a._doOnFocus=a._doOnBlur=a._updateImgNode=null;this.doUnloadNestedLists(a);this.doDestruct(a)},doAddLabel:function(b,c){var a=document.createElement("DIV");a.className="dhxform_label "+c.labelAlign;if(c.wrap==true){a.style.whiteSpace="normal"}if(b._ll){b.insertBefore(a,b.firstChild)}else{b.appendChild(a)}if(typeof(c.tooltip)!="undefined"){a.title=c.tooltip}a.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+c.label+(c.info?"<span class='dhxform_info'>[?]</span>":"")+(b._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>";if(!isNaN(c.labelWidth)){a.firstChild.style.width=parseInt(c.labelWidth)+"px"}if(!isNaN(c.labelHeight)){a.firstChild.style.height=parseInt(c.labelHeight)+"px"}if(!isNaN(c.labelLeft)){a.style.left=parseInt(c.labelLeft)+"px"}if(!isNaN(c.labelTop)){a.style.top=parseInt(c.labelTop)+"px"}},doAddInput:function(o,d,b,j,l,e,f){var a=document.createElement("DIV");a.className="dhxform_control";if(o._ll){o.appendChild(a)}else{o.insertBefore(a,o.firstChild)}var n=document.createElement(b);n.className=f;n.name=o._idd;n._idd=o._idd;n.id=d.uid;if(typeof(j)=="string"){n.type=j}if(b=="INPUT"||b=="TEXTAREA"){n.onkeyup=function(q){q=q||event;o.callEvent("onKeyUp",[this,q,this._idd])};n.onkeydown=function(q){q=q||event;o.callEvent("onKeyDown",[this,q,this._idd])}}if(b=="SELECT"&&d.type=="select"&&o.getForm().skin=="material"){if(window.dhx4.isOpera||window.dhx4.isChrome){n.className+=" dhxform_arrow_fix_webkit"}else{if(window.dhx4.isEdge){n.className+=" dhxform_arrow_fix_edge"}else{if(window.dhx4.isFF){n.className+=" dhxform_fix_ff"}}}}a.appendChild(n);if(l){if(!isNaN(d.inputLeft)){a.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){a.style.top=parseInt(d.inputTop)+"px"}}var m="";var g=false;if(e){if(!isNaN(d.inputWidth)){m+="width:"+parseInt(d.inputWidth)+"px;";g=true}if(!isNaN(d.inputHeight)){m+="height:"+parseInt(d.inputHeight)+"px;"}}if(typeof(d.style)=="string"){m+=d.style}n.style.cssText=m;if(d.maxLength){n.setAttribute("maxLength",d.maxLength)}if(d.connector){n.setAttribute("connector",d.connector)}var c=(dhtmlXForm.prototype.items[this.t]!=null?dhtmlXForm.prototype.items[this.t]._dimFix==true:false);if(g&&({input:1,password:1,select:1,multiselect:1,calendar:1,colorpicker:1}[this.t]==1||c)){if(dhtmlXForm.prototype.items[this.t]._dim==null){dhtmlXForm.prototype.items[this.t]._dim=o.getForm()._checkDim(a,n)}n.style.width=parseInt(n.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"}if(typeof(d.note)=="object"){var h=document.createElement("DIV");h.className="dhxform_note";h.style.width=(isNaN(d.note.width)?n.offsetWidth:parseInt(d.note.width))+"px";h._w=d.note.width;h.innerHTML=d.note.text;a.appendChild(h);h=null}if(d.readonly){this.setReadonly(o,true)}if(d.disabled==true){this.userDisable(o)}if(d.hidden==true&&this.t!="combo"){this.hide(o)}},doUnloadNestedLists:function(a){if(!a._list){return}for(var b=0;b<a._list.length;b++){a._list[b].unload();a._list[b]=null;a._listObj[b]=null;a._listBase[b].parentNode.removeChild(a._listBase[b]);a._listBase[b]=null}a._list=null;a._listObj=null;a._listBase=null},doDestruct:function(a){a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._group=null;a.onselectstart=null;a.childNodes[a._ll?1:0].onmousedown=null;a.childNodes[a._ll?1:0].ontouchstart=null;a.childNodes[a._ll?0:1].onmousedown=null;a.childNodes[a._ll?0:1].ontouchstart=null;a.childNodes[a._ll?0:1].childNodes[0].onfocus=null;a.childNodes[a._ll?0:1].childNodes[0].onblur=null;a.childNodes[a._ll?0:1].childNodes[0].onkeypress=null;a.childNodes[a._ll?0:1].childNodes[0].onkeyup=null;a.childNodes[a._ll?0:1].childNodes[0].onkeydown=null;a.childNodes[a._ll?0:1].childNodes[0].onmousedown=null;a.childNodes[a._ll?0:1].childNodes[0].ontouchstart=null;a.childNodes[a._ll?0:1].removeChild(a.childNodes[a._ll?0:1].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAttachEvents:function(b){var a=this;b.childNodes[b._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}var c=(d.target||d.srcElement);if(!this.parentNode._enabled||this.parentNode._ro||(typeof(c.className)!="undefined"&&c.className=="dhxform_note")){d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false}a.doClick(this.parentNode)};b.childNodes[b._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}if(!this.parentNode.parentNode._enabled){d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false}var c=d.target||d.srcElement;if(typeof(c.className)!="undefined"&&c.className=="dhxform_info"){this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,d]);d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false}a.doClick(this.parentNode.parentNode)}},doClick:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus();if(!a._enabled||a._ro){return}if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._checked])!==true){return}}this.setChecked(a,!a._checked);a._autoCheck();a.callEvent("onChange",[a._idd,a._value,a._checked])},doCheckValue:function(a){if(a._checked&&a._enabled){a.childNodes[a._ll?1:0].firstChild.name=String(a._idd);a.childNodes[a._ll?1:0].firstChild.value=this.getValue(a)}else{a.childNodes[a._ll?1:0].firstChild.name="";a.childNodes[a._ll?1:0].firstChild.value=""}},setChecked:function(a,b){a._checked=(b===true?true:false);a.childNodes[a._ll?1:0].lastChild.className=a.childNodes[a._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(a._checked?" chbx1":" chbx0");this.doCheckValue(a)},check:function(a){this.setChecked(a,true)},unCheck:function(a){this.setChecked(a,false)},isChecked:function(a){return a._checked},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?0:1].childNodes[0].tabIndex=0;a.childNodes[a._ll?0:1].childNodes[0].removeAttribute("disabled");this.doCheckValue(a)},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;if(a._updateImgNode!=null){a._updateImgNode(a,false)}a.childNodes[a._ll?0:1].childNodes[0].tabIndex=-1;a.childNodes[a._ll?0:1].childNodes[0].setAttribute("disabled","true");this.doCheckValue(a)},isEnabled:function(a){return a._enabled},setText:function(a,b){a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(a,b){this.setChecked(a,(b===true||parseInt(b)==1||b=="true"||a._value===b))},getValue:function(a,b){if(b=="realvalue"){return a._value}return((typeof(a._value)=="undefined"||a._value==null)?(a._checked?1:0):a._value)},setReadonly:function(a,b){a._ro=(b===true)},isReadonly:function(a){return a._ro},setFocus:function(a){a.childNodes[a._ll?0:1].childNodes[0].focus()}};dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(c,d,b){c._type="ra";c._enabled=true;c._checked=false;c._group=d.name;c._value=d.value;c._uid=b;c._ro=(d.readonly==true);c._rName=c._rId+c._group;this.r[c._idd]=c;d.inputWidth=14;this.doAddLabel(c,d);this.doAddInput(c,d,"INPUT","TEXT",true,true,"dhxform_textarea");c.childNodes[c._ll?1:0].className+=" dhxform_img_node";var e=document.createElement("DIV");e.className="dhxform_img rdbt0";c.appendChild(e);if(!isNaN(d.inputLeft)){c.childNodes[c._ll?1:0].style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){c.childNodes[c._ll?1:0].style.top=parseInt(d.inputTop)+"px"}c.childNodes[c._ll?1:0].appendChild(e);c.childNodes[c._ll?1:0].firstChild.name="";c.childNodes[c._ll?1:0].firstChild.value="";c._updateImgNode=function(g,h){var f=g.childNodes[g._ll?1:0].lastChild;f.className=(h?"dhxform_actv_r":"dhxform_img")+" "+(g._checked?"rdbt1":"rdbt0");g=f=null};c._doOnFocus=function(f){f.getForm().callEvent("onFocus",[f._group,f._value])};c._doOnBlur=function(f){f.getForm().callEvent("onBlur",[f._group,f._value])};c._doOnKeyUpDown=function(g,f){this.callEvent(g,[this.childNodes[this._ll?0:1].childNodes[0],f,this._group,this._value])};if(this.input[c._rName]==null){var a=document.createElement("INPUT");a.type="HIDDEN";a.name=d.name;a.firstValue=c._value;c.appendChild(a);this.input[c._rName]=a}if(!this.firstValue[c._rName]){this.firstValue[c._rName]=d.value}if(d.checked==true){this.check(c)}if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}this.doAttachEvents(c);return this},destruct:function(d,e){if(d.lastChild==this.input[d._rName]){var c=false;for(var b in this.r){if(!c&&this.r[b]._group==d._group&&this.r[b]._idd!=d._idd){this.r[b].appendChild(this.input[d._rName]);c=true}}if(!c){this.input[d._rName].parentNode.removeChild(this.input[d._rName]);this.input[d._rName]=null;this.firstValue[d._rName]=null}}this.r[d._idd]=null;delete this.r[d._idd];d._doOnFocus=d._doOnBlur=d._updateImgNode=null;this.doUnloadNestedLists(d);this.doDestruct(d);var f=d._idd;d=null;return f},doClick:function(b){b.childNodes[b._ll?0:1].childNodes[0].focus();if(!(b._enabled&&!b._checked)){return}if(b._ro){return}var a=[b._group,b._value,true];if(b.checkEvent("onBeforeChange")){if(b.callEvent("onBeforeChange",a)!==true){return}}this.setChecked(b,true);b.getForm()._autoCheck();b.callEvent("onChange",a)},doCheckValue:function(c){var d=null;for(var b in this.r){if(this.r[b]._checked&&this.r[b]._group==c._group&&this.r[b]._rId==c._rId){d=this.r[b]._value}}if(d!=null&&this.r[b]._enabled){this.input[c._rName].name=String(c._group);this.input[c._rName].value=d}else{this.input[c._rName].name="";this.input[c._rName].value=""}this.input[c._rName]._value=d},setChecked:function(e,f){f=(f===true);for(var b in this.r){if(this.r[b]._group==e._group&&this.r[b]._rId==e._rId){var d=false;if(this.r[b]._idd==e._idd){if(this.r[b]._checked!=f){this.r[b]._checked=f;d=true}}else{if(this.r[b]._checked){this.r[b]._checked=false;d=true}}if(d){var c=this.r[b].childNodes[this.r[b]._ll?1:0].childNodes[1];c.className=c.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[b]._checked?" rdbt1":" rdbt0");c=null}}}this.doCheckValue(e)},getChecked:function(a){return this.input[a._rName]._value},_getFirstValue:function(a){return this.firstValue[a._rName]},_getId:function(a){return a._idd},setValue:function(a,b){}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1}){dhtmlXForm.prototype.items.radio[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.select={render:function(a,b){a._type="se";a._enabled=true;a._value=null;a._newValue=null;this.doAddLabel(a,b);this.doAddInput(a,b,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(a);this.doLoadOpts(a,b);if(b.connector!=null){this.doLoadOptsConnector(a,b.connector)}if(typeof(b.value)!="undefined"&&b.value!=null){this.setValue(a,b.value)}return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._enabled=null;a._idd=null;a._type=null;a._value=null;a._newValue=null;a.onselectstart=null;a.childNodes[a._ll?1:0].childNodes[0].onclick=null;a.childNodes[a._ll?1:0].childNodes[0].onkeydown=null;a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a.childNodes[a._ll?1:0].childNodes[0].onfocus=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;a.childNodes[a._ll?1:0].childNodes[0].onkeyup=null;a.childNodes[a._ll?1:0].removeChild(a.childNodes[a._ll?1:0].childNodes[0]);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},doAddLabel:function(b,c){var a=document.createElement("DIV");a.className="dhxform_label "+c.labelAlign;a.innerHTML="<label for='"+c.uid+"'>"+c.label+(c.info?"<span class='dhxform_info'>[?]</span>":"")+(b._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>";if(c.wrap==true){a.style.whiteSpace="normal"}if(typeof(c.tooltip)!="undefined"){a.title=c.tooltip}b.appendChild(a);if(typeof(c.label)=="undefined"||c.label==null||c.label.length==0){a.style.display="none"}if(!isNaN(c.labelWidth)){a.style.width=parseInt(c.labelWidth)+"px"}if(!isNaN(c.labelHeight)){a.style.height=parseInt(c.labelHeight)+"px"}if(!isNaN(c.labelLeft)){a.style.left=parseInt(c.labelLeft)+"px"}if(!isNaN(c.labelTop)){a.style.top=parseInt(c.labelTop)+"px"}if(c.info){a.onclick=function(f){f=f||event;var d=f.target||f.srcElement;if(typeof(d.className)!="undefined"&&d.className=="dhxform_info"){this.parentNode.callEvent("onInfo",[this.parentNode._idd,f]);f.cancelBubble=true;if(f.preventDefault){f.preventDefault()}else{f.returnValue=false}return false}}}},doAttachEvents:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];var b=this;a.onclick=function(){b.doOnChange(this)};a.onkeydown=function(d){d=d||event;b.doOnChange(this);this.parentNode.parentNode.callEvent("onKeyDown",[this,d,this.parentNode.parentNode._idd])};a.onchange=function(){b.doOnChange(this)};a.onkeyup=function(d){d=d||event;this.parentNode.parentNode.callEvent("onKeyUp",[this,d,this.parentNode.parentNode._idd])};a=null;this.doAttachChangeLS(c)},doAttachChangeLS:function(b){var a=b.childNodes[b._ll?1:0].childNodes[0];a.onfocus=function(){var c=this.parentNode.parentNode;c.getForm()._ccActivate(c._idd,this,c.getForm().getItemValue(c._idd,true));c.getForm().callEvent("onFocus",[c._idd]);c=null};a.onblur=function(){var c=this.parentNode.parentNode;c.getForm()._ccDeactivate(c._idd);c.getForm().callEvent("onBlur",[c._idd]);c=null};a=null},doValidate:function(a){if(a.getForm().live_validate){this._validate(a)}},doLoadOpts:function(g,e,j){var h=g.childNodes[g._ll?1:0].childNodes[0];var a=e.options;var d=false;for(var b=0;b<a.length;b++){var f=a[b].text||a[b].label;if(!f||typeof(f)=="undefined"){f=""}var c=new Option(f,a[b].value);if(typeof(a[b].img_src)=="string"){c.setAttribute("img_src",a[b].img_src)}h.options.add(c);if(typeof(a[b].selected)!="undefined"&&window.dhx4.s2b(a[b].selected)==true){c.selected=true;g._value=a[b].value;d=true}if(typeof(a[b].checked)!="undefined"&&window.dhx4.s2b(a[b].checked)==true){c.setAttribute("checked","1")}if(typeof(a[b].img)!="undefined"){c.setAttribute("img",a[b].img)}if(typeof(a[b].img_dis)!="undefined"){c.setAttribute("img_dis",a[b].img_dis)}if(typeof(a[b].css)!="undefined"){c.setAttribute("css",a[b].css)}}if(!d&&h.selectedIndex>=0){g._value=h.options[h.selectedIndex].value}if(j===true){g.callEvent("onOptionsLoaded",[g._idd])}this._checkNoteWidth(g)},doLoadOptsConnector:function(c,a){var b=this;c._connector_working=true;window.dhx4.ajax.get(a,function(g){g=g.xmlDoc.responseXML;if(g==null){return}var d=g.getElementsByTagName("data");if(d==null||d[0]==null){return}d=d[0];var f=[];for(var h=0;h<d.childNodes.length;h++){if(typeof(d.childNodes[h].tagName)!="undefined"&&String(d.childNodes[h].tagName).toLowerCase()=="item"){var e=d.childNodes[h];f.push({label:e.getAttribute("label"),value:e.getAttribute("value"),selected:(e.getAttribute("selected")!=null)});e=null}}b.doLoadOpts(c,{options:f},true);c._connector_working=false;if(c._connector_value!=null){b.setValue(c,c._connector_value);c._connector_value=null}b=c=null})},doOnChange:function(c){var a=c.parentNode.parentNode;a._newValue=(c.selectedIndex>=0?c.options[c.selectedIndex].value:null);if(a._newValue!=a._value){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,a._value,a._newValue])!==true){for(var b=0;b<c.options.length;b++){if(c.options[b].value==a._value){c.options[b].selected=true}}return}}a._value=a._newValue;a.callEvent("onChange",[a._idd,a._value]);if(a._type=="se"&&a.getForm().live_validate){this._validate(a)}}a._autoCheck()},setText:function(a,b){if(!b){b=""}a.childNodes[a._ll?0:1].childNodes[0].innerHTML=b+(a._required?"<span class='dhxform_item_required'>*</span>":"");a.childNodes[a._ll?0:1].style.display=(b.length==0||b==null?"none":"")},getText:function(a){return a.childNodes[a._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[a._ll?1:0].childNodes[0].setAttribute("disabled",true)},getOptions:function(a){return a.childNodes[a._ll?1:0].childNodes[0].options},setValue:function(b,d){if(b._connector_working){b._connector_value=d;return}var a=this.getOptions(b);for(var c=0;c<a.length;c++){if(a[c].value==d){a[c].selected=true;b._value=a[c].value}}if(b._list!=null&&b._list.length>0){b.getForm()._autoCheck()}b.getForm()._ccReload(b._idd,b._value)},getValue:function(c){var a=-1;var b=this.getOptions(c);for(var d=0;d<b.length;d++){if(b[d].selected){a=b[d].value}}return a},setWidth:function(b,a){b.childNodes[b._ll?1:0].childNodes[0].style.width=a+"px"},getSelect:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setFocus:function(a){a.childNodes[a._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(b){var a;if(b.childNodes[b._ll?1:0].childNodes[1]!=null){a=b.childNodes[b._ll?1:0].childNodes[1];if(a.className!=null&&a.className.search(/dhxform_note/gi)>=0&&a._w=="auto"){a.style.width=b.childNodes[b._ll?1:0].childNodes[0].offsetWidth+"px"}}a=null}};(function(){for(var b in {doAddInput:1,doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.select[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(d,f,g){var b=d.childNodes[d._ll?1:0].childNodes[0];b.multiple=true;if(!isNaN(f.size)){b.size=Number(f.size)}d._value=[];d._newValue=[];var c=f.options;for(var e=0;e<c.length;e++){var a=new Option(c[e].text||c[e].label,c[e].value);b.options.add(a);if(c[e].selected==true||c[e].selected=="true"){a.selected=true;d._value.push(c[e].value)}}if(g===true){d.callEvent("onOptionsLoaded",[d._idd])}this._checkNoteWidth(d)},doAttachEvents:function(c){var a=c.childNodes[c._ll?1:0].childNodes[0];var b=this;a.onfocus=function(){b.doOnChange(this);var d=this.parentNode.parentNode;d.getForm().callEvent("onFocus",[d._idd]);d=null};a.onblur=function(){b.doOnChange(this);var d=this.parentNode.parentNode;d.getForm().callEvent("onBlur",[d._idd]);d=null};a.onclick=function(){b.doOnChange(this);var d=this.parentNode.parentNode;d._autoCheck();d=null}},doOnChange:function(d){var b=d.parentNode.parentNode;b._newValue=[];for(var c=0;c<d.options.length;c++){if(d.options[c].selected){b._newValue.push(d.options[c].value)}}if((b._value).sort().toString()!=(b._newValue).sort().toString()){if(b.checkEvent("onBeforeChange")){if(b.callEvent("onBeforeChange",[b._idd,b._value,b._newValue])!==true){var a={};for(var c=0;c<b._value.length;c++){a[b._value[c]]=true}for(var c=0;c<d.options.length;c++){d.options[c].selected=(a[d.options[c].value]==true)}a=null;return}}b._value=[];for(var c=0;c<b._newValue.length;c++){b._value.push(b._newValue[c])}b.callEvent("onChange",[b._idd,b._value])}b._autoCheck()},setValue:function(c,e){var a={};if(typeof(e)=="string"){e=e.split(",")}if(typeof(e)!="object"){e=[e]}for(var d=0;d<e.length;d++){a[e[d]]=true}var b=this.getOptions(c);for(var d=0;d<b.length;d++){b[d].selected=(a[b[d].value]==true)}c._autoCheck()},getValue:function(c){var a=[];var b=this.getOptions(c);for(var d=0;d<b.length;d++){if(b[d].selected){a.push(b[d].value)}}return a}};(function(){for(var b in dhtmlXForm.prototype.items.select){if(!dhtmlXForm.prototype.items.multiselect[b]){dhtmlXForm.prototype.items.multiselect[b]=dhtmlXForm.prototype.items.select[b]}}})();dhtmlXForm.prototype.items.input={render:function(g,h){var f=(!isNaN(h.rows));g._type="ta";g._enabled=true;this.doAddLabel(g,h);this.doAddInput(g,h,(f?"TEXTAREA":"INPUT"),(f?null:"TEXT"),true,true,"dhxform_textarea");this.doAttachEvents(g);if(f){g.childNodes[g._ll?1:0].childNodes[0].rows=Number(h.rows)+(window.dhx4.isIE6?1:0)}if(typeof(h.numberFormat)!="undefined"){var e,d=null,j=null;if(typeof(h.numberFormat)!="string"){e=h.numberFormat[0];d=h.numberFormat[1]||null;j=h.numberFormat[2]||null}else{e=h.numberFormat;if(typeof(h.groupSep)=="string"){d=h.groupSep}if(typeof(h.decSep)=="string"){j=h.decSep}}this.setNumberFormat(g,e,d,j,false)}this.setValue(g,h.value);return this},doAttachEvents:function(c){var b=c.childNodes[c._ll?1:0].childNodes[0];if(typeof(b.tagName)!="undefined"&&{input:1,textarea:1,select:1}[b.tagName.toLowerCase()]==1){var a=this;b.onfocus=function(){var d=this.parentNode.parentNode;if(d._df!=null){this.value=d._value||""}d.getForm()._ccActivate(d._idd,this,this.value);d.getForm().callEvent("onFocus",[d._idd]);d=null};b.onblur=function(){var d=this.parentNode.parentNode;d.getForm()._ccDeactivate(d._idd);a.updateValue(d,true);if(d.getForm().live_validate){a._validate(d)}d.getForm().callEvent("onBlur",[d._idd]);d=null}}b=null},updateValue:function(e,a){var f=e.childNodes[e._ll?1:0].childNodes[0].value;var d=e.getForm();var b=(d._ccActive==true&&d._formLS!=null&&d._formLS[e._idd]!=null);d=null;if(!b&&e._df!=null&&f==window.dhx4.template._getFmtValue(e._value,e._df)){return}if(!a&&e._df!=null&&e._value==f&&f==window.dhx4.template._getFmtValue(f,e._df)){return}var c=this;if(e._value!=f){if(e.checkEvent("onBeforeChange")){if(e.callEvent("onBeforeChange",[e._idd,e._value,f])!==true){if(e._df!=null){c.setValue(e,e._value)}else{e.childNodes[e._ll?1:0].childNodes[0].value=e._value}return}}if(e._df!=null&&a){c.setValue(e,f)}else{e._value=f}e.callEvent("onChange",[e._idd,f]);return}if(e._df!=null&&a){this.setValue(e,e._value)}},setValue:function(c,d){c._value=(typeof(d)!="undefined"&&d!=null?d:"");var b=(String(c._value)||"");var a=c.childNodes[c._ll?1:0].childNodes[0];if(c._df!=null){b=window.dhx4.template._getFmtValue(b,c._df)}if(a.value!=b){a.value=b;c.getForm()._ccReload(c._idd,b)}a=null},getValue:function(a){var b=a.getForm();if(b._formLS&&b._formLS[a._idd]!=null){this.updateValue(a)}b=null;return(typeof(a._value)!="undefined"&&a._value!=null?a._value:"")},setReadonly:function(a,b){a._ro=(b===true);if(a._ro){a.childNodes[a._ll?1:0].childNodes[0].setAttribute("readOnly","true")}else{a.childNodes[a._ll?1:0].childNodes[0].removeAttribute("readOnly")}},isReadonly:function(a){if(!a._ro){a._ro=false}return a._ro},getInput:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},setNumberFormat:function(d,e,c,f,b){if(typeof(b)!="boolean"){b=true}if(e==""){d._df=null;if(b){this.setValue(d,d._value)}return true}if(typeof(e)!="string"){return}var a=window.dhx4.template._parseFmt(e,c,f);if(a==false){return false}else{d._df=a}if(b){this.setValue(d,d._value)}return true}};(function(){for(var b in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1}){dhtmlXForm.prototype.items.input[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype.items.password={render:function(a,b){a._type="pw";a._enabled=true;this.doAddLabel(a,b);this.doAddInput(a,b,"INPUT","PASSWORD",true,true,"dhxform_textarea");this.doAttachEvents(a);this.setValue(a,b.value);return this}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.password[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.file={render:function(c,d){c._type="fl";c._enabled=true;this.doAddLabel(c,d);this.doAddInput(c,d,"INPUT","FILE",true,false,"dhxform_textarea");var a=c.childNodes[c._ll?1:0].childNodes[0];var b=this;a.onfocus=function(){var e=this.parentNode.parentNode;e.getForm().callEvent("onFocus",[e._idd]);e=null};a.onblur=function(){var e=this.parentNode.parentNode;if(e.getForm().live_validate){b._validate(e)}e.getForm().callEvent("onBlur",[e._idd]);e=null};a=null;c.childNodes[c._ll?1:0].childNodes[0].onchange=function(){c.callEvent("onChange",[c._idd,this.value])};return this},setValue:function(){},getValue:function(a){return a.childNodes[a._ll?1:0].childNodes[0].value}};(function(){for(var b in {doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,getInput:1,enable:1,disable:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.file[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.label={_index:false,render:function(b,c){b._type="lb";b._enabled=true;b._checked=true;var a=document.createElement("DIV");a.className="dhxform_txt_label2"+(c._isTopmost?" topmost":"");a.innerHTML=c.label;b.appendChild(a);if(c.hidden==true){this.hide(b)}if(c.disabled==true){this.userDisable(b)}if(!isNaN(c.labelWidth)){a.style.width=parseInt(c.labelWidth)+"px"}if(!isNaN(c.labelHeight)){a.style.height=parseInt(c.labelHeight)+"px"}if(!isNaN(c.labelLeft)){a.style.left=parseInt(c.labelLeft)+"px"}if(!isNaN(c.labelTop)){a.style.top=parseInt(c.labelTop)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._autoCheck=null;a._enabled=null;a._type=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.onselectstart=null;a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false},setText:function(a,b){a.firstChild.innerHTML=b},getText:function(a){return a.firstChild.innerHTML}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.label[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.button={render:function(b,c){b._type="bt";b._enabled=true;b._name=c.name;b.className=String(b.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left");b._doOnKeyUpDown=function(e,d){this.callEvent(e,[this.childNodes[0].childNodes[0],d,this._idd])};b.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt">'+c.value+'</div><div class="dhxform_btn_filler" disabled="true"></div></div>';if(!isNaN(c.width)){var a=Math.max(c.width,10);if(dhtmlXForm.prototype.items[this.t]._dim==null){b.firstChild.style.width=a+"px";dhtmlXForm.prototype.items[this.t]._dim=b.getForm()._checkDim(b,b.firstChild)}b.firstChild.style.width=a-dhtmlXForm.prototype.items[this.t]._dim+"px";b.firstChild.firstChild.className+=" dhxform_btn_txt_autowidth"}if(!isNaN(c.inputLeft)){b.childNodes[0].style.left=parseInt(c.inputLeft)+"px"}if(!isNaN(c.inputTop)){b.childNodes[0].style.top=parseInt(c.inputTop)+"px"}if(c.hidden==true){this.hide(b)}if(c.disabled==true){this.userDisable(b)}if(typeof(c.tooltip)!="undefined"){b.firstChild.title=c.tooltip}b.onselectstart=function(d){d=d||event;d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false};b.firstChild.onselectstart=function(d){d=d||event;d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}return false};b.firstChild.onkeypress=function(d){d=d||event;if((d.keyCode==32||d.charCode==32||d.keyCode==13||d.charCode==13)&&!this.parentNode._busy){this.parentNode._busy=true;d.cancelBubble=true;if(d.preventDefault){d.preventDefault()}else{d.returnValue=false}_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]);return false}};b.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)};b.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout");this.parentNode._doOnBlur(this.parentNode)};b.firstChild.onkeyup=function(d){this.parentNode._doOnKeyUpDown("onKeyUp",d||event)};b.firstChild.onkeydown=function(d){this.parentNode._doOnKeyUpDown("onKeyDown",d||event)};b.firstChild.onmouseover=function(){var d=this.parentNode;if(!d._enabled){return}this._isOver=true;this.className="dhxform_btn dhxform_btn_over";d=null};b.firstChild.onmouseout=function(){var d=this.parentNode;if(!d._enabled){return}this.className="dhxform_btn";this._allowClick=false;this._pressed=false;this._isOver=false;d=null};b.firstChild.ontouchstart=b.firstChild.onmousedown=function(f){f=f||event;if(f.type=="touchstart"&&f.preventDefault){f.preventDefault()}if(f.button>=2){return}if(this._pressed){return}var d=this.parentNode;if(!d._enabled){return}this.className="dhxform_btn dhxform_btn_pressed";this._allowClick=true;this._pressed=true;d=null};b.firstChild.ontouchend=b.firstChild.onmouseup=function(f){f=f||event;if(f.button>=2){return}if(!this._pressed){return}var d=this.parentNode;if(!d._enabled){return}d._busy=false;this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":"");if(this._pressed&&this._allowClick){d.callEvent("_onButtonClick",[d._name,d._cmd])}this._allowClick=false;this._pressed=false;d=null};b._doOnFocus=function(d){d.getForm().callEvent("onFocus",[d._idd])};b._doOnBlur=function(d){d.getForm().callEvent("onBlur",[d._idd])};return this},destruct:function(a){this.doUnloadNestedLists(a);a.callEvent=null;a.checkEvent=null;a.getForm=null;a._autoCheck=null;a._type=null;a._enabled=null;a._cmd=null;a._name=null;a._doOnFocus=null;a._doOnBlur=null;a._doOnKeyUpDown=null;a.onselectstart=null;a.firstChild.onselectstart=null;a.firstChild.onkeypress=null;a.firstChild.ontouchstart=null;a.firstChild.ontouchend=null;a.firstChild.onfocus=null;a.firstChild.onblur=null;a.firstChild.onkeyup=null;a.firstChild.onkeydown=null;a.firstChild.onmouseover=null;a.firstChild.onmouseout=null;a.firstChild.onmousedown=null;a.firstChild.onmouseup=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a.childNodes[0].removeAttribute("disabled");a.childNodes[0].setAttribute("role","link");a.childNodes[0].setAttribute("tabIndex","0")},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a.childNodes[0].setAttribute("disabled","true");a.childNodes[0].removeAttribute("role");a.childNodes[0].removeAttribute("tabIndex")},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},setFocus:function(a){a.childNodes[0].focus()}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.button[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.hidden={_index:false,render:function(b,c){b.style.display="none";b._name=c.name;b._type="hd";b._enabled=true;var a=document.createElement("INPUT");a.type="HIDDEN";a.name=c.name;a.value=(c.value||"");b.appendChild(a);return this},destruct:function(a){this.doUnloadNestedLists(a);while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a._autoCheck=null;a._name=null;a._type=null;a._enabled=null;a.onselectstart=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;a.parentNode.removeChild(a);a=null},enable:function(a){a._enabled=true;a.childNodes[0].setAttribute("name",a._name)},disable:function(a){a._enabled=false;a.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return true},setValue:function(a,b){a.childNodes[0].value=b},getValue:function(a){return a.childNodes[0].value},getInput:function(a){return a.childNodes[0]}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.hidden[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.list={_index:false,render:function(a,b){a._type="list";a._enabled=true;a._isNestedForm=true;a.style.paddingLeft=a._ofsNested+"px";a.className="dhxform_base_nested"+(a._custom_css||"");return[this,new dhtmlXForm(a,null,b)]},destruct:function(a){}};dhtmlXForm.prototype.items.fieldset={_index:false,render:function(b,d){b._type="fs";if(typeof(parseInt(d.inputWidth))=="number"){}b._width=d.width;b._enabled=true;b._checked=true;b.className="fs_"+d.position+(typeof(d.className)=="string"?" "+d.className:"");var c=document.createElement("FIELDSET");c.className="dhxform_fs";var e=String(d.labelAlign).replace("align_","");c.innerHTML="<legend class='fs_legend' align='"+e+"' style='text-align:"+e+"'>"+d.label+"</legend>";b.appendChild(c);if(!isNaN(d.inputLeft)){c.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){c.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){c.style.width=parseInt(d.inputWidth)+"px";var a=parseInt(c.style.width);if(c.offsetWidth>a){c.style.width=a+(a-c.offsetWidth)+"px"}}}b._addSubListNode=function(){var f=document.createElement("DIV");f._custom_css=" dhxform_fs_nested";this.childNodes[0].appendChild(f);return f};if(d.hidden==true){this.hide(b)}if(d.disabled==true){this.userDisable(b)}return this},destruct:function(a){this.doUnloadNestedLists(a);a._checked=null;a._enabled=null;a._idd=null;a._type=null;a._width=null;a.onselectstart=null;a._addSubListNode=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,b){a.childNodes[0].childNodes[0].innerHTML=b},getText:function(a){return a.childNodes[0].childNodes[0].innerHTML},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}},setWidth:function(b,a){b.childNodes[0].style.width=a+"px";b._width=a},getWidth:function(a){return a._width}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.fieldset[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.items.block={_index:false,render:function(c,d){c._type="bl";c._width=d.width;c._enabled=true;c._checked=true;c.className="block_"+d.position+(typeof(d.className)=="string"?" "+d.className:"");var a=document.createElement("DIV");a.className="dhxform_obj_"+c.getForm().skin+" dhxform_block";a.style.fontSize=c.getForm().cont.style.fontSize;if(d.style){a.style.cssText=d.style}if(typeof(d.id)!="undefined"){a.id=d.id}c.appendChild(a);if(!isNaN(d.inputLeft)){a.style.left=parseInt(d.inputLeft)+"px"}if(!isNaN(d.inputTop)){a.style.top=parseInt(d.inputTop)+"px"}if(d.inputWidth!="auto"){if(!isNaN(d.inputWidth)){a.style.width=parseInt(d.inputWidth)+"px"}}if(!isNaN(d.blockOffset)){c._ofsNested=d.blockOffset}c._addSubListNode=function(){var b=document.createElement("DIV");b._inBlcok=true;if(typeof(this._ofsNested)!="undefined"){b._ofsNested=this._ofsNested}this.childNodes[0].appendChild(b);return b};if(d.hidden==true){this.hide(c)}if(d.disabled==true){this.userDisable(c)}return this},_setCss:function(a,c,b){a.firstChild.className="dhxform_obj_"+c+" dhxform_block";a.firstChild.style.fontSize=b}};(function(){for(var b in {enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1}){dhtmlXForm.prototype.items.block[b]=dhtmlXForm.prototype.items.fieldset[b]}})();dhtmlXForm.prototype.items.newcolumn={_index:false};dhtmlXForm.prototype.items.template={render:function(b,c){var a=(!isNaN(c.rows));b._type="tp";b._enabled=true;if(c.format!=null){if(typeof(c.format)=="function"){b.format=c.format}else{if(typeof(c.format)=="string"&&typeof(window[c.format])=="function"){b.format=window[c.format]}}}if(b.format==null){b.format=function(d,e){return e}}this.doAddLabel(b,c);this.doAddInput(b,c,"DIV",null,true,true,"dhxform_item_template");this.setValue(b,c.value||"");return this},destruct:function(a){a.format=null;this.d2(a);a=null},setValue:function(a,b){a._value=b;a.childNodes[a._ll?1:0].childNodes[0].innerHTML=a.format(a._idd,a._value)},getValue:function(a){return a._value},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false}};(function(){dhtmlXForm.prototype.items.template.d2=dhtmlXForm.prototype.items.input.destruct;for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1}){dhtmlXForm.prototype.items.template[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype._ulToObject=function(f,j){var g=[];for(var b=0;b<f.childNodes.length;b++){if(String(f.childNodes[b].tagName||"").toLowerCase()=="li"){var c={};var m=f.childNodes[b];for(var l=0;l<j.length;l++){if(m.getAttribute(j[l])!=null){c[String(j[l]).replace("ftype","type")]=m.getAttribute(j[l])}}if(!c.label){try{c.label=m.firstChild.nodeValue}catch(h){}}var d=m.getElementsByTagName("UL");if(d[0]!=null){c[(c.type=="select"?"options":"list")]=dhtmlXForm.prototype._ulToObject(d[0],j)}for(var l=0;l<m.childNodes.length;l++){if(String(m.childNodes[l].tagName||"").toLowerCase()=="userdata"){if(!c.userdata){c.userdata={}}c.userdata[m.childNodes[l].getAttribute("name")]=m.childNodes[l].firstChild.nodeValue}}g[g.length]=c}if(String(f.childNodes[b].tagName||"").toLowerCase()=="div"){var c={};c.type="label";try{c.label=f.childNodes[b].firstChild.nodeValue}catch(h){}g[g.length]=c}}return g};dhtmlXForm.prototype.setUserData=function(e,c,d,a){if(typeof(a)!="undefined"){var b=this.doWithItem([e,c],"_getId");if(b!=null){e=b;c=d;d=a}}if(!this._userdata){this._userdata={}}this._userdata[e]=(this._userdata[e]||{});this._userdata[e][c]=d};dhtmlXForm.prototype.getUserData=function(d,c,a){if(typeof(a)!="undefined"){var b=this.doWithItem([d,c],"_getId");if(b!=null){d=b;c=a}}if(this._userdata!=null&&typeof(this._userdata[d])!="undefined"&&typeof(this._userdata[d][c])!="undefined"){return this._userdata[d][c]}return""};dhtmlXForm.prototype.setRTL=function(a){this._rtl=(a===true?true:false);if(this._rtl){if(String(this.cont).search(/dhxform_rtl/gi)<0){this.cont.className+=" dhxform_rtl"}}else{if(String(this.cont).search(/dhxform_rtl/gi)>=0){this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,"")}}};_dhxForm_doClick=function(d,b){if(typeof(b)=="object"){var a=b[1];b=b[0]}if(document.createEvent){var c=document.createEvent("MouseEvents");c.initEvent(b,true,false);d.dispatchEvent(c)}else{if(document.createEventObject){var c=document.createEventObject();c.button=1;d.fireEvent("on"+b,c)}}if(a){window.setTimeout(function(){_dhxForm_doClick(d,a)},100)}};dhtmlXForm.prototype.setFormData=function(c){for(var b in c){var d=this.getItemType(b);switch(d){case"checkbox":this[c[b]==true||parseInt(c[b])==1||c[b]=="true"||c[b]==this.getItemValue(b,"realvalue")?"checkItem":"uncheckItem"](b);break;case"radio":this.checkItem(b,c[b]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(b,c[b]);break;default:if(this["setFormData_"+d]){this["setFormData_"+d](b,c[b])}else{if(!this.hId){this.hId=this._genStr(12)}this.setUserData(this.hId,b,c[b])}break}}};dhtmlXForm.prototype.getFormData=function(o,g){var c={};var l=this;for(var n in this.itemPull){var j=this.itemPull[n]._idd;var s=this.itemPull[n]._type;if(s=="ch"){c[j]=(this.isItemChecked(j)?this.getItemValue(j):0)}if(s=="ra"&&!c[this.itemPull[n]._group]){c[this.itemPull[n]._group]=this.getCheckedValue(this.itemPull[n]._group)}if(s in {se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}){c[j]=this.getItemValue(j,o)}if(this["getFormData_"+s]){c[j]=this["getFormData_"+s](j)}if(s=="up"){var f=this.getItemValue(j);for(var e in f){c[e]=f[e]}}if(this.itemPull[n]._list){for(var d=0;d<this.itemPull[n]._list.length;d++){var h=this.itemPull[n]._list[d].getFormData(o,g);for(var m in h){c[m]=h[m]}}}}if(!g&&this.hId&&this._userdata[this.hId]){for(var n in this._userdata[this.hId]){if(!c[n]){c[n]=this._userdata[this.hId][n]}}}return c};dhtmlXForm.prototype.adjustParentSize=function(){var f=0;var d=-1;for(var g=0;g<this.base.length;g++){f+=this.base[g].firstChild.offsetWidth;if(this.base[g].offsetHeight>d){d=this.base[g].offsetHeight}}var c=false;try{c=(this.cont.parentNode.parentNode.parentNode.parentNode._isCell==true);if(c){var a=this.cont.parentNode.parentNode.parentNode.parentNode}}catch(h){}if(c&&typeof(a)!="undefined"){if(f>0){a.setWidth(f+10)}if(d>0){a.setHeight(d+a.firstChild.firstChild.offsetHeight+5)}c=a=null;return}var b=false;try{b=(this.cont.parentNode.parentNode.parentNode._isWindow==true);if(b){var j=this.cont.parentNode.parentNode;if(typeof(j.callEvent)=="function"){this.cont.style.display="none";j.callEvent("_setCellSize",[f+15,d+15]);this.cont.style.display=""}}}catch(h){}};dhtmlXForm.prototype.reset=function(){if(this.callEvent("onBeforeReset",[this.formId,this.getFormData()])){if(this._last_load_data){this.setFormData(this._last_load_data)}this.callEvent("onAfterReset",[this.formId])}};dhtmlXForm.prototype.send=function(b,g,h,d){if(typeof g=="function"){h=g;g="post"}else{g=(g=="get"?"get":"post")}if(d!==true&&!this.validate()){return}var f=this.getFormData(true);var e=[];for(var c in f){e.push(c+"="+encodeURIComponent(f[c]))}var a=function(j){if(h){h.call(this,j,j.xmlDoc.responseText)}};if(g=="get"){window.dhx4.ajax.get(b+(b.indexOf("?")==-1?"?":"&")+e.join("&"),a)}else{window.dhx4.ajax.post(b,e.join("&"),a)}};dhtmlXForm.prototype.save=function(a,b){};dhtmlXForm.prototype.dummy=function(){};dhtmlXForm.prototype._changeFormId=function(b,a){this.formId=a};dhtmlXForm.prototype._dp_init=function(a){a._methods=["dummy","dummy","_changeFormId","dummy"];a._getRowData=function(d,b){var c=this.obj.getFormData(true);c[this.action_param]=this.obj.getUserData(d,this.action_param);return c};a._clearUpdateFlag=function(){};a.attachEvent("onAfterUpdate",function(c,d,e,b){if(d=="inserted"||d=="updated"||d=="error"||d=="invalid"){this.obj.resetDataProcessor("updated")}if(d=="inserted"||d=="updated"){this.obj._last_load_data=this.obj.getFormData(true)}this.obj.callEvent("onAfterSave",[this.obj.formId,b]);return true});a.autoUpdate=false;a.setTransactionMode("POST",true);this.dp=a;this.formId=(new Date()).valueOf();this.resetDataProcessor("inserted");this.save=function(){if(!this.callEvent("onBeforeSave",[this.formId,this.getFormData()])){return}if(!this.validate()){return}a.sendData()}};dhtmlXForm.prototype.resetDataProcessor=function(a){if(!this.dp){return}this.dp.updatedRows=[];this.dp._in_progress=[];this.dp.setUpdated(this.formId,true,a)};dhtmlXForm.prototype._ccActivate=function(c,a,b){if(!this._formLS){this._formLS={}}if(!this._formLS[c]){this._formLS[c]={input:a,value:b}}if(!this._ccActive){this._ccActive=true;this._ccDo()}a=null};dhtmlXForm.prototype._ccDeactivate=function(a){if(this._ccTm){window.clearTimeout(this._ccTm)}this._ccActive=false;if(this._formLS!=null&&this._formLS[a]!=null){this._formLS[a].input=null;this._formLS[a]=null;delete this._formLS[a]}};dhtmlXForm.prototype._ccDo=function(){if(this._ccTm){window.clearTimeout(this._ccTm)}for(var b in this._formLS){var e=this._formLS[b].input;if(String(e.tagName).toLowerCase()=="select"){var c="";if(e.selectedIndex>=0&&e.selectedIndex<e.options.length){c=e.options[e.selectedIndex].value}}else{var c=e.value}if(c!=this._formLS[b].value){this._formLS[b].value=c;this.callEvent("onInputChange",[e._idd,c,this])}e=null}if(this._ccActive){var d=this;this._ccTm=window.setTimeout(function(){d._ccDo();d=null},100)}};dhtmlXForm.prototype._ccReload=function(b,a){if(this._formLS&&this._formLS[b]){this._formLS[b].value=a}};dhtmlXForm.prototype._checkDim=function(g,f){var d=document.createElement("DIV");d.className="dhxform_obj_"+this.skin;d.style.cssText+=(dhx4.isIE6==true?"visibility:hidden;":"position:absolute;left:-2000px;top:-1000px;");document.body.appendChild(d);var e=g.parentNode;var b=g.nextSibling;d.appendChild(g);var c=parseInt(f.style.width);var a=(dhx4.isFF||dhx4.isIE||dhx4.isChrome||dhx4.isOpera?f.offsetWidth:f.clientWidth);var h=a-c;if(b!=null){e.insertBefore(g,b)}else{e.appendChild(g)}d.parentNode.removeChild(d);e=b=d=g=f=null;return h};dhtmlXForm.prototype._autoload=function(){var b=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"];var c=document.getElementsByTagName("UL");var d=[];for(var g=0;g<c.length;g++){if(c[g].className=="dhtmlxForm"){var f=document.createElement("DIV");d[d.length]={nodeUL:c[g],nodeForm:f,data:dhtmlXForm.prototype._ulToObject(c[g],b),name:(c[g].getAttribute("name")||null)}}}for(var g=0;g<d.length;g++){d[g].nodeUL.parentNode.insertBefore(d[g].nodeForm,d[g].nodeUL);var h=new dhtmlXForm(d[g].nodeForm,d[g].data);if(d[g].name!==null){window[d[g].name]=h}var e=(d[g].nodeUL.getAttribute("oninit")||null);d[g].nodeUL.parentNode.removeChild(d[g].nodeUL);d[g].nodeUL=null;d[g].nodeForm=null;d[g].data=null;d[g]=null;if(e){if(typeof(e)=="function"){e()}else{if(typeof(window[e])=="function"){window[e]()}}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.detachEvent("onload",dhtmlXForm.prototype._autoload)}};if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXForm.prototype._autoload,false)}else{window.attachEvent("onload",dhtmlXForm.prototype._autoload)}if(typeof(window.dhtmlXCellObject)!="undefined"){dhtmlXCellObject.prototype.attachForm=function(a){this.callEvent("_onBeforeContentAttach",["form"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";if(window.dhtmlx&&dhtmlx.$customScroll){dhtmlx.CustomScroll.enable(b)}else{b.style.overflow="auto"}this._attachObject(b);this.dataType="form";this.dataObj=new dhtmlXForm(b,a);this.dataObj.setSkin(this.conf.skin);b=null;this.callEvent("_onContentAttach",[]);return this.dataObj}}dhtmlXForm.prototype.items.combo={render:function(b,c){b._type="combo";b._enabled=true;b._value=null;b._newValue=null;var d=b.getForm().skin;if(typeof(c.inputWidth)!="undefined"&&d=="material"&&String(c.inputWidth).match(/^\d*$/)!=null){c.inputWidth=parseInt(c.inputWidth)+2}this.doAddLabel(b,c);this.doAddInput(b,c,"SELECT",null,true,true,"dhxform_select");this.doAttachEvents(b);this.doLoadOpts(b,c);b.onselectstart=function(f){return true};b.childNodes[b._ll?1:0].childNodes[0].setAttribute("mode",c.comboType||"");if(c.comboImagePath){b.childNodes[b._ll?1:0].childNodes[0].setAttribute("imagePath",c.comboImagePath)}if(c.comboDefaultImage){b.childNodes[b._ll?1:0].childNodes[0].setAttribute("defaultImage",c.comboDefaultImage)}if(c.comboDefaultImageDis){b.childNodes[b._ll?1:0].childNodes[0].setAttribute("defaultImageDis",c.comboDefaultImageDis)}b._combo=new dhtmlXComboFromSelect(b.childNodes[b._ll?1:0].childNodes[0]);b._combo.setSkin(d);b._combo._currentComboValue=b._combo.getSelectedValue();b._combo.getInput().id=c.uid;if(d=="material"){b._combo.list.className+=" dhxform_obj_"+d}var a=this;b._combo.attachEvent("onChange",function(){a.doOnChange(this)});if(c.connector){this.doLoadOptsConnector(b,c.connector)}if(c.filtering){b._combo.enableFilteringMode(true)}else{if(c.serverFiltering){b._combo.enableFilteringMode(true,c.serverFiltering,c.filterCache,c.filterSubLoad)}}if(c.readonly==true){this.setReadonly(b,true)}if(c.hidden==true){this.hide(b)}if(c.style){b._combo.DOMelem_input.style.cssText+=c.style}b._combo.attachEvent("onFocus",function(){var e=this.cont.parentNode.parentNode;var g=e.getForm();if((g.skin=="dhx_terrace"||g.skin=="material")&&this.cont.className.search(/combo_in_focus/)<0){this.cont.className+=" combo_in_focus"}g.callEvent("onFocus",[e._idd]);g=e=null});b._combo.attachEvent("onBlur",function(){var e=this.cont.parentNode.parentNode;var g=e.getForm();if((g.skin=="dhx_terrace"||g.skin=="material")&&this.cont.className.search(/combo_in_focus/)>=0){this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")}g.callEvent("onBlur",[e._idd]);g=e=null});return this},destruct:function(a){a.childNodes[a._ll?1:0].childNodes[0].onchange=null;a._combo._currentComboValue=null;a._combo.unload();a._combo=null;a._apiChange=null;this.d2(a);a=null},doAttachEvents:function(b){var a=this;b.childNodes[b._ll?1:0].childNodes[0].onchange=function(){a.doOnChange(this);a.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(a){if(a.getForm().hot_validate){this._validate(a)}},doOnChange:function(b){var a=b.base.parentNode.parentNode.parentNode;if(a._apiChange){return}b._newComboValue=b.getSelectedValue();if(b._newComboValue!=b._currentComboValue){if(a.checkEvent("onBeforeChange")){if(a.callEvent("onBeforeChange",[a._idd,b._currentComboValue,b._newComboValue])!==true){window.setTimeout(function(){b.setComboValue(b._currentComboValue)},1);return false}}b._currentComboValue=b._newComboValue;a.callEvent("onChange",[a._idd,b._currentComboValue])}a._autoCheck()},doLoadOptsConnector:function(d,a){var c=this;var b=d;d._connector_working=true;d._apiChange=true;d._combo.load(a,function(){b.callEvent("onOptionsLoaded",[b._idd]);b._connector_working=false;if(b._connector_value!=null){c.setValue(b,b._connector_value);b._connector_value=null}b._apiChange=false;c=b=null})},enable:function(a){if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._enabled=true;a._combo.enable()},disable:function(a){if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._enabled=false;a._combo.disable()},getCombo:function(a){return a._combo},setValue:function(a,b){if(a._connector_working){a._connector_value=b;return}a._apiChange=true;a._combo.setComboValue(b);a._combo._currentComboValue=a._combo.getActualValue();a._apiChange=false},getValue:function(a){return a._combo.getActualValue()},setWidth:function(b,a){b.childNodes[b._ll?1:0].childNodes[0].style.width=a+"px"},setReadonly:function(a,b){if(!a._combo){return}a._combo_ro=b;a._combo.readonly(a._combo_ro)},isReadonly:function(a,b){return a._combo_ro||false},setFocus:function(a){if(a._enabled){a._combo.setFocus()}},_setCss:function(a,c,b){a._combo.setFontSize(b,b)}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1}){dhtmlXForm.prototype.items.combo[b]=dhtmlXForm.prototype.items.select[b]}})();dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.getCombo=function(a){return this.doWithItem(a,"getCombo")};dhtmlXForm.prototype.items.calendar={render:function(c,e){var b=this;c._type="calendar";c._enabled=true;var g=navigator.userAgent;var a=(g.indexOf("MSIE 6.0")>=0||g.indexOf("MSIE 7.0")>=0||g.indexOf("MSIE 8.0")>=0);this.doAddLabel(c,e);this.doAddInput(c,e,"INPUT","TEXT",true,true,"dhxform_textarea calendar");this.doAttachChangeLS(c);if(a){c.childNodes[c._ll?1:0].childNodes[0].onfocus2=c.childNodes[c._ll?1:0].childNodes[0].onfocus;c.childNodes[c._ll?1:0].childNodes[0].onfocus=function(){if(this._skipOnFocus==true){this._skipOnFocus=false;return}this.onfocus2.apply(this,arguments)}}c.childNodes[c._ll?1:0].childNodes[0]._idd=c._idd;c.childNodes[c._ll?1:0].childNodes[0].onblur=function(){var h=this.parentNode.parentNode;if(h._c.base._formMouseDown){h._c.base._formMouseDown=false;this._skipOnFocus=true;this.focus();this.value=this.value;h=null;return true}var j=h.getForm();j._ccDeactivate(h._idd);b.checkEnteredValue(this.parentNode.parentNode);if(j.live_validate){b._validate(h)}j.callEvent("onBlur",[h._idd]);if(!h._c.isVisible()){h._tempValue=null}j=h=null};c._f=(e.dateFormat||null);c._f0=(e.serverDateFormat||c._f);var d=c.getForm();c._c=new dhtmlXCalendarObject(c.childNodes[c._ll?1:0].childNodes[0],e.skin||d.skin||"dhx_skyblue");c._c._nullInInput=true;c._c.enableListener(c.childNodes[c._ll?1:0].childNodes[0]);if(c._f!=null){c._c.setDateFormat(c._f)}if(!window.dhx4.s2b(e.enableTime)){c._c.hideTime()}if(window.dhx4.s2b(e.enableTodayButton)){c._c.showToday()}if(window.dhx4.s2b(e.showWeekNumbers)){c._c.showWeekNumbers()}if(!isNaN(e.weekStart)){c._c.setWeekStartDay(e.weekStart)}if(typeof(e.calendarPosition)!="undefined"){c._c.setPosition(e.calendarPosition)}if(e.minutesInterval!=null){c._c.setMinutesInterval(e.minutesInterval)}c._c._itemIdd=c._idd;c._c.attachEvent("onBeforeChange",function(f){if(c._value!=f){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,f])!==true){return false}}c._tempValue=c._value=f;b.setValue(c,f,false);c.callEvent("onChange",[this._itemIdd,c._value])}return true});c._c.attachEvent("onClick",function(){c._tempValue=null});c._c.attachEvent("onHide",function(){c._tempValue=null});if(a){c._c.base.onmousedown=function(){this._formMouseDown=true;return false}}this.setValue(c,e.value);d=null;return this},getCalendar:function(a){return a._c},setSkin:function(a,b){a._c.setSkin(b)},setValue:function(b,c,a){if(!c||c==null||typeof(c)=="undefined"||c==""){b._value=null;b.childNodes[b._ll?1:0].childNodes[0].value=""}else{b._value=(c instanceof Date?c:b._c._strToDate(c,b._f0||b._c._dateFormat));b.childNodes[b._ll?1:0].childNodes[0].value=b._c._dateToStr(b._value,b._f||b._c._dateFormat)}if(a!==false){b._c.setDate(b._value)}},getValue:function(b,a){var c=b._tempValue||b._c.getDate();if(a===true&&c==null){return""}return(a===true?b._c._dateToStr(c,b._f0||b._c._dateFormat):c)},setDateFormat:function(b,a,c){b._f=a;b._f0=(c||b._f);b._c.setDateFormat(b._f);this.setValue(b,this.getValue(b))},destruct:function(a){a._c.disableListener(a.childNodes[a._ll?1:0].childNodes[0]);a._c.unload();a._c=null;try{delete a._c}catch(b){}a._f=null;try{delete a._f}catch(b){}a._f0=null;try{delete a._f0}catch(b){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;a.childNodes[a._ll?1:0].childNodes[0].onblur=null;this.d2(a);a=null},checkEnteredValue:function(a){this.setValue(a,a._c.getDate())}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.calendar[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS;dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getCalendar=function(a){return this.doWithItem(a,"getCalendar")};dhtmlXForm.prototype.setCalendarDateFormat=function(b,a,c){this.doWithItem(b,"setDateFormat",a,c)};dhtmlXForm.prototype.items.btn2state={setChecked:function(a,b){a._checked=(b===true?true:false);a.childNodes[a._ll?1:0].lastChild.className="dhxform_img "+a._cssName+"_"+(a._checked?"1":"0");this.doCheckValue(a)}};(function(){for(var b in dhtmlXForm.prototype.items.checkbox){if(!dhtmlXForm.prototype.items.btn2state[b]){dhtmlXForm.prototype.items.btn2state[b]=dhtmlXForm.prototype.items.checkbox[b]}}})();dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render;dhtmlXForm.prototype.items.btn2state.render=function(a,b){b._autoInputWidth=false;this.render2(a,b);a._type="btn2state";a._cssName=(typeof(b.cssName)=="undefined"?"btn2state":b.cssName);a._updateImgNode=function(){};a._doOnFocus=function(){a.getForm().callEvent("onFocus",[a._idd])};a._doOnBlur=function(){a.getForm().callEvent("onBlur",[a._idd])};a._doOnKeyUpDown=function(d,c,e){this.callEvent(d,[this.childNodes[this._ll?0:1].childNodes[0],c,this._idd])};this.setChecked(a,a._checked);return this};dhtmlXForm.prototype.setFormData_btn2state=function(a,b){this[b==true||parseInt(b)==1||b=="true"||b==this.getItemValue(a)?"checkItem":"uncheckItem"](a)};dhtmlXForm.prototype.getFormData_btn2state=function(a){return(this.isItemChecked(a)?this.getItemValue(a):0)};dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(c,d){var b=this;c._type="colorpicker";c._enabled=true;this.doAddLabel(c,d);this.doAddInput(c,d,"INPUT","TEXT",true,true,"dhxform_textarea");c._value=(d.value||"");c.childNodes[c._ll?1:0].childNodes[0].value=c._value;var a={input:c.childNodes[c._ll?1:0].childNodes[0],custom_colors:(window.dhx4.s2b(d.enableCustomColors)==true),skin:c.getForm().skin};this.colorpicker[c._idd]=new dhtmlXColorPicker(a);this.colorpicker[c._idd]._nodes[0].valueColor=null;this.colorpicker[c._idd].base.className+=" dhtmlxcp_in_form";if(typeof(d.customColors)!="undefined"){this.colorpicker[c._idd].setCustomColors(d.customColors)}if(typeof(d.cpPosition)=="string"){this.colorpicker[c._idd].setPosition(d.cpPosition)}this.colorpicker[c._idd].attachEvent("onSelect",function(e){if(c._value!=e){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,e])!==true){c.childNodes[c._ll?1:0].childNodes[0].value=c._value;return}}c._value=e;b.setValue(c,e);c.callEvent("onChange",[c._idd,c._value])}});this.colorpicker[c._idd].attachEvent("onHide",function(e){var f=c.childNodes[c._ll?1:0].childNodes[0];if(f.value!=c._value){f.value=c._value}f=null});c.childNodes[c._ll?1:0].childNodes[0]._idd=c._idd;return this},getColorPicker:function(a){return this.colorpicker[a._idd]},destruct:function(a){if(this.colorpicker[a._idd].unload){this.colorpicker[a._idd].unload()}this.colorpicker[a._idd]=null;try{delete this.colorpicker[a._idd]}catch(b){}a.childNodes[a._ll?1:0].childNodes[0]._idd=null;this.d2(a);a=null},setSkin:function(a,b){this.colorpicker[a._idd].setSkin(b)}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1}){dhtmlXForm.prototype.items.colorpicker[b]=dhtmlXForm.prototype.items.input[b]}})();dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.getColorPicker=function(a){return this.doWithItem(a,"getColorPicker")};dhtmlXForm.prototype.items.container={render:function(a,b){a._type="container";a._enabled=true;this.doAddLabel(a,b);this.doAddInput(a,b,"DIV",null,true,true,"dhxform_container");return this},getContainer:function(a){return a.childNodes[a._ll?1:0].childNodes[0]},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a.callEvent("onEnable",[a._idd])},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a.callEvent("onDisable",[a._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}};dhtmlXForm.prototype.getContainer=function(a){return this.doWithItem(a,"getContainer")};(function(){for(var b in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.container[b]){dhtmlXForm.prototype.items.container[b]=dhtmlXForm.prototype.items.input[b]}}})();dhtmlXForm.prototype.items.editor={editor:{},render:function(c,d){var a=(!isNaN(d.rows));c._type="editor";c._enabled=true;c._editor_id=c.getForm().idPrefix+c._idd;this.doAddLabel(c,d);this.doAddInput(c,d,"DIV",null,true,true,"dhxform_item_template");c._value=(d.value||"");var b=this;this.editor[c._editor_id]=new dhtmlXEditor({parent:c.childNodes[c._ll?1:0].childNodes[0],content:c._value,iconsPath:d.iconsPath,toolbar:d.toolbar});this.editor[c._editor_id].attachEvent("onAccess",function(f,g){c.callEvent("_onBeforeEditorAccess",[]);_dhxForm_doClick(document.body,"click");if(f=="blur"){b.doOnBlur(c,this);c.callEvent("onBlur",[c._idd]);if({dhx_terrace:1,material:1}[c.getForm().skin]==1){var e=c.childNodes[c._ll?1:0].className;if(e.indexOf("dhxeditor_focus")>=0){c.childNodes[c._ll?1:0].className=(e).replace(/\s{0,}dhxeditor_focus/gi,"")}}}else{c.callEvent("onEditorAccess",[c._idd,f,g,this,c.getForm()]);c.callEvent("onFocus",[c._idd]);if({dhx_terrace:1,material:1}[c.getForm().skin]==1){var e=c.childNodes[c._ll?1:0].className;if(e.indexOf("dhxeditor_focus")==-1){c.childNodes[c._ll?1:0].className+=" dhxeditor_focus"}}}});this.editor[c._editor_id].attachEvent("onToolbarClick",function(e){c.callEvent("onEditorToolbarClick",[c._idd,e,this,c.getForm()])});if(d.readonly){this.setReadonly(c,true)}c.childNodes[c._ll?0:1].childNodes[0].removeAttribute("for");c.childNodes[c._ll?0:1].childNodes[0].onclick=function(){b.editor[c._editor_id]._focus()};return this},doOnBlur:function(c,b){var a=b.getContent();if(c._value!=a){if(c.checkEvent("onBeforeChange")){if(c.callEvent("onBeforeChange",[c._idd,c._value,a])!==true){b.setContent(c._value);return}}c._value=a;c.callEvent("onChange",[c._idd,a])}},setValue:function(a,b){if(a._value==b){return}a._value=b;this.editor[a._editor_id].setContent(a._value)},getValue:function(a){a._value=this.editor[a._editor_id].getContent();return a._value},enable:function(a){if(this.isEnabled(a)!=true){this.editor[a._editor_id].setReadonly(false);this.doEn(a)}},disable:function(a){if(this.isEnabled(a)==true){this.editor[a._editor_id].setReadonly(true);this.doDis(a)}},setReadonly:function(a,b){this.editor[a._editor_id].setReadonly(b)},getEditor:function(a){return(this.editor[a._editor_id]||null)},destruct:function(a){a.childNodes[a._ll?0:1].childNodes[0].onclick=null;this.editor[a._editor_id].unload();this.editor[a._editor_id]=null;this.d2(a);a=null},setFocus:function(a){this.editor[a._editor_id]._focus()}};(function(){for(var b in {doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1}){dhtmlXForm.prototype.items.editor[b]=dhtmlXForm.prototype.items.template[b]}})();dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct;dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable;dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable;dhtmlXForm.prototype.getEditor=function(a){return this.doWithItem(a,"getEditor")};dhtmlXForm.prototype.items.image={_dimFix:true,render:function(e,f){e._type="image";e._enabled=true;e._fr_name="dhxform_image_"+window.dhx4.newId();e._url=(typeof(f.url)=="undefined"||f.url==null?"":f.url);if(f.inputWidth=="auto"){f.inputWidth=120}if(f.inputHeight=="auto"){f.inputHeight=f.inputWidth}this.doAddLabel(e,f);this.doAddInput(e,f,"DIV",null,true,true,"dhxform_image");var b=e.childNodes[e._ll?1:0].childNodes[0];b.style.height=parseInt(b.style.height)-dhtmlXForm.prototype.items[this.t]._dim+"px";var a=(typeof(f.imageWidth)!="undefined"?parseInt(f.imageWidth):f.inputWidth);var c=(typeof(f.imageHeight)!="undefined"?parseInt(f.imageHeight):f.inputHeight);if(c=="auto"){c=a}e._dim={mw:f.inputWidth-this._dim,mh:f.inputHeight-this._dim,w:a,h:c};b.innerHTML="<img class='dhxform_image_img' border='0' style='visibility:hidden;'><iframe name='"+e._fr_name+"' style='position: absolute; width:0px; height:0px; top:-10px; left:-10px;' frameBorder='0' border='0'></iframe><div class='dhxform_image_wrap'><form action='"+e._url+"' method='POST' enctype='multipart/form-data' target='"+e._fr_name+"' class='dhxform_image_form'><input type='hidden' name='action' value='uploadImage'><input type='hidden' name='itemId' value='"+e._idd+"'><input type='file' name='file' class='dhxform_image_input'></form>";"</div>";this.adjustImage(e);b.childNodes[2].firstChild.lastChild.onchange=function(){e._is_uploading=true;this.parentNode.submit();this.parentNode.parentNode.className="dhxform_image_wrap dhxform_image_in_progress";this.value=""};var d=this;if(window.navigator.userAgent.indexOf("MSIE")>=0){b.childNodes[1].onreadystatechange=function(){if(this.readyState=="complete"){d.doOnUpload(e)}}}else{b.childNodes[1].onload=function(){d.doOnUpload(e)}}this._moreClear=function(){d=null};this.setValue(e,f.value||"");b=null;return this},destruct:function(b){var a=b.childNodes[b._ll?1:0].childNodes[0];a.childNodes[2].firstChild.lastChild.onchange=null;a.childNodes[1].onreadystatechange=null;a.childNodes[1].onload=null;this._moreClear();this.d2(b);b=null},doAttachEvents:function(){},setValue:function(c,e){c._value=(e==null?"":e);var b=c._url+(c._url.indexOf("?")>=0?"&":"?")+"action=loadImage&itemId="+encodeURIComponent(c._idd)+"&itemValue="+encodeURIComponent(c._value)+window.dhx4.ajax._dhxr("&");var d=c.childNodes[c._ll?1:0].childNodes[0].firstChild;if(d.nextSibling.tagName.toLowerCase()=="img"){d.nextSibling.src=b}else{var a=document.createElement("IMG");a.className="dhxform_image_img";a.style.visibility="hidden";a.onload=function(){this.style.visibility="visible";this.parentNode.removeChild(this.nextSibling);this.onload=this.onerror=null};a.onerror=function(){this.onload.apply(this,arguments);this.style.visibility="hidden"};d.parentNode.insertBefore(a,d);a.src=b;a=null;this.adjustImage(c)}d=null},getValue:function(a){return a._value},doOnUpload:function(c){if(c._is_uploading==true){var a=c.childNodes[c._ll?1:0].childNodes[0].lastChild.previousSibling;var b=dhx4.s2j(a.contentWindow.document.body.innerHTML);if(typeof(b)=="object"&&b!=null&&b.state==true&&b.itemId==c._idd){this.setValue(c,b.itemValue,true);c.getForm().callEvent("onImageUploadSuccess",[b.itemId,b.itemVaule,b.extra])}else{c.getForm().callEvent("onImageUploadFail",[c._idd,(b?b.extra:null)])}b=a=null;window.setTimeout(function(){c.childNodes[c._ll?1:0].childNodes[0].lastChild.className="dhxform_image_wrap";c._is_uploading=false},50)}},adjustImage:function(d){var b=d.childNodes[d._ll?1:0].childNodes[0].firstChild;var a=Math.min(d._dim.mw,d._dim.w);var c=Math.min(d._dim.mh,d._dim.h);b.style.width=a+"px";b.style.height=c+"px";b.style.marginLeft=Math.max(0,Math.round(d._dim.mw/2-a/2))+"px";b.style.marginTop=Math.max(0,Math.round(d._dim.mh/2-c/2))+"px";b=d=null}};(function(){for(var b in dhtmlXForm.prototype.items.input){if(!dhtmlXForm.prototype.items.image[b]){dhtmlXForm.prototype.items.image[b]=dhtmlXForm.prototype.items.input[b]}}})();dhtmlXForm.prototype.items.image.d2=dhtmlXForm.prototype.items.input.destruct;dhtmlXForm.prototype.setFormData_image=function(a,b){this.setItemValue(a,b)};dhtmlXForm.prototype.getFormData_image=function(a){return this.getItemValue(a)};dhtmlXForm.prototype.items.upload={render:function(b,c){b._type="up";b._enabled=true;b._checked=true;b.className=c.position+(typeof(c.className)=="string"?" "+c.className:"");var a=document.createElement("DIV");b.appendChild(a);if(!isNaN(c.inputLeft)){b.style.left=parseInt(c.inputLeft)+"px"}if(!isNaN(c.inputTop)){b.style.top=parseInt(c.inputTop)+"px"}if(c.inputWidth!="auto"){if(!isNaN(c.inputWidth)){a.style.width=parseInt(c.inputWidth)+"px"}}b._uploader=new dhtmlXFileUploader(a,c.swfPath||"",c.swfUrl||"",c.mode||null,c.swfLogs,c.slXap||"",c.slUrl||"",c.slLogs||"",c.multiple);b._uploader.setURL(c.url||"");b._uploader.callEvent=b.callEvent;if(typeof(c.autoStart)!="undefined"){b._uploader.setAutoStart(c.autoStart)}if(typeof(c.autoRemove)!="undefined"){b._uploader.setAutoRemove(c.autoRemove)}if(typeof(c.titleScreen)!="undefined"){b._uploader.enableTitleScreen(c.titleScreen)}if(typeof(c.titleText)!="undefined"){b._uploader.setTitleText(c.titleText)}if(c.hidden==true){this.hide(b)}if(c.disabled==true){this.userDisable(b)}if(!(c.inputHeight=="auto"||parseInt(c.inputHeight)==NaN)){b._uploader.p_files.style.height=parseInt(c.inputHeight)+"px"}return this},destruct:function(a){this.doUnloadNestedLists(a);a._uploader.callEvent=function(){return true};a._uploader.unload();a._uploader.callEvent=null;a._uploader=null;a._checked=null;a._enabled=null;a._idd=null;a._type=null;a.onselectstart=null;a._autoCheck=null;a.callEvent=null;a.checkEvent=null;a.getForm=null;while(a.childNodes.length>0){a.removeChild(a.childNodes[0])}a.parentNode.removeChild(a);a=null},setText:function(a,b){},getText:function(a){},enable:function(a){a._enabled=true;if(String(a.className).search("disabled")>=0){a.className=String(a.className).replace(/disabled/gi,"")}a._uploader.enable()},disable:function(a){a._enabled=false;if(String(a.className).search("disabled")<0){a.className+=" disabled"}a._uploader.disable()},setWidth:function(b,a){b.childNodes[0].style.width=a+"px";b._width=a},getWidth:function(a){return a._width||parseInt(a.childNodes[0].style.width)},setValue:function(a){a._uploader.clear()},getValue:function(f){var d=f._uploader.getData();var e={};var c=0;for(var b in d){e[f._idd+"_r_"+c]=d[b].realName;e[f._idd+"_s_"+c]=d[b].serverName;c++}e[f._idd+"_count"]=c;return e},getUploader:function(a){return a._uploader},getStatus:function(a){return a._uploader.getStatus()}};(function(){for(var b in {doUnloadNestedLists:1,isEnabled:1}){dhtmlXForm.prototype.items.upload[b]=dhtmlXForm.prototype.items.checkbox[b]}})();dhtmlXForm.prototype.setFormData_upload=function(a){this.doWithItem(a,"setValue")};dhtmlXForm.prototype.getUploader=function(a){return this.doWithItem(a,"getUploader")};dhtmlXForm.prototype.getUploaderStatus=function(a){return this.doWithItem(a,"getStatus")};function dhtmlXFileUploader(b,h,g,j,n,f,q,d,r){var l=this;if(typeof(j)=="string"&&typeof(this[j])=="function"){this.engine=j}else{this.engine="html4";var c=null;if(typeof(window.FormData)!="undefined"&&typeof(window.XMLHttpRequest)!="undefined"){c=new XMLHttpRequest();if(typeof(c.upload)=="undefined"){c=null}}if(c!=null){this.engine="html5"}else{if(typeof(window.swfobject)!="undefined"||c===false){var c=swfobject.getFlashPlayerVersion();if(c.major>=10){this.engine="flash"}}else{this._sl_v=this.getSLVersion();if(this._sl_v){this.engine="sl"}}}c=null}if(typeof(b)=="string"){b=document.getElementById(b)}this._upload_mp=(typeof(r)!="undefined"?r==true:true);this._upload_dnd=true;this._swf_file_url=h||"";this._swf_upolad_url=g||"";this._swf_logs=n;this._sl_xap=f;this._sl_upload_url=q;this._sl_logs=d;this.p=document.createElement("DIV");this.p.className+=" dhx_file_uploader";b.appendChild(this.p);this.p_files=document.createElement("DIV");this.p_files.className="dhx_upload_files";this.p.appendChild(this.p_files);this.p_controls=document.createElement("DIV");this.p_controls.className="dhx_upload_controls";this.p.appendChild(this.p_controls);this._files={};this._items={};this._data={};this._autoStart=false;this._autoRemove=false;this._titleScreen=true;this._enabled=true;this._uploaded_count=0;this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){if(!l._enabled){return}if(!l._uploading){l._uploadStart()}},tooltip:"Upload"},cancel:{onclick:function(){if(!l._enabled){return}l._uploadStop();l._switchButton(false)},tooltip:"Stop"},clear:{onclick:function(){if(!l._enabled){return}l.clear()},tooltip:"Clear list"}};this.buttons={};for(var e in this.b_opts){var s=document.createElement("DIV");s.innerHTML="&nbsp;";s.className="dhx_file_uploader_button button_"+e;s.onclick=this.b_opts[e].onclick;if(this.b_opts[e].tooltip){s.title=this.b_opts[e].tooltip}this.p_controls.appendChild(s);this.buttons[e]=s;s=null}this.buttons.cancel.style.display="none"};this._readableSize=function(s){var e=false;var a=["b","Kb","Mb","Gb","Tb","Pb","Eb"];for(var u=0;u<a.length;u++){if(s>1024){s=s/1024}else{if(e===false){e=u}}}if(e===false){e=a.length-1}return Math.round(s*100)/100+" "+a[e]};this._beforeAddFileToList=function(a,e){return(this.callEvent("onBeforeFileAdd",[a,e])===true)};this._addFileToList=function(w,e,u,v,a){this._checkTitleScreen();var s=document.createElement("DIV");s._idd=w;s.className="dhx_file dhx_file_"+v;s.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+a+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>";this.p_files.appendChild(s);s.childNodes[0].style.width=s.offsetWidth-127+"px";this._items[w]=s;this._updateFileNameSize(w);s.childNodes[2].onclick=function(){if(!l._enabled){return}var t=this.parentNode._idd;l._removeFileFromQueue(t)};this.callEvent("onFileAdd",[e])};this._removeFileFromList=function(a){if(!this._items[a]){return}this._items[a].childNodes[2].onclick=null;this._items[a].parentNode.removeChild(this._items[a]);this._items[a]=null;delete this._items[a];if(this._data[a]){this._data[a]=null;delete this._data[a]}this._checkTitleScreen()};this._updateFileNameSize=function(a){this._items[a].childNodes[0].innerHTML=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"&nbsp;");this._items[a].childNodes[0].title=this._files[a].name+(!isNaN(this._files[a].size)?" ("+this._readableSize(this._files[a].size)+")":"")};this._updateFileInList=function(s,e,a){if(!this._items[s]){return}this._items[s].className="dhx_file dhx_file_"+e;this._updateProgress(s,e,a);this._updateFileNameSize(s)};this._updateProgress=function(s,e,a){if(e=="uploading"&&a<100&&this._progress_type=="loader"){this._items[s].childNodes[1].className="dhx_file_param dhx_file_uploading";this._items[s].childNodes[1].innerHTML="&nbsp;"}else{this._items[s].childNodes[1].className="dhx_file_param dhx_file_progress";this._items[s].childNodes[1].innerHTML=a+"%"}this._updateFileNameSize(s)};this._removeFilesByState=function(s){for(var e in this._files){if(s===true||this._files[e].state==s){this._removeFileFromQueue(e)}}};this._switchButton=function(e){if(e==true){this.buttons.upload.style.display="none";this.buttons.cancel.style.display=""}else{var a=this._uploaded_count;this.buttons.upload.style.display="";this.buttons.cancel.style.display="none";this._uploaded_count=0;if(a>0){this.callEvent("onUploadComplete",[a])}}};this._uploadStart=function(){this._switchButton(true);if(!this._uploading){for(var e in this._files){if(this._files[e].state=="fail"){this._files[e].state="added";this._updateFileInList(e,"added",0)}}}this._uploading=true;var s=false;for(var e in this._files){if(!s&&[this._files[e].state]=="added"){s=true;this._files[e].state="uploading";this._updateFileInList(e,"uploading",0);this._doUploadFile(e)}}if(!s){this._uploading=false;this._switchButton(false)}};this._onUploadSuccess=function(v,u,s,a){if(typeof(s)!="undefined"&&this.engine=="flash"){var e=dhx4.s2j(s.data);if(e!=null&&e.state==true&&e.name!=null){u=e.name;if(e.extra!=null){a=e.extra}}else{this._onUploadFail(v,(e!=null&&e.extra!=null?e.extra:null));return}}this._uploaded_count++;this._data[v]={realName:this._files[v].name,serverName:u};this._files[v].state="uploaded";this._updateFileInList(v,"uploaded",100);this.callEvent("onUploadFile",[this._files[v].name,u,a]);if(this._autoRemove){this._removeFileFromQueue(v)}if(this._uploading){this._uploadStart()}};this._onUploadFail=function(e,a){this._files[e].state="fail";this._updateFileInList(e,"fail",0);this.callEvent("onUploadFail",[this._files[e].name,a]);if(this._uploading){this._uploadStart()}};this._onUploadAbort=function(a){this._uploading=false;this._files[a].state="added";this._updateFileInList(a,"added",0);this.callEvent("onUploadCancel",[this._files[a].name])};this._checkTitleScreen=function(){var s=0;for(var e in this._files){s++}if(s==0&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen){this.p.className+=" dhx_file_uploader_title";this.buttons.info.innerHTML=this._titleText;this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"}if((s>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0){this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,"");this.buttons.info.innerHTML=""}};this.callEvent=function(){};this.upload=function(){if(!this._uploading){this._uploadStart()}};this.setAutoStart=function(a){this._autoStart=(a==true)};this.setAutoRemove=function(a){this._autoRemove=(a==true)};this.enableTitleScreen=function(a){this._titleScreen=(a==true);this._checkTitleScreen()};this.setTitleText=function(a){this._titleText=a;if(this.p.className.search("dhx_file_uploader_title")>=0){this.buttons.info.innerHTML=this._titleText}};this.setURL=function(a){this._url=a};this.setSWFURL=function(a){this._swf_upolad_url=a};this.enable=function(){this._enabled=true;this.p_files.className="dhx_upload_files";this.p_controls.className="dhx_upload_controls"};this.disable=function(){this._enabled=false;this.p_files.className="dhx_upload_files dhx_uploader_dis";this.p_controls.className="dhx_upload_controls dhx_uploader_dis"};this.getStatus=function(){var s=0;for(var e in this._files){if(this._files[e].state!="uploaded"){return -1}s=1}return s};this.getData=function(){return this._data};this.clear=function(){if(this.callEvent("onBeforeClear",[])!==true){return}if(this._uploading){l._uploadStop()}l._switchButton(false);l._removeFilesByState(true);this.callEvent("onClear",[])};this.unload=function(){this._removeFilesByState(true);this._data=null;this._files=null;this._items=null;this._unloadEngine();for(var e in this.buttons){this.buttons[e].onclick=null;this.buttons[e].parentNode.removeChild(this.buttons[e]);this.buttons[e]=null;delete this.buttons[e]}this.buttons=null;for(var e in this.b_opts){this.b_opts[e].onclick=null;this.b_opts[e]=null;delete this.b_opts[e]}this.b_opts=null;this.p_controls.parentNode.removeChild(this.p_controls);this.p_files.parentNode.removeChild(this.p_files);this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(var e in this){this[e]=null}l=e=null};var m=new this[this.engine]();for(var o in m){this[o]=m[o];m[o]=null}o=m=b=null;this._initToolbar();this._initEngine();this._checkTitleScreen();return this}dhtmlXFileUploader.prototype.html5=function(){};dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var b=this;this.buttons.browse.onclick=function(){if(b._enabled){b.f.click()}};this._progress_type="percentage";var a=window.navigator.userAgent;if(a.match(/Windows/gi)!=null&&a.match(/AppleWebKit/gi)!=null&&a.match(/Safari/gi)!=null){if(a.match(/Version\/5\.1\.5/gi)){this._upload_mp=false}if(a.match(/Version\/5\.1[^\.\d{1,}]/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.1/gi)){this._upload_mp=false;this._upload_dnd=false}if(a.match(/Version\/5\.1\.2/gi)){this._upload_dnd=false}if(a.match(/Version\/5\.1\.7/gi)){this._upload_mp=false}}this._addFileInput();if(this._upload_dnd){this.p.ondragenter=function(c){if(!c.dataTransfer){return}c.stopPropagation();c.preventDefault()};this.p.ondragover=function(c){if(!c.dataTransfer){return}c.stopPropagation();c.preventDefault()};this.p.ondrop=function(c){if(!c.dataTransfer){return}c.stopPropagation();c.preventDefault();if(b._enabled){b._parseFilesInInput(c.dataTransfer.files)}};this._titleText="Drag-n-Drop files here or<br>click to select files for upload."}else{this._titleText="Click to select files for upload."}},_addFileInput:function(){if(this.f!=null){this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null}var a=this;this.f=document.createElement("INPUT");this.f.type="file";if(this._upload_mp){this.f.multiple="1"}this.f.className="dhx_uploader_input";this.p_controls.appendChild(this.f);this.f.onchange=function(){a._parseFilesInInput(this.files);if(window.dhx4.isOpera){a._addFileInput()}else{this.value=""}}},_doUploadFile:function(c){var b=this;if(!this._loader){this._loader=new XMLHttpRequest();this._loader.upload.onprogress=function(d){if(b._files[this._idd].state=="uploading"){b._updateFileInList(this._idd,"uploading",Math.round(d.loaded*100/d.total))}};this._loader.onload=function(f){var d=dhx4.s2j(this.responseText);if(typeof(d)=="object"&&d!=null&&typeof(d.state)!="undefined"&&d.state==true){b._onUploadSuccess(this.upload._idd,d.name,null,d.extra);d=null}else{b._onUploadFail(this.upload._idd,(d!=null&&d.extra!=null?d.extra:null))}};this._loader.onerror=function(d){b._onUploadFail(this.upload._idd)};this._loader.onabort=function(d){b._onUploadAbort(this.upload._idd)}}this._loader.upload._idd=c;var a=new FormData();a.append("file",this._files[c].file);this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5"+window.dhx4.ajax._dhxr("&"),true);this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest");this._loader.send(a)},_uploadStop:function(){if(!this._uploading||!this._loader){return}this._loader.abort()},_parseFilesInInput:function(b){for(var a=0;a<b.length;a++){this._addFileToQueue(b[a])}},_addFileToQueue:function(a){if(!this._beforeAddFileToList(a.name,a.size)){return}var b=(a._idd||window.dhx4.newId());this._files[b]={file:a,name:a.name,size:a.size,state:"added"};this._addFileToList(b,a.name,a.size,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(d){if(!this._files[d]){return}var b=this._files[d].name;var c=(this._data!=null&&this._data[d]!=null?this._data[d].serverName:null);if(this.callEvent("onBeforeFileRemove",[b,c])!==true){return}var a=false;if(this._uploading&&d==this._loader.upload._idd&&this._files[d].state=="uploading"){this._uploadStop();a=true}this._files[d].file=null;this._files[d].name=null;this._files[d].size=null;this._files[d].state=null;this._files[d]=null;delete this._files[d];this._removeFileFromList(d);this.callEvent("onFileRemove",[b,c]);if(a){this._uploadStart()}},_unloadEngine:function(){this.buttons.browse.onclick=null;this.f.onchange=null;this.f.parentNode.removeChild(this.f);this.f=null;this.p.ondragenter=null;this.p.ondragover=null;this.p.ondrop=null;if(this._loader){this._loader.upload.onprogress=null;this._loader.onload=null;this._loader.onerror=null;this._loader.onabort=null;this._loader.upload._idd=null;this._loader=null}this._initEngine=null;this._doUploadFile=null;this._uploadStop=null;this._parseFilesInInput=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.html4=function(){};dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm();this._progress_type="loader";this._titleText="Click button<br>to select files for upload."},_addForm:function(){var a=this;var c=window.dhx4.newId();if(!this.k){this.k=document.createElement("DIV");this.k.className="dhx_file_form_cont";this.buttons.browse.appendChild(this.k);this.fr_name="dhx_file_"+window.dhx4.newId();this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>';this.fr=this.k.firstChild;if(window.navigator.userAgent.indexOf("MSIE")>=0){this.fr.onreadystatechange=function(){if(this.readyState=="complete"){a._onLoad()}}}else{this.fr.onload=function(){a._onLoad()}}}var b=document.createElement("DIV");b.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+c+"'><input type='file' name='file' class='dhx_file_input'></form>";this.k.appendChild(b);b.firstChild.lastChild._idd=c;b.firstChild.lastChild.onchange=function(){if(!a._beforeAddFileToList(this.value,null)){return}a._addFileToQueue(this);this.onchange=null;this.parentNode.parentNode.style.display="none";a._addForm()};b=null},_onLoad:function(){if(this._uploading){var a=dhx4.s2j(this.fr.contentWindow.document.body.innerHTML);if(typeof(a)=="object"&&a!=null){if(typeof(a.state)!="undefined"){if(a.state=="cancelled"){this._onUploadAbort(this.fr._idd);a=null;return}else{if(a.state==true){if(typeof(a.size)!="undefined"&&!isNaN(a.size)){this._files[this.fr._idd].size=a.size}this._onUploadSuccess(this.fr._idd,a.name,null,a.extra);a=null;return}}}}this._onUploadFail(this.fr._idd,(a!=null&&a.extra!=null?a.extra:null))}},_addFileToQueue:function(b){var a=b.value.match(/[^\\\/]*$/g);if(a[0]!=null){a=a[0]}else{a=b.value}this._files[b._idd]={name:a,form:b.parentNode,node:b.parentNode.parentNode,input:b,state:"added"};this._addFileToList(b._idd,b.value,false,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(c){var a=this._files[c].name;var b=(this._data!=null&&this._data[c]!=null?this._data[c].serverName:null);if(this.callEvent("onBeforeFileRemove",[a,b])!==true){return}this._files[c].input.onchange=null;this._files[c].form.removeChild(this._files[c].input);this._files[c].node.removeChild(this._files[c].form);this._files[c].node.parentNode.removeChild(this._files[c].node);this._files[c].input=null;this._files[c].name=null;this._files[c].form=null;this._files[c].node=null;this._files[c].size=null;this._files[c].state=null;this._files[c]=null;delete this._files[c];this._removeFileFromList(c);this.callEvent("onFileRemove",[a,b])},_doUploadFile:function(a){this.fr._idd=a;this._files[a].form.action=this._url;this._files[a].form.submit()},_uploadStop:function(){if(!this._uploading){return}this.fr.contentWindow.location.href=(this._url)+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel"+window.dhx4.ajax._dhxr("&")},_unloadEngine:function(){if(this.k){this.fr_name=null;this.fr.onreadystatechange=null;this.fr.onload=null;this.fr.parentNode.removeChild(this.fr);this.fr=null;this.k.firstChild.firstChild.lastChild.onchange=null;this.k.parentNode.removeChild(this.k);this.k=null}this._initEngine=null;this._addForm=null;this._onLoad=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.flash=function(){};dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){if(window.dhtmlXSWFObjectsPull==null){window.dhtmlXSWFObjectsPull={items:{},callEvent:function(e,c,d){return window.dhtmlXSWFObjectsPull.items[e].uploader[c].apply(window.dhtmlXSWFObjectsPull.items[e].uploader,d)}}}var b=this;this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId();this._swf_file_url=this._swf_file_url+window.dhx4.ajax._dhxr(this._swf_file_url);this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>";swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var a=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+a.major+"."+a.minor+"."+a.release;this._progress_type="percentage";window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(a,b){return(this.callEvent("onBeforeFileAdd",[a,b])===true)},_addFileToQueue:function(d,b,c){if(window.dhx4.isIE){var a=document.createElement("INPUT");a.type="TEXT";a.style.position="absolute";a.style.left="0px";a.style.top=window.dhx4.absTop(this.buttons.browse)+"px";a.style.width="10px";document.body.appendChild(a);a.focus();document.body.removeChild(a);a=null}this._files[d]={name:b,size:c,state:"added"};this._addFileToList(d,b,c,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(d){if(!this._files[d]){return}var b=this._files[d].name;var c=(this._data!=null&&this._data[d]!=null?this._data[d].serverName:null);if(this.callEvent("onBeforeFileRemove",[b,c])!==true){return}var a=false;if(this._uploading&&this._files[d].state=="uploading"){this._uploadStop();a=true}swfobject.getObjectById(this._swf_obj_id).removeFileById(d);this._files[d].name=null;this._files[d].size=null;this._files[d].state=null;this._files[d]=null;delete this._files[d];this._removeFileFromList(d);this.callEvent("onFileRemove",[b,c]);if(a){this._uploadStart()}},_doUploadFile:function(a){swfobject.getObjectById(this._swf_obj_id).upload(a,this._swf_upolad_url)},_uploadStop:function(c){for(var b in this._files){if(this._files[b].state=="uploading"){swfobject.getObjectById(this._swf_obj_id).uploadStop(b)}}},_unloadEngine:function(){if(window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]){window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].id=null;window.dhtmlXSWFObjectsPull.items[this._swf_obj_id].uploader=null;window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]=null;delete window.dhtmlXSWFObjectsPull.items[this._swf_obj_id]}this._swf_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.sl=function(){};dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){if(typeof(this._sl_v)=="undefined"){this._sl_v=this.getSLVersion()}if(!window.dhtmlXFileUploaderSLObjects){window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(c,a,b){window.dhtmlXFileUploaderSLObjects.items[c].uploader[a].apply(window.dhtmlXFileUploaderSLObjects.items[c].uploader,b)}}}this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId();if(this._sl_v!=false){this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1];this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'}else{this._titleText="Silverlight plugin not found<br>or version less than 4.0";this.buttons.browse.style.cursor="wait";this.buttons.browse.title=""}this._progress_type="percentage";window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(c,a,b){this._files[c]={name:a,size:b,state:"added"};this._addFileToList(c,a,b,"added",0);if(this._autoStart&&!this._uploading){this._uploadStart(true)}},_removeFileFromQueue:function(b){if(!this._files[b]){return}var a=false;if(this._uploading&&this._files[b].state=="uploading"){this._uploadStop();a=true}document.getElementById([this._sl_obj_id]).Content.a.removeFileById(b);this._files[b].name=null;this._files[b].size=null;this._files[b].state=null;this._files[b]=null;delete this._files[b];this._removeFileFromList(b);if(a){this._uploadStart()}},_doUploadFile:function(b){var a=this._sl_upload_url.split("?");a=(a[1]!=null?"&"+a[1]:"");document.getElementById(this._sl_obj_id).Content.a.upload(b,this._sl_upload_url,a+"&mode=sl"+window.dhx4.ajax._dhxr("&"))},_uploadStop:function(c){this._uploading=false;for(var b in this._files){if(this._files[b].state=="uploading"){document.getElementById(this._sl_obj_id).Content.a.uploadStop(b)}}},_unloadEngine:function(){if(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null;window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null;delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]}this._sl_obj_id=null;this._initEngine=null;this._addFileToQueue=null;this._removeFileFromQueue=null;this._doUploadFile=null;this._uploadStop=null;this._unloadEngine=null}};dhtmlXFileUploader.prototype.setSLURL=function(a){this._sl_upload_url=a};dhtmlXFileUploader.prototype.getSLVersion=function(){var a=false;if(window.dhx4.isIE){try{var b=new ActiveXObject("AgControl.AgControl");if(b!=null){var f=4,d=0;while(b.isVersionSupported([f,d].join("."))){a=[f,d];if(++d>9){f++;d=0}}}b=null}catch(c){}}else{if(navigator.plugins["Silverlight Plug-In"]!=null){a=navigator.plugins["Silverlight Plug-In"].description.split(".")}}return a};dhtmlXForm.prototype.saveBackup=function(){if(!this._backup){this._backup={};this._backupId=new Date().getTime()}this._backup[++this._backupId]=this.getFormData();return this._backupId};dhtmlXForm.prototype.restoreBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this.setFormData(this._backup[a])}};dhtmlXForm.prototype.clearBackup=function(a){if(this._backup!=null&&this._backup[a]!=null){this._backup[a]=null;delete this._backup[a]}};dhtmlXForm.prototype.addItem=function(c,a,g,d){var b=null;if(c instanceof Array){b=c[1];c=c[0]}var e=null;if(c!=null){var e=this._getParentForm(c,b);if(e!=null){if(e.item._list==null){if(!a.listParent){a.listParent=e.item._idd}e.form._addItem("list",e.item._idd,[a],null,e.item._idd,g,d)}else{e.item._list[0].addItem(null,a,g,d)}e.form=e.item=null;e=null;this._autoCheck();return}}this._prepareItem(a,g,d);this._autoCheck()};dhtmlXForm.prototype.removeItem=function(b,a){this._removeItem(b,a)};dhtmlXForm.prototype.removeColumn=function(h,g,d,c){var l=null;if(h instanceof Array){l=h[1];h=h[0]}if(h!=null){var e=this._getParentForm(h,l);if(e!=null){if(e.item._list!=null&&e.item._list[0]!=null){e.item._list[0].removeColumn(null,g,d,c)}e.form=e.item=null;e=null}return}g=Math.min(Math.max(g,0),this.cont.childNodes.length-1);if(this.cont.childNodes.length==1){if(d==true){this._removeItemsInColumn(this.cont.childNodes[g])}}else{if(d==true){this._removeItemsInColumn(this.cont.childNodes[g])}else{if(!c){var a=g-1;if(a<0){a=g+1}}else{var a=g+1;if(a>this.cont.childNodes.length-1){a=g-1}}while(this.cont.childNodes[g].childNodes.length>0){this.cont.childNodes[a].appendChild(this.cont.childNodes[g].childNodes[0])}}var j=[];for(var b=0;b<this.base.length;b++){if(this.cont.childNodes[g]!=this.base[b]){j.push(this.base[b])}}this.base=j;this.cont.removeChild(this.cont.childNodes[g]);this.b_index--;j=null}};dhtmlXForm.prototype.getColumnNode=function(c,b){var d=null;var a=null;if(c instanceof Array){a=c[1];c=c[0]}if(c!=null){var e=this._getParentForm(c,a);if(e!=null){if(e.item._list!=null&&e.item._list[0]!=null&&d==null){d=e.item._list[0].getColumnNode(null,b)}e.form=e.item=null;e=null}return d}if(b<0||b>this.cont.childNodes.length-1){return null}return this.cont.childNodes[b]};dhtmlXForm.prototype._removeItemsInColumn=function(d){var a=[];for(var c=0;c<d.childNodes.length;c++){var b=d.childNodes[c];if(b._idd!=null&&b._type!=null){a.push([b._idd,(b._type=="ra"?b._value:null)])}b=null}for(var c=0;c<a.length;c++){this.removeItem(a[c][0],a[c][1])}};dhtmlXForm.prototype._getParentForm=function(g,e){if(this.itemPull[this.idPrefix+g]!=null){return{form:this,item:this.itemPull[this.idPrefix+g]}}for(var b in this.itemPull){if(this.itemPull[b]._type=="ra"&&this.itemPull[b]._group==g&&this.itemPull[b]._value==e){return{form:this,item:this.itemPull[b]}}}var d=null;for(var b in this.itemPull){if(!d&&this.itemPull[b]._list!=null){for(var c=0;c<this.itemPull[b]._list.length;c++){if(!d){d=this.itemPull[b]._list[c]._getParentForm(g,e)}}}}return d};(function(){for(var b in dhtmlXForm.prototype.items){if(!dhtmlXForm.prototype.items[b]._getItemNode){dhtmlXForm.prototype.items[b]._getItemNode=function(a){return a}}}})();dhtmlXForm.prototype._getItemNode=function(b,a){if(a!=null){b=[b,a]}return this.doWithItem(b,"_getItemNode")};dhtmlXForm.prototype.setRequired=function(h,f,e){if(typeof(e)=="undefined"){e=f}else{h=[h,f]}var c=this._getItemNode(h);if(!c){return}e=window.dhx4.s2b(e);c._required=(e==true);if(c._required){if(!c._validate){c._validate=[]}var b=false;for(var d=0;d<c._validate.length;d++){b=(c._validate[d]=="NotEmpty"||b)}if(!b){c._validate.push("NotEmpty")}var g=c.childNodes[c._ll?0:1].childNodes[0];if(!(g.lastChild&&g.lastChild.className&&g.lastChild.className.search(/required/)>=0)){var a=document.createElement("SPAN");a.className="dhxform_item_required";a.innerHTML="*";g.appendChild(a);a=g=null}}else{if(c._validate!=null){var b=c._validate;c._validate=[];for(var d=0;d<b.length;d++){if(b[d]!="NotEmpty"){c._validate.push(b[d])}}if(c._validate.length==0){c._validate=null}}var g=c.childNodes[c._ll?0:1].childNodes[0];if(g.lastChild&&g.lastChild.className&&g.lastChild.className.search(/required/)>=0){g.removeChild(g.lastChild);g=null}}this._resetValidateCss(c);c=null};dhtmlXForm.prototype.setNote=function(e,c,a){if(typeof(a)=="undefined"){a=c}else{e=[e,c]}var b=this._getItemNode(e);if(!b){return}var d=this._getNoteNode(b);if(!d){if(!a.width){a.width=b.childNodes[b._ll?1:0].childNodes[0].offsetWidth}d=document.createElement("DIV");d.className="dhxform_note";if({ch:1,ra:1}[b._type]){b.childNodes[b._ll?1:0].insertBefore(d,b.childNodes[b._ll?1:0].lastChild)}else{b.childNodes[b._ll?1:0].appendChild(d)}}d.innerHTML=a.text;if(a.width!=null){d.style.width=a.width+"px";d._w=a.width}d=null};dhtmlXForm.prototype.clearNote=function(d,b){if(typeof(b)!="undefined"){d=[d,b]}var a=this._getItemNode(d);if(!a){return}var c=this._getNoteNode(a);if(c!=null){c.parentNode.removeChild(c);c=null}};dhtmlXForm.prototype._getNoteNode=function(a){var c=null;for(var b=0;b<a.childNodes[a._ll?1:0].childNodes.length;b++){if(String(a.childNodes[a._ll?1:0].childNodes[b].className).search(/dhxform_note/)>=0){c=a.childNodes[a._ll?1:0].childNodes[b]}}a=null;return c};dhtmlXForm.prototype.setValidation=function(f,d,e){if(typeof(note)=="undefined"){e=d}else{f=[f,d]}var b=this._getItemNode(f);if(!b){return}if(b._validate!=null){for(var c=0;c<b._validate.length;c++){b._validate[c]=null}}b._validate=[];if(typeof(e)=="function"||typeof(window[e])=="function"){b._validate=[e]}else{b._validate=String(e).split(this.separator)}if(b._required){var a=false;for(var c=0;c<b._validate.length;c++){a=(b._validate[c]=="NotEmpty"||a)}if(!a){b._validate.push("NotEmpty")}}b=null};dhtmlXForm.prototype.clearValidation=function(d,c){if(typeof(c)!="undefined"){d=[d,c]}var a=this._getItemNode(d);if(!a){return}if(a._validate!=null){for(var b=0;b<a._validate.length;b++){a._validate[b]=null}}a._validate=a._required?["NotEmpty"]:null;a=null};dhtmlXForm.prototype.reloadOptions=function(a,f){var b=this.getItemType(a);if(!{select:1,multiselect:1,combo:1}[b]){return}if(b=="select"||b=="multiselect"){var d=this.getOptions(a);while(d.length>0){d.remove(0)}d.length=0;d=null;if(typeof(f)=="string"){this.doWithItem(a,"doLoadOptsConnector",f)}else{if(f instanceof Array){this.doWithItem(a,"doLoadOpts",{options:f})}}}if(b=="combo"){var g=this.getCombo(a);g.clearAll();g.setComboValue("");if(typeof(f)=="string"){this.doWithItem(a,"doLoadOptsConnector",f)}else{if(f instanceof Array){var c=null;for(var e=0;e<f.length;e++){if(window.dhx4.s2b(f[e].selected)){c=f[e].value}}g.addOption(f);if(c!=null){this.setItemValue(a,c)}g=null}}}};dhtmlXForm.prototype.setTooltip=function(f,e,d){if(typeof(d)=="undefined"){d=e}else{f=[f,e]}var b=this._getItemNode(f);if(!b){return}var a=null;if(b.childNodes.length==1){a=b.childNodes[0]}else{for(var c=0;c<b.childNodes.length;c++){if(b.childNodes[c].className!=null&&b.childNodes[c].className.search("dhxform_label")>=0){a=b.childNodes[c]}}}if(a!=null){if(d==null||d.length==0){a.removeAttribute("title")}else{a.title=d}}a=null};function dhtmlXLayoutObject(c,j,r){var n=null;if(c!=null&&typeof(c)=="object"&&typeof(c.tagName)=="undefined"&&c._isCell!=true){n={};if(c.autosize!=null){n.autosize=c.autosize}if(c.cells!=null){n.cells=c.cells}if(c.pattern!=null){j=c.pattern}if(c.skin!=null){r=c.skin}if(c.offsets!=null){n.offsets=c.offsets}c=c.parent}this.cdata={};this.conf={skin:(r||window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxlayout")||"material"),css:"dhxlayout",hh:20,autosize:"b",nextCell:{a:"b",b:"a"},inited:false,b_size:{w:-1,h:-1}};if(this.conf.skin=="material"){this.conf.hh=window.dhx4.readFromCss("dhxlayout_base_material dhxlayout_collapsed_height")}if(typeof(c)=="object"&&c._isCell==true){var h=(typeof(n)!="undefined"&&n!=null?n:{});if(h.pattern==null&&j!=null){h.pattern=j}if(h.skin==null&&r!=null){h.skin=r}var f=c.attachLayout(h);return f}window.dhtmlXCellTop.apply(this,[c,(n==null?null:n.offsets)]);this.conf.sw=this._detectSW();var g=this;this._getLayout=function(){return this};this.mainInst=(c._layoutMainInst!=null?c._layoutMainInst:null);this._getMainInst=function(){if(this.mainInst!=null){return this.mainInst._getMainInst()}return this};this._init=function(v){var u=(typeof(v)=="string"?this.tplData[v]:v);this.conf.mode=u.mode;if(this.conf.mode=="c"){this.cdata.a=new dhtmlXLayoutCell("a",this)}else{this.cdata.a=new dhtmlXLayoutCell("a",this);this.cdata.b=new dhtmlXLayoutCell("b",this)}for(var s in this.cdata){this.cont.appendChild(this.cdata[s].cell);this.cdata[s].conf.init={w:0.5,h:0.5}}if(this.conf.mode!="c"){var q=this._getMainInst();if(q.conf.sep_idx==null){q.conf.sep_idx=1}else{q.conf.sep_idx++}this.sep=new dhtmlXLayoutSepObject(this.conf.mode,q.conf.sep_idx);this.cont.appendChild(this.sep.sep);this.sep._getLayout=function(){return g._getLayout()};q=null}if(u.cells!=null){for(var s in u.cells){if(u.cells[s].width!=null){this.cdata[s].conf.init.w=u.cells[s].width}if(u.cells[s].height!=null){this.cdata[s].conf.init.h=u.cells[s].height}if(u.cells[s].name!=null){this.cdata[s].conf.name=u.cells[s].name;this.cdata[s].setText(u.cells[s].name)}if(u.cells[s].fsize!=null){this.cdata[s].conf.fsize=u.cells[s].fsize}}}this.setSizes();for(var s in this.cdata){this.cdata[s].conf.init={}}if(u.cells!=null){for(var s in u.cells){if(u.cells[s].layout!=null){this.cdata[s].dataNested=true;this.cdata[s]._layoutMainInst=this;this.cdata[s].cell.className+=" dhx_cell_nested_layout";this.cdata[s].attachLayout({pattern:u.cells[s].layout});this.cdata[s]._layoutMainInst=null}}}};this.setSizes=function(y,F,B,s){var z=(this.conf.inited==true&&this._getMainInst()==this&&this.checkEvent("onResizeFinish")==true?{}:false);this._adjustCont();var E=this.cont.offsetWidth;var v=this.cont.offsetHeight;if(this.conf.mode=="c"){var a=0;var G=0;var q=E;var D=v;this.cdata.a._setSize(a,G,q,D,y,B,s);this.callEvent("_onSetSizes",[]);if(z&&(!(this.conf.b_size.w==E&&this.conf.b_size.h==v))){this._callMainEvent("onResizeFinish",[])}this.conf.b_size={w:E,h:v};return}if(typeof(F)=="undefined"){var t=(this.conf.mode=="v"?"w":"h");F=this.conf.autosize;if(this.cdata.a.conf.collapsed){F="b"}else{if(this.cdata.b.conf.collapsed){F="a"}else{if(y=="a"||y=="b"){F=this.conf.nextCell[y]}}}}else{}if(this.conf.mode=="v"){if(F=="a"){if(this.cdata.b.conf.init.w!=null){var C=Math.round(E*this.cdata.b.conf.init.w-this.conf.sw/2)}else{var C=this.cdata.b.conf.size.w}var A=E-C;var x=0;var u=v;var a=0;var G=x;var q=A-a-this.conf.sw;var D=u}else{var a=0;var G=0;if(this.cdata.a.conf.init.w!=null){var q=Math.round(E*this.cdata.a.conf.init.w-this.conf.sw/2)-a}else{var q=this.cdata.a.conf.size.w}var D=v-G;var A=a+q+this.conf.sw;var x=G;var C=E-A;var u=D}this.cdata.a._setSize(a,G,q,D,y,B,s);this.cdata.b._setSize(A,x,C,u,y,B,s);this.sep._setSize(a+q,G,this.conf.sw,D)}else{if(F=="a"){if(this.cdata.b.conf.init.h!=null){var u=Math.round(v*this.cdata.b.conf.init.h-this.conf.sw/2)}else{var u=this.cdata.b.conf.size.h}var A=0;var x=v-u;var C=E-A;var a=A;var G=0;var q=C;var D=x-G-this.conf.sw}else{var a=0;var G=0;var q=E-a;if(this.cdata.a.conf.init.h!=null){var D=Math.round(v*this.cdata.a.conf.init.h-this.conf.sw/2)}else{var D=this.cdata.a.conf.size.h}var A=a;var x=G+D+this.conf.sw;var C=q;var u=v-x}this.cdata.a._setSize(a,G,q,D,y,B,s);this.cdata.b._setSize(A,x,C,u,y,B,s);this.sep._setSize(a,G+D,q,this.conf.sw)}this.callEvent("_onSetSizes",[]);if(z&&(!(this.conf.b_size.w==E&&this.conf.b_size.h==v))){this._callMainEvent("onResizeFinish",[])}this.conf.b_size={w:E,h:v}};this._getAvailWidth=function(){var u=[];for(var y=0;y<this.conf.as_cells.h.length;y++){var s=this.cells(this.conf.as_cells.h[y]);var v=s.layout;var t=v.conf.autosize;if(s.conf.collapsed){s=v.cdata[v.conf.nextCell[s._idd]];t=v.conf.nextCell[t]}u.push(Math.max(0,s.getWidth()-s._getMinWidth(t)));v=s=null}var x=(u.length>0?Math.min.apply(window,u):0);return this.cont.offsetWidth-x};this._getAvailHeight=function(){var v=[];for(var x=0;x<this.conf.as_cells.v.length;x++){var s=this.cells(this.conf.as_cells.v[x]);var u=s.layout;var t=u.conf.autosize;if(s.conf.collapsed){s=u.cdata[u.conf.nextCell[s._idd]];t=u.conf.nextCell[t]}v.push(Math.max(0,s.getHeight()-s._getHdrHeight()-s._getMinHeight(t)));u=s=null}var w=Math.min.apply(window,v);return this.cont.offsetHeight-w};this.setSkin=function(a){this._setBaseSkin(a);this.conf.skin=a};this.unload=function(){this.conf.unloading=true;this.mainInst=null;this.parentLayout=null;if(this.items!=null){for(var t=0;t<this.items.length;t++){this.items[t]=null}this.items=null}if(this.dhxWins!=null){this.dhxWins.unload();this.dhxWins=null}if(this.sep!=null){this.sep._unload();this.sep=null}for(var s in this.cdata){this.cdata[s]._unload();this.cdata[s]=null}this._unloadTop();window.dhx4._eventable(this,"clear");for(var s in this){this[s]=null}g=null};this._getWindowMinDimension=function(u){var a=g._getAvailWidth()+7+7;var s=g._getAvailHeight()+7+31;var q={w:Math.max(a,200),h:Math.max(s,140)};u=null;return q};window.dhx4._eventable(this);this._callMainEvent=function(q,a){return this.callEvent(q,a)};this._init(j||"3E");var l=this._availAutoSize[j];if(l!=null){this.conf.pattern=j;this.setAutoSize(l.h[l.h.length-1],l.v[l.v.length-1])}if(typeof(window.dhtmlXWindows)=="function"&&this.mainInst==null){var d={vp_overflow:(this.conf.fs_mode==true?false:"auto")};this.dhxWins=new dhtmlXWindows(d);this.dhxWins.setSkin(this.conf.skin)}this.conf.inited=true;if(this==this._getMainInst()){var m=0;this.items=[];this.forEachItem(function(a){g.items.push(a);a.conf.index=m++})}if(this==this._getMainInst()&&n!=null){if(n.autosize!=null){this.setAutoSize.apply(this,n.autosize)}if(n.cells!=null){for(var b=0;b<n.cells.length;b++){var e=n.cells[b];var o=this.cells(e.id);if(e.width){o.setWidth(e.width)}if(e.height){o.setHeight(e.height)}if(e.text){o.setText(e.text)}if(e.collapsed_text){o.setCollapsedText(e.collapsed_text)}if(e.collapse){o.collapse()}if(e.fix_size){o.fixSize(e.fix_size[0],e.fix_size[1])}if(typeof(e.header)!="undefined"&&window.dhx4.s2b(e.header)==false){o.hideHeader()}}}}n=null;return this}dhtmlXLayoutObject.prototype=new dhtmlXCellTop();dhtmlXLayoutObject.prototype.cells=function(d){for(var b in this.cdata){if(this.cdata[b].conf.name==d){return this.cdata[b]}if(this.cdata[b].dataType=="layout"&&this.cdata[b].dataNested==true&&this.cdata[b].dataObj!=null){var c=this.cdata[b].dataObj.cells(d);if(c!=null){return c}}}return null};dhtmlXLayoutObject.prototype.forEachItem=function(d,c){if(typeof(d)!="function"){return}if(typeof(c)=="undefined"){c=this}for(var b in this.cdata){if(typeof(this.cdata[b].conf.name)!="undefined"){d.apply(c,[this.cdata[b]])}if(this.cdata[b].dataType=="layout"&&this.cdata[b].dataNested==true&&this.cdata[b].dataObj!=null){this.cdata[b].dataObj.forEachItem(d,c)}}c=null};dhtmlXLayoutObject.prototype._forEachSep=function(d,c){if(typeof(d)!="function"){return}if(typeof(c)=="undefined"){c=this}if(this.sep!=null){d.apply(c,[this.sep])}for(var b in this.cdata){if(this.cdata[b].dataType=="layout"&&this.cdata[b].dataNested==true&&this.cdata[b].dataObj!=null){this.cdata[b].dataObj._forEachSep(d,c)}}c=null};dhtmlXLayoutObject.prototype._detectSW=function(){if(this._confGlob.sw==null){this._confGlob.sw={}}if(this._confGlob.sw[this.conf.skin]==null){this._confGlob.sw[this.conf.skin]=window.dhx4.readFromCss("dhxlayout_sep_sw_"+this.conf.skin)}return this._confGlob.sw[this.conf.skin]};dhtmlXLayoutObject.prototype._confGlob={};dhtmlXLayoutObject.prototype.listPatterns=function(){var c=[];for(var b in this.tplData){c.push(b)}return c};dhtmlXLayoutObject.prototype.listAutoSizes=function(){var d=(this.conf.as_cells!=null?(this.conf.as_cells.h).join(";"):"");var c=(this.conf.as_cells!=null?(this.conf.as_cells.v).join(";"):"");var b=this._availAutoSize[this.conf.pattern].h;var a=this._availAutoSize[this.conf.pattern].v;return[d,c,b,a]};dhtmlXLayoutObject.prototype._getCellsNames=function(d){var e={};if(this.cdata[d].conf.name!=null){e[this.cdata[d].conf.name]=true}if(this.cdata[d].dataType=="layout"&&this.cdata[d].dataObj!=null&&this.cdata[d].dataObj.mainInst==this){var b=this.cdata[d].dataObj._getCellsNames("a");var f=this.cdata[d].dataObj._getCellsNames("b");for(var c in b){e[c]=b[c]}for(var c in f){e[c]=f[c]}}return e};dhtmlXLayoutObject.prototype.setAutoSize=function(b,h,j){if(j!==true){var n=this.listAutoSizes();if(n[0]==b&&n[1]==h){return}var g=false;var f=false;for(var c=0;c<n[2].length;c++){g=g||n[2][c]==b}for(var c=0;c<n[3].length;c++){f=f||n[3][c]==h}if(!g||!f){return}}this.conf.as_cells={h:b.split(";"),v:h.split(";")};var d=(this.conf.mode=="v"?"h":"v");for(var l in this.cdata){var e=this._getCellsNames(l);var o=false;for(var c=0;c<this.conf.as_cells[d].length;c++){o=o||e[this.conf.as_cells[d][c]]}if(o){this.conf.autosize=l}if(this.cdata[l].dataType=="layout"&&this.cdata[l].dataObj!=null){this.cdata[l].dataObj.setAutoSize(b,h,true)}}};dhtmlXLayoutObject.prototype.tplData={"1C":{mode:"c",cells:{a:{name:"a"}}},"2E":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{name:"b",fsize:{v:1}}}},"2U":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{name:"b",fsize:{h:1}}}},"3E":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{name:"c",fsize:{v:2}}}}}}},"3W":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{name:"c",fsize:{h:2}}}}}}},"3J":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}},b:{name:"b",fsize:{h:1}}}},"3L":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}}}},"3T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:2,v:1}},b:{name:"c",fsize:{h:2,v:1}}}}}}},"3U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{name:"c",fsize:{v:1}}}},"4H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:[1,2],v:3}},b:{name:"c",fsize:{h:[1,2],v:3}}}}},b:{name:"d",fsize:{h:2}}}}}}},"4I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:3,v:[1,2]}},b:{name:"c",fsize:{h:3,v:[1,2]}}}}},b:{name:"d",fsize:{v:2}}}}}}},"4T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3],v:1}},b:{name:"d",fsize:{h:3,v:1}}}}}}}}}},"4U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[2,3],v:1}},b:{name:"c",fsize:{h:3,v:1}}}}}}}},b:{name:"d",fsize:{v:1}}}},"4E":{mode:"h",cells:{a:{name:"a",height:1/4,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[2,3]}},b:{name:"d",fsize:{v:3}}}}}}}}}},"4W":{mode:"v",cells:{a:{name:"a",width:1/4,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3]}},b:{name:"d",fsize:{h:3}}}}}}}}}},"4A":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[1,3]}},b:{name:"d",fsize:{h:3}}}}}}},"4L":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:2,v:3}},b:{name:"d",fsize:{h:2,v:3}}}}}}}}}},"4J":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:3,v:2}},b:{name:"d",fsize:{h:3,v:2}}}}}}}}}},"4F":{mode:"h",cells:{a:{height:1/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[1,3]}},b:{name:"d",fsize:{v:3}}}}}}},"4G":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{name:"d",fsize:{h:1}}}},"4C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[2,3]}},b:{name:"d",fsize:{h:1,v:3}}}}}}}}}},"5H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:[1,2],v:[3,4]}},b:{name:"d",fsize:{h:[1,2],v:4}}}}}}}},b:{name:"e",fsize:{h:2}}}}}}},"5I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:[1,2]}},b:{name:"d",fsize:{h:4,v:[1,2]}}}}}}}},b:{name:"e",fsize:{v:2}}}}}}},"5U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/4,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:1}},b:{name:"d",fsize:{h:4,v:1}}}}}}}}}}},b:{name:"e",fsize:{v:1}}}},"5E":{mode:"h",cells:{a:{name:"a",height:1/5,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{v:[3,4]}},b:{name:"e",fsize:{v:4}}}}}}}}}}}}},"5W":{mode:"v",cells:{a:{name:"a",width:1/5,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/4,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[3,4]}},b:{name:"e",fsize:{h:4}}}}}}}}}}}}},"5K":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:4}},b:{name:"e",fsize:{h:1,v:4}}}}}}},"5S":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,2]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"5G":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[1,4]}},b:{name:"e",fsize:{h:4}}}}}}},"5C":{mode:"v",cells:{a:{width:2/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2}},b:{name:"b",fsize:{h:[2,1]}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,4]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"6H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:[1,2],v:[4,5]}},b:{name:"e",fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:"f",fsize:{h:2}}}}}}},"6I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/4,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[4,5],v:[1,2]}},b:{name:"e",fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:"f",fsize:{v:2}}}}}}},"6A":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[4,5]}},b:{name:"e",fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:"f",fsize:{h:1}}}},"6C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/5,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:1,v:[4,5]}},b:{name:"f",fsize:{h:1,v:5}}}}}}}}}}}}}}}},"6J":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/4,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[3,4]}},b:{name:"d",fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[1,5]}},b:{name:"f",fsize:{h:5}}}}}}},"6E":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:2,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:2,v:[4,5]}},b:{name:"f",fsize:{h:2,v:5}}}}}}}}}}}}}}}},"6W":{mode:"v",cells:{a:{name:"a",width:1/6,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/5,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/4,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[4,5]}},b:{name:"f",fsize:{h:5}}}}}}}}}}}}}}}},"7H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/5,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/4,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:[1,2],v:[5,6]}},b:{name:"f",fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:"g",fsize:{h:2}}}}}}},"7I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/5,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/4,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[5,6],v:[1,2]}},b:{name:"f",fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:"g",fsize:{v:2}}}}}}}};dhtmlXLayoutObject.prototype._availAutoSize={"1C":{h:["a"],v:["a"]},"2E":{h:["a;b"],v:["a","b"]},"2U":{h:["a","b"],v:["a;b"]},"3E":{h:["a;b;c"],v:["a","b","c"]},"3W":{h:["a","b","c"],v:["a;b;c"]},"3J":{h:["a;c","b"],v:["a;b","b;c"]},"3L":{h:["a","b;c"],v:["a;b","a;c"]},"3T":{h:["a;b","a;c"],v:["a","b;c"]},"3U":{h:["a;c","b;c"],v:["a;b","c"]},"4H":{h:["a","b;c","d"],v:["a;b;d","a;c;d"]},"4I":{h:["a;b;d","a;c;d"],v:["a","b;c","d"]},"4T":{h:["a;b","a;c","a;d"],v:["a","b;c;d"]},"4U":{h:["a;d","b;d","c;d"],v:["a;b;c","d"]},"4E":{h:["a;b;c;d"],v:["a","b","c","d"]},"4W":{h:["a","b","c","d"],v:["a;b;c;d"]},"4A":{h:["a;b","c","d"],v:["a;c;d","b;c;d"]},"4L":{h:["a","b","c;d"],v:["a;b;c","a;b;d"]},"4J":{h:["a;b;c","a;b;d"],v:["a","b","c;d"]},"4F":{h:["a;c;d","b;c;d"],v:["a;b","c","d"]},"4G":{h:["a;b;c","d"],v:["a;d","b;d","c;d"]},"4C":{h:["a","b;c;d"],v:["a;b","a;c","a;d"]},"5H":{h:["a","b;c;d","e"],v:["a;b;e","a;c;e","a;d;e"]},"5I":{h:["a;b;e","a;c;e","a;d;e"],v:["a","b;c;d","e"]},"5U":{h:["a;e","b;e","c;e","d;e"],v:["a;b;c;d","e"]},"5E":{h:["a;b;c;d;e"],v:["a","b","c","d","e"]},"5W":{h:["a","b","c","d","e"],v:["a;b;c;d;e"]},"5K":{h:["a;b;c","d;e"],v:["a;d","b;d","c;d","a;e","b;e","c;e"]},"5S":{h:["a;b","c;d;e"],v:["a;c","a;d","a;e","b;c","b;d","b;e"]},"5G":{h:["a;b;c","d","e"],v:["a;d;e","b;d;e","c;d;e"]},"5C":{h:["a","b","c;d;e"],v:["a;b;c","a;b;d","a;b;e"]},"6H":{h:["a","b;c;d;e","f"],v:["a;b;f","a;c;f","a;d;f","a;e;f"]},"6I":{h:["a;b;f","a;c;f","a;d;f","a;e;f"],v:["a","b;c;d;e","f"]},"6A":{h:["a;b;c;d;e","f"],v:["a;f","b;f","c;f","d;f","e;f"]},"6C":{h:["a","b;c;d;e;f"],v:["a;b","a;c","a;d","a;e","a;f"]},"6J":{h:["a;b;c;d","e","f"],v:["a;e;f","b;e;f","c;e;f","d;e;f"]},"6E":{h:["a","b","c;d;e;f"],v:["a;b;c","a;b;d","a;b;e","a;b;f"]},"6W":{h:["a","b","c","d","e","f"],v:["a;b;c;d;e;f"]},"7H":{h:["a","b;c;d;e;f","g"],v:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"]},"7I":{h:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"],v:["a","b;c;d;e;f","g"]}};function dhtmlXLayoutSepObject(c,a){var b=this;this.conf={mode:c,idx:a,blocked:false,locked:false,btn_left:((window.dhx4.isIE6||window.dhx4.isIE7||window.dhx4.isIE8)&&typeof(window.addEventListener)=="undefined"?1:0)};if(window.dhx4.isIE&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")>=0){this.conf.btn_left=1}this.sep=document.createElement("DIV");this.sep.className="dhxlayout_sep";if(window.dhx4.isIE==true){this.sep.onselectstart=function(){return false}}this.sep.className="dhxlayout_sep dhxlayout_sep_resize_"+this.conf.mode;this._setSize=function(d,g,e,f){this.sep.style.left=d+"px";this.sep.style.top=g+"px";this.sep.style.width=Math.max(e,0)+"px";this.sep.style.height=Math.max(f,0)+"px"};this._lockSep=function(d){this.conf.locked=(d==true);this._blockSep()};this._setWH=function(d){var e=this._getLayout();e.conf.sw=(d==null?e._detectSW():Math.max(parseInt(d)||-1,-1));e._getMainInst().setSizes();e=null};this._blockSep=function(){var d=this._getLayout();var e=d.cdata.a.conf.collapsed||d.cdata.b.conf.collapsed||this.conf.locked;d=null;if(this.conf.blocked==e){return}this.sep.className="dhxlayout_sep"+(e?"":" dhxlayout_sep_resize_"+this.conf.mode);this.conf.blocked=e};this._beforeResize=function(f){if(this.conf.blocked){return}if(this.conf.resize!=null&&this.conf.resize.active==true){return}if(f.type==window.dhx4.dnd.evs.start){this.sep.className+=" dhxlayout_sep_resize_actv";var h=(f.pageX||f.touches[0].pageX);var g=(f.pageY||f.touches[0].pageY)}else{if(f.button!==this.conf.btn_left){return}var h=f.clientX;var g=f.clientY}if(window.dhx4.dnd.p_en==true){window.dhx4.dnd._touchOff()}var d=this._getLayout();this.conf.resize={sx:h,sy:g,tx:f.layerX,ty:f.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:d.cdata.a._getAvailWidth("a"),min_wb:d.cdata.b._getAvailWidth("b"),min_ha:d.cdata.a._getAvailHeight("a"),min_hb:d.cdata.b._getAvailHeight("b")};this.conf.resize.nx=this.conf.resize.sep_x;this.conf.resize.ny=this.conf.resize.sep_y;if(typeof(window.addEventListener)=="function"){window.addEventListener("mousemove",this._doOnMouseMove,false);window.addEventListener("mouseup",this._doOnMouseUp,false);window.addEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,false);window.addEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,false)}else{document.body.attachEvent("onmousemove",this._doOnMouseMove);document.body.attachEvent("onmouseup",this._doOnMouseUp)}d=null};this._onResize=function(g){if(!this.conf.resize.active){this._initResizeArea();this.conf.resize.active=true}if(this.conf.mode=="v"){var d=(g.type=="mousemove"?g.clientX:(g.pageX||g.touches[0].pageX));var f=this.conf.resize.sx-d;this.conf.resize.nx=this.conf.resize.sep_x-f;if(this.conf.resize.nx>this.conf.resize.sep_x+this.conf.resize.min_wb){this.conf.resize.nx=this.conf.resize.sep_x+this.conf.resize.min_wb}else{if(this.conf.resize.nx<this.conf.resize.sep_x-this.conf.resize.min_wa){this.conf.resize.nx=this.conf.resize.sep_x-this.conf.resize.min_wa}}this.r_sep.style.left=this.conf.resize.nx+"px"}else{var h=(g.type=="mousemove"?g.clientY:(g.pageY||g.touches[0].pageY));var f=this.conf.resize.sy-h;this.conf.resize.ny=this.conf.resize.sep_y-f;if(this.conf.resize.ny>this.conf.resize.sep_y+this.conf.resize.min_hb){this.conf.resize.ny=this.conf.resize.sep_y+this.conf.resize.min_hb}else{if(this.conf.resize.ny<this.conf.resize.sep_y-this.conf.resize.min_ha){this.conf.resize.ny=this.conf.resize.sep_y-this.conf.resize.min_ha}}this.r_sep.style.top=this.conf.resize.ny+"px"}};this._afterResize=function(m){if(typeof(window.addEventListener)=="function"){window.removeEventListener("mousemove",this._doOnMouseMove,false);window.removeEventListener("mouseup",this._doOnMouseUp,false);window.removeEventListener(window.dhx4.dnd.evs.move,this._doOnMouseMove,false);window.removeEventListener(window.dhx4.dnd.evs.end,this._doOnMouseUp,false)}else{document.body.detachEvent("onmousemove",this._doOnMouseMove);document.body.detachEvent("onmouseup",this._doOnMouseUp)}if(!this.conf.resize.active){this.conf.resize=null;return}if(m.type==window.dhx4.dnd.evs.end){this.sep.className=this.sep.className.replace(/\s{0,}dhxlayout_sep_resize_actv/gi,"")}else{if(m.button!==this.conf.btn_left){return}}var h=this._getLayout();var f=h._getMainInst();var j=(f.checkEvent("onPanelResizeFinish")==true?{}:false);if(j!==false){f.forEachItem(function(e){j[e.conf.name]={w:e.conf.size.w,h:e.conf.size.h};e=null})}var g=this.conf.resize.nx-this.conf.resize.sep_x;var d=this.conf.resize.ny-this.conf.resize.sep_y;h.cdata.a._setSize(h.cdata.a.conf.size.x,h.cdata.a.conf.size.y,h.cdata.a.conf.size.w+g,h.cdata.a.conf.size.h+d,"a");h.cdata.b._setSize(h.cdata.b.conf.size.x+g,h.cdata.b.conf.size.y+d,h.cdata.b.conf.size.w-g,h.cdata.b.conf.size.h-d,"b");this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),parseInt(this.r_sep.style.height));if(window.dhx4.isIE){var n=this;window.setTimeout(function(){n._removeResizeArea();n=null},1)}else{this._removeResizeArea()}if(j!==false){var l=[];f.forEachItem(function(e){var o=j[e.conf.name];if(!(o.w==e.conf.size.w&&o.h==e.conf.size.h)){l.push(e.conf.name)}e=null});f._callMainEvent("onPanelResizeFinish",[l])}f=h=null;this.conf.resize.active=false;this.conf.resize=null;if(window.dhx4.dnd.p_en==true){window.dhx4.dnd._touchOn()}};this._initResizeArea=function(){if(this.r_sep==null){this.r_sep=document.createElement("DIV");this.r_sep.className="dhxlayout_resize_sep";this.r_sep.style.left=this.sep.style.left;this.r_sep.style.top=this.sep.style.top;this.r_sep.style.width=this.sep.style.width;this.r_sep.style.height=this.sep.style.height;this.sep.parentNode.appendChild(this.r_sep);if(window.dhx4.isIE){this.r_sep.onselectstart=function(){return false}}}if(this.r_area==null){this.r_area=document.createElement("DIV");this.r_area.className="dhxlayout_resize_area";this.sep.parentNode.appendChild(this.r_area);if(window.dhx4.isIE){this.r_area.onselectstart=function(){return false}}if(this.conf.mode=="v"){var d=parseInt(this.r_sep.style.left)-this.conf.resize.min_wa;var g=parseInt(this.r_sep.style.top);var e=this.conf.resize.min_wa+this.conf.resize.min_wb+parseInt(this.r_sep.style.width);var f=parseInt(this.r_sep.style.height)}else{var d=parseInt(this.r_sep.style.left);var g=parseInt(this.r_sep.style.top)-this.conf.resize.min_ha;var e=parseInt(this.r_sep.style.width);var f=this.conf.resize.min_ha+this.conf.resize.min_hb+parseInt(this.r_sep.style.height)}this.r_area.style.left=d+"px";this.r_area.style.top=g+"px";if(!dhtmlXLayoutObject.prototype._confGlob.reszieCover){dhtmlXLayoutObject.prototype._confGlob.reszieCover={};this.r_area.style.width=e+"px";this.r_area.style.height=f+"px";dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth;dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight}this.r_area.style.width=e+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+"px";this.r_area.style.height=f+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+"px"}document.body.className+=" dhxlayout_resize_"+this.conf.mode};this._removeResizeArea=function(){this.r_sep.onselectstart=null;this.r_sep.parentNode.removeChild(this.r_sep);this.r_sep=null;this.r_area.onselectstart=null;this.r_area.parentNode.removeChild(this.r_area);this.r_area=null;document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,"")};this._doOnMouseDown=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.cancelBubble=true}b._beforeResize(d)};this._doOnBodyMouseDown=function(d){d=d||event;if(b.conf.resize==null){return}if(b.conf.resize.active==true&&d.button!==b.conf.btn_left){if(d.preventDefault){d.preventDefault()}d.returnValue=false;d.cancelBubble=true;return false}};this._doOnMouseMove=function(d){d=d||event;if(d.preventDefault){d.preventDefault()}else{d.cancelBubble=true}b._onResize(d)};this._doOnMouseUp=function(d){d=d||event;if(d.type=="mouseup"&&d.button!==b.conf.btn_left){return}b._afterResize(d)};if(typeof(window.addEventListener)=="function"){this.sep.addEventListener("mousedown",this._doOnMouseDown,false);this.sep.addEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,false);document.body.addEventListener("mousedown",this._doOnBodyMouseDown,false);document.body.addEventListener("contextmenu",this._doOnBodyMouseDown,false)}else{this.sep.attachEvent("onmousedown",this._doOnMouseDown);document.body.attachEvent("onmousedown",this._doOnBodyMouseDown);document.body.attachEvent("oncontextmenu",this._doOnBodyMouseDown)}this._unload=function(){if(typeof(window.addEventListener)=="function"){this.sep.removeEventListener("mousedown",this._doOnMouseDown,false);this.sep.removeEventListener(window.dhx4.dnd.evs.start,this._doOnMouseDown,false);document.body.removeEventListener("mousedown",this._doOnBodyMouseDown,false);document.body.removeEventListener("contextmenu",this._doOnBodyMouseDown,false)}else{this.sep.detachEvent("onmousedown",this._doOnMouseDown);document.body.detachEvent("onmousedown",this._doOnBodyMouseDown);document.body.detachEvent("oncontextmenu",this._doOnBodyMouseDown)}if(window.dhx4.isIE==true){this.sep.onselectstart=null}this.sep.parentNode.removeChild(this.sep);this.sep=null;for(var d in this){this[d]=null}b=null};return this}dhtmlXLayoutObject.prototype.setSeparatorSize=function(c,d){if(typeof(c)=="number"){var e=this.setSeparatorSize({index:c,current:-1},d);if(e.sep!=null){e.sep._setWH(d)}return}for(var b in this.cdata){if(this.cdata[b].dataType=="layout"&&this.cdata[b].dataNested==true&&this.cdata[b].dataObj!=null){c=this.cdata[b].dataObj.setSeparatorSize(c,d);if(c.sep!=null){return c}}if(b=="a"&&this.sep!=null){c.current++;if(c.index==c.current){return{sep:this.sep}}}}return c};window.dhtmlXLayoutCell=function(d,c){dhtmlXCellObject.apply(this,[d,"_layout"]);var b=this;this.layout=c;this.conf.skin=this.layout.conf.skin;this.conf.mode=this.layout.conf.mode;this.conf.collapsed=false;this.conf.fixed={w:false,h:false};this.conf.docked=true;if(this.conf.skin=="material"){this.conf.min_width=42;this.conf.min_height=26}else{this.conf.min_width=26;this.conf.min_height=26}this.attachEvent("_onCellUnload",function(){this.cell.childNodes[this.conf.idx.hdr].ondblclick=null;if(this.conf.mode!="c"){this.cell.childNodes[this.conf.idx.hdr].lastChild.onclick=null}this._unloadDocking();this.layout=null;b=null});this._hdrInit();this.cell.childNodes[this.conf.idx.hdr].ondblclick=function(){var e=b.layout._getMainInst();e._callMainEvent("onDblClick",[b.conf.name]);e=null};this.attachEvent("_onContentLoaded",function(){var e=this.layout._getMainInst();e._callMainEvent("onContentLoaded",[this.conf.name]);e=null});if(this.conf.mode!="c"){var a=document.createElement("DIV");a.className="dhxlayout_arrow dhxlayout_arrow_"+this.conf.mode+this._idd;this.cell.childNodes[this.conf.idx.hdr].appendChild(a);a.onclick=function(f){if(b.conf.collapsed){b.expand()}else{b.collapse()}};a=null}this.attachEvent("_onBeforeContentAttach",function(e){if(e=="tabbar"||e=="layout"||e=="acc"){this._hideBorders()}if(e=="sidebar"&&this.conf.skin!="dhx_skyblue"&&this.conf.skin!="dhx_terrace"){this._hideBorders();this.showHeader()}});this._initDocking();return this};dhtmlXLayoutCell.prototype=new dhtmlXCellObject();dhtmlXLayoutCell.prototype.getId=function(){return this.conf.name};dhtmlXLayoutCell.prototype._initDocking=function(){var a=this;this.dock=function(){var c=this.layout._getMainInst();if(c.dhxWins==null||this.conf.docked){c=null;return}var b=c.dhxWins.window(this.conf.name);b.close();this._attachFromCell(b);this.conf.docked=true;if(!this.conf.dock_collapsed){this.expand()}c._callMainEvent("onDock",[this.conf.name]);c=b=null};this.undock=function(b,g,e,f){var d=this.layout._getMainInst();if(d.dhxWins==null||this.conf.docked==false){d=null;return}this.conf.dock_collapsed=this.conf.collapsed;if(!this.conf.collapsed){this.collapse()}if(d.dhxWins.window(this.conf.name)!=null){var c=d.dhxWins.window(this.conf.name);c.show()}else{if(b==null){b=20}if(g==null){g=20}if(e==null){e=320}if(f==null){f=200}var c=d.dhxWins.createWindow(this.conf.name,b,g,e,f);c.button("close").hide();c.addUserButton("dock",99,"Dock");c.button("dock").show();c.button("dock").attachEvent("onClick",this._doOnDockClick);c.setText(this.getText());c.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=false;c._attachFromCell(this);d._callMainEvent("onUnDock",[this.conf.name]);d=c=null};this._doOnDockClick=function(){a.dock()};this._doOnDockWinClose=function(b){b.hide();return false};this._unloadDocking=function(){a=null}};dhtmlXLayoutCell.prototype._hdrInit=function(){var b="";if(window.dhx4.isIE){if(navigator.userAgent.indexOf("MSIE 9.0")!=-1){b=" dhx_cell_hdr_text_ie9"}else{if(window.dhx4.isIE8){b=" dhx_cell_hdr_text_ie8"}else{if(window.dhx4.isIE7){b=" dhx_cell_hdr_text_ie7"}else{if(window.dhx4.isIE6){b=" dhx_cell_hdr_text_ie6"}}}}}else{if(window.dhx4.isChrome||window.dhx4.isKHTML){b=" dhx_cell_hdr_text_chrome"}}var a=document.createElement("DIV");a.className="dhx_cell_hdr";a.innerHTML="<div class='dhx_cell_hdr_text"+b+"'></div>";this.cell.insertBefore(a,this.cell.childNodes[this.conf.idx.cont]);a=null;this.conf.ofs_nodes.t._getHdrHeight="func";this.conf.hdr={visible:true};this.conf.idx_data.hdr="dhx_cell_hdr";this._updateIdx();this.attachEvent("_onSetSize",this._hdrOnSetSize);this.attachEvent("_onBorderChange",this._hdrOnBorderChange);this.attachEvent("_onViewSave",this._hdrOnViewSave);this.attachEvent("_onViewRestore",this._hdrOnViewRestore)};dhtmlXLayoutCell.prototype.showHeader=function(a){if(this.conf.hdr.visible||this.conf.collapsed){return}if(this.conf.hdr.w_saved>this._getAvailWidth()||this.conf.hdr.h_saved>this._getAvailHeight()){return}this.conf.hdr.w_saved=this.conf.hdr.h_saved=null;this.conf.hdr.visible=true;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr";if(a!==true){this._adjustCont(this._idd)}};dhtmlXLayoutCell.prototype.hideHeader=function(a){if(!this.conf.hdr.visible||this.conf.collapsed){return}this.conf.hdr.w_saved=this._getMinWidth(this._idd);this.conf.hdr.h_saved=this._getMinHeight(this._idd);this.conf.hdr.visible=false;this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden";this._hdrUpdBorder();this._mtbUpdBorder();if(a!==true){this._adjustCont(this._idd)}};dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return(this.conf.hdr.visible==true)};dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=""};dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display="none"};dhtmlXLayoutCell.prototype.isArrowVisible=function(){return(this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=="")};dhtmlXLayoutCell.prototype.setText=function(a){this.conf.hdr.text=a;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getText=function(){return this.conf.hdr.text};dhtmlXLayoutCell.prototype.setCollapsedText=function(a){this.conf.hdr.text_collapsed=a;this._hdrUpdText()};dhtmlXLayoutCell.prototype.getCollapsedText=function(){return(this.conf.hdr.text_collapsed!=null?this.conf.hdr.text_collapsed:this.conf.hdr.text)};dhtmlXLayoutCell.prototype._hdrUpdText=function(){var a=(this.conf.collapsed==true&&this.conf.hdr.text_collapsed!=null?this.conf.hdr.text_collapsed:this.conf.hdr.text);this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+a+"</span>"};dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){if(this.conf.borders==true){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"+(this.conf.hdr.visible?"":" dhx_cell_hdr_hidden")}else{if(!this.conf.hdr.visible){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden_no_borders"}}};dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){if(this.conf.collapsed&&this.conf.mode=="v"){this._fitHdr()}};dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(true);this._hdrUpdBorder()};dhtmlXLayoutCell.prototype._hdrOnViewSave=function(a){this.views[a].hdr_vis=this.conf.hdr.visible};dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(a){if(this.conf.hdr.visible!=this.views[a].hdr_vis){this[this.views[a].hdr_vis?"showHeader":"hideHeader"](true)}this.views[a].hdr_vis=null;delete this.views[a].hdr_vis};dhtmlXLayoutCell.prototype._getHdrHeight=function(a){if(this.conf.collapsed&&this.conf.mode=="v"&&a!==true){return 27}return this.cell.childNodes[this.conf.idx.hdr].offsetHeight};dhtmlXLayoutCell.prototype._fitHdr=function(){var b=this.cell.childNodes[this.conf.idx.hdr];if(this.conf.collapsed==true){if(typeof(dhtmlXLayoutObject.prototype._confGlob.hdrColH)=="undefined"){b.style.height=this.cell.offsetHeight+"px";dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(b.style.height)-this._getHdrHeight(true)}var a=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH;b.style.height=a+"px";b.firstChild.style.width=a-39+"px"}else{b.firstChild.style.width=b.style.height=null}b=null};dhtmlXLayoutCell.prototype.expand=function(g){if(!this.conf.collapsed){return true}var c=this.layout;if(this.conf.mode=="v"){var f=(g?c.conf.hh:c.cdata[c.conf.nextCell[this._idd]]._getMinWidth(this._idd));var d=c.cont.offsetWidth-c.conf.sw;if(f+this.conf.size.w_avl>d){c=null;return false}}else{var e=(g?c.conf.hh:c.cdata[c.conf.nextCell[this._idd]]._getMinHeight(this._idd)+c.cdata[c.conf.nextCell[this._idd]]._getHdrHeight());var b=c.cont.offsetHeight-c.conf.sw;if(e+this.conf.size.h_avl>b){c=null;return false}}if(this.conf.docked==false){this.dock();return}if(this.conf.hdr.visible==false){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden";this._hdrUpdBorder()}this.cell.className=String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,"");this.conf.collapsed=false;if(this.conf.mode=="v"){this.conf.size.w=Math.min(d-f,this.conf.size.w_saved);this.conf.size.w_saved=this.conf.size.w_avl=null}else{this.conf.size.h=Math.min(b-e,this.conf.size.h_saved);this.conf.size.h_saved=this.conf.size.h_avl=null}if(this.conf.mode=="v"){this._fitHdr()}c.setSizes(c.conf.nextCell[this._idd],c.conf.nextCell[this._idd],g==true,"expand");c.sep._blockSep();c=null;this._hdrUpdText();var a=this.layout._getMainInst();a._callMainEvent("onExpand",[this.conf.name]);a=null;return true};dhtmlXLayoutCell.prototype.collapse=function(){if(this.conf.collapsed){return false}var b=this.layout;if(b.cdata[b.conf.nextCell[this._idd]].expand(true)==false){return false}if(this.conf.mode=="v"){this.conf.size.w_saved=this.conf.size.w;this.conf.size.w_avl=this._getMinWidth(this._idd)}else{this.conf.size.h_saved=this.conf.size.h;this.conf.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight()}if(this.conf.hdr.visible==false){this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"}this.cell.className+=" dhxlayout_collapsed_"+this.conf.mode;this.conf.collapsed=true;if(this.conf.mode=="v"){this.conf.size.w=b.conf.hh}else{this.conf.size.h=this._getHdrHeight()}b.setSizes(b.conf.nextCell[this._idd],b.conf.nextCell[this._idd],false,"collapse");b.sep._blockSep();b=null;this._hdrUpdText();var a=this.layout._getMainInst();a._callMainEvent("onCollapse",[this.conf.name]);a=null;return true};dhtmlXLayoutCell.prototype.isCollapsed=function(){return(this.conf.collapsed==true)};dhtmlXLayoutCell.prototype.setMinWidth=function(a){this.conf.min_width=parseInt(a)||0};dhtmlXLayoutCell.prototype.setMinHeight=function(a){this.conf.min_height=parseInt(a)||0};dhtmlXLayoutCell.prototype._getMinWidth=function(b){if(this.dataType=="layout"&&this.dataObj!=null){if(this.layout._getMainInst()!=this.dataObj._getMainInst()){return this.dataObj._getAvailWidth()}if(this.dataObj.conf.pattern=="1C"){return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(b))}else{if(this.dataObj.conf.mode=="v"){var a=b||this._idd;if(this.dataObj.cdata[a].conf.collapsed){a=this.dataObj.conf.nextCell[a]}return Math.max(this.conf.min_width,this.dataObj.cdata[a]._getMinWidth(b)+this.dataObj.cdata[this.dataObj.conf.nextCell[a]]._getWidth()+this.dataObj.conf.sw)}else{return Math.max(this.conf.min_width,this.dataObj.cdata.a._getMinWidth(b),this.dataObj.cdata.b._getMinWidth(b))}}}return Math.max(this.conf.min_width,1)};dhtmlXLayoutCell.prototype._getMinHeight=function(c){var b=0;if(this.conf.idx.menu!=null){b+=this.cell.childNodes[this.conf.idx.menu].offsetHeight}if(this.dataType=="layout"&&this.dataObj!=null){if(this.layout._getMainInst()!=this.dataObj._getMainInst()){return this.dataObj._getAvailHeight()}if(this.dataObj.conf.pattern=="1C"){return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(c))}else{if(this.dataObj.conf.mode=="h"){var a=c;if(this.dataObj.cdata[a].conf.collapsed){a=this.dataObj.conf.nextCell[a]}return Math.max(this.conf.min_height,this.dataObj.cdata[a]._getMinHeight(c)+this.dataObj.cdata[a]._getHdrHeight()+this.dataObj.cdata[this.dataObj.conf.nextCell[a]]._getHeight()+this.dataObj.conf.sw)}else{return Math.max(this.conf.min_height,this.dataObj.cdata.a._getMinHeight(c)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(c)+this.dataObj.cdata.b._getHdrHeight())}}}return Math.max(this.conf.min_height,b)};dhtmlXLayoutCell.prototype._getAvailWidth=function(c){if(this.dataType=="layout"&&this.dataObj!=null){if(this.dataObj.conf.pattern=="1C"){return this.dataObj.cdata.a._getAvailWidth(c)}else{if(this.dataObj.conf.mode=="v"){var a=(this.dataObj.cdata.a.conf.collapsed==true);var b=(this.dataObj.cdata.b.conf.collapsed==true);if(c=="a"){return this.dataObj.cdata[b?"a":"b"]._getAvailWidth(c)}else{return this.dataObj.cdata[a?"b":"a"]._getAvailWidth(c)}}else{return Math.min(this.dataObj.cdata.a._getAvailWidth(c),this.dataObj.cdata.b._getAvailWidth(c))}}}return this.cell.offsetWidth-this._getMinWidth()};dhtmlXLayoutCell.prototype._getAvailHeight=function(d){if(this.dataType=="layout"&&this.dataObj!=null){if(this.dataObj.conf.pattern=="1C"){return this.dataObj.cdata.a._getAvailHeight(d)}else{if(this.dataObj.conf.mode=="h"){var b=(this.dataObj.cdata.a.conf.collapsed==true);var c=(this.dataObj.cdata.b.conf.collapsed==true);if(d=="a"){return this.dataObj.cdata[c?"a":"b"]._getAvailHeight(d)}else{return this.dataObj.cdata[b?"b":"a"]._getAvailHeight(d)}}else{return Math.min(this.dataObj.cdata.a._getAvailHeight(d),this.dataObj.cdata.b._getAvailHeight(d))}}}var a=this._getHdrHeight();if(this.conf.mode=="v"&&this.conf.collapsed){a=this.conf.hh}return this.cell.offsetHeight-a-this._getMinHeight()};dhtmlXLayoutCell.prototype.setWidth=function(d){if(this.conf.mode=="v"){if(this.conf.collapsed){return}var e=this.layout;var f=e.cdata[e.conf.nextCell[this._idd]];if(f.conf.collapsed){d=d+e.conf.sw+f._getWidth();g=e=f=null;return}var c=this._getMinWidth(this._idd);var h=e.cont.offsetWidth-f._getMinWidth(this._idd)-e.conf.sw;d=Math.max(c,Math.min(d,h));this.conf.size.w=d;e.setSizes(f._idd,f._idd);e=f=null}else{if(this.layout==null||this.layout.parentLayout==null){return}var g=this.layout.parentLayout;var e=this.layout;var f=e.cdata[e.conf.nextCell[this._idd]];for(var b in g.cdata){if(g.cdata[b].dataObj==e){g.cdata[b].setWidth(d)}}g=e=null}};dhtmlXLayoutCell.prototype.setHeight=function(g){if(this.conf.mode=="h"){if(this.conf.collapsed){return}var d=this.layout;var f=d.cdata[d.conf.nextCell[this._idd]];if(f.conf.collapsed){g=g+d.conf.sw+f._getHeight();var j=(this.layout!=null&&this.layout.parentLayout!=null?this.layout.parentLayout:null);if(j!=null){for(var b in j.cdata){if(j.cdata[b].dataObj==d){j.cdata[b].setHeight(g)}}}j=d=f=null;return}var e=this._getMinHeight(this._idd)+this._getHdrHeight();var c=d.cont.offsetHeight-f._getMinHeight(this._idd)-f._getHdrHeight()-d.conf.sw;g=Math.max(e,Math.min(g,c));this.conf.size.h=g;d.setSizes(f._idd,f._idd);d=f=null}else{if(this.layout==null||this.layout.parentLayout==null){return}var j=this.layout.parentLayout;var d=this.layout;var f=d.cdata[d.conf.nextCell[this._idd]];for(var b in j.cdata){if(j.cdata[b].dataObj==d){j.cdata[b].setHeight(g)}}j=d=null}};dhtmlXLayoutCell.prototype.getWidth=function(){return this.conf.size.w};dhtmlXLayoutCell.prototype.getHeight=function(){return this.conf.size.h};dhtmlXLayoutCell.prototype.fixSize=function(b,d){this.conf.fixed.w=window.dhx4.s2b(b);this.conf.fixed.h=window.dhx4.s2b(d);var a=this.layout._getMainInst();var c={};a.forEachItem(function(e){if(e.conf.fsize!=null){var j=e.getId();var h={h:(e.conf.fixed.w==true),v:(e.conf.fixed.h==true)};for(var f in h){if(h[f]==true&&e.conf.fsize[f]!=null){if(!(e.conf.fsize[f] instanceof Array)){e.conf.fsize[f]=[e.conf.fsize[f]]}for(var g=0;g<e.conf.fsize[f].length;g++){c[e.conf.fsize[f][g]]=true}}}}e=null});a._forEachSep(function(e){e._lockSep(c[e.conf.idx]==true);e=null});a=null};dhtmlXCellObject.prototype.attachLayout=function(a){this.callEvent("_onBeforeContentAttach",["layout"]);var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";this._attachObject(b);if(typeof(this._layoutMainInst)!="undefined"){b._layoutMainInst=this._layoutMainInst}if(typeof(window.dhtmlXLayoutCell)=="function"&&this instanceof window.dhtmlXLayoutCell){b._isParentCell=true;if(this.conf.skin=="material"&&String(this.cell.className).match(/dhx_cell_nested_layout/)==null){this.cell.className+=" dhx_cell_nested_layout"}}if(typeof(window.dhtmlXAccordionCell)=="function"&&this instanceof window.dhtmlXAccordionCell){if(this.conf.skin=="material"){b._ofs={t:14,r:14,b:14,l:14}}else{b._ofs={t:-1,r:-1,l:-1,b:-1}}}if(typeof(window.dhtmlXTabBarCell)=="function"&&this instanceof window.dhtmlXTabBarCell){if(this.conf.skin=="dhx_skyblue"){b._ofs={t:-1,r:-1,b:-1,l:-1}}if(this.conf.skin=="material"){b._ofs={t:8,r:8,b:8,l:8}}}if(typeof(window.dhtmlXSideBarCell)=="function"&&this instanceof window.dhtmlXSideBarCell){if(this.conf.skin=="dhx_web"){b._ofs={l:8};if(this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.sidebar.conf.header==true){b._ofs.t=9}}else{if(this.conf.skin=="dhx_terrace"){b._ofs={l:11};if(this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.sidebar.conf.header==true){b._ofs.t=10}}else{b._ofs={l:-1}}}}if(typeof(window.dhtmlXCarouselCell)=="function"&&this instanceof window.dhtmlXCarouselCell){this._hideBorders()}if(typeof(window.dhtmlXWindowsCell)=="function"&&this instanceof window.dhtmlXWindowsCell){if(this.conf.skin=="material"){b._ofs={t:14,r:14,b:14,l:14}}}if(typeof(a)=="string"){a={pattern:a}}if(typeof(a.skin)=="undefined"){a.skin=this.conf.skin}a.parent=b;this.dataType="layout";this.dataObj=new dhtmlXLayoutObject(a);if(this instanceof window.dhtmlXLayoutCell){this.dataObj.parentLayout=this.layout}b._layoutMainInst=null;a.parent=null;b=a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};function dhtmlXTabBar(d,g){var e=this;this.conf={skin:(window.dhx4.skin||(typeof(dhtmlx)!="undefined"?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"material"),css:"dhxtabbar",lastActive:null,closeButton:false,align:"left",tabsMode:(g=="bottom"?"bottom":"top"),tabsContCss:"",contZone:true,transSpeed:"0.15s",arwMode:"always",tabsOfs:1,tabsTop:0,url_demand:false,urls:{},autoload:{},tabsWidth:{dhx_terrace:[44,14],dhx_web:[35,9],dhx_skyblue:[35,9],material:[44,14]}};if(this.conf.skin=="material"){this.conf.arwMode="auto"}var b=navigator.userAgent;if(b.indexOf("Safari")>=0&&(b.indexOf("5.1.7")>=0||(b.match(/7[\.\d]* mobile/gi)!=null&&b.match(/AppleWebKit/gi)!=null))){this.conf.tabsContCss=" safari_517_fix"}var f;if(d!=null&&typeof(d)=="object"&&typeof(d.tagName)=="undefined"){f=d.parent;if(typeof(d.skin)!="undefined"){this.conf.skin=d.skin}if(typeof(d.mode)!="undefined"){this.conf.tabsMode=(d.mode=="bottom"?"bottom":"top")}if(typeof(d.align)!="undefined"){this.conf.align=(d.align=="right"?"right":"left")}if(typeof(d.close_button)!="undefined"){this.conf.closeButton=window.dhx4.s2b(d.close_button)}if(typeof(d.content_zone)!="undefined"){this.conf.contZone=window.dhx4.s2b(d.content_zone)}if(typeof(d.xml)!="undefined"){this.conf.autoload.xml=d.xml}if(typeof(d.json)!="undefined"){this.conf.autoload.xml=d.json}if(typeof(d.tabs)!="undefined"){this.conf.autoload.tabs=d.tabs}if(typeof(d.onload)!="undefined"){this.conf.autoload.onload=d.onload}if(typeof(d.arrows_mode)!="undefined"){this.conf.autoload.arrows_mode=d.arrows_mode}}else{f=d}window.dhtmlXCellTop.apply(this,[f,d.offsets]);if(this.base._ofs!=null&&this.base._ofs.t!=null){this.conf.tabsTop=this.base._ofs.t}this.tabsMode=document.createElement("DIV");this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.cont.appendChild(this.tabsMode);this.tabsArea=document.createElement("DIV");this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss+"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>";this.tabsArea.style.top=(this.conf.tabsMode=="top"?this.conf.tabsTop+"px":"auto");this.tabsMode.appendChild(this.tabsArea);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";this.tabsArea.childNodes[0].onclick=function(){if(e.conf.align=="left"){e._moveTabs(1)}else{e._moveTabs(-1)}};this.tabsArea.childNodes[2].onclick=function(){if(e.conf.align=="left"){e._moveTabs(-1)}else{e._moveTabs(1)}};this._onTabsAreaClick=function(a){return this._callMainEvent("onTabClose",[a])};this.tabsArea.onclick=function(h){h=h||event;var a=(h.target||h.srcElement);while(a!=null){if(typeof(a._tabCloseId)!="undefined"){if(e._onTabsAreaClick(a._tabCloseId)!==true){return}e.t[a._tabCloseId].conf.remove=true;e._hideTab(a._tabCloseId);a=null}else{if(typeof(a._tabId)!="undefined"){e._doOnClick(a._tabId);a=null}}if(a!=null){a=a.parentNode;if(a==this){a=null}}}};this.tabsArea.onselectstart=function(a){a=a||event;if(a.preventDefault){a.preventDefault()}else{a.returnValue=false}};this._doOnClick=function(a){this.callEvent("onTabClick",[a,this.conf.lastActive]);if(this.t[a].conf.enabled){this._setTabActive(a)}};this.t={};this.addTab=function(a,q,j,n,m,r){r=(typeof(r)=="undefined"?(this.conf.closeButton==true):window.dhx4.s2b(r));m=window.dhx4.s2b(m);var l=document.createElement("DIV");l.className="dhxtabbar_tab";l.innerHTML="<div class='dhxtabbar_tab_text"+(r?" dhxtabbar_tab_text_close":"")+"'>"+q+"</div>"+(r?"<div class='dhxtabbar_tab_close'></div>":"");l._tabId=a;if(r){l.childNodes[1]._tabCloseId=a}var h=this.tabsArea.childNodes[1].firstChild;if(n!=null&&n+1>0&&n+1<h.childNodes.length){h.insertBefore(l,h.childNodes[n+1])}else{h.appendChild(l)}var s=false;if(typeof(j)=="undefined"||j==null||j=="*"){j=this._getLabelWidth(q,r);s=true}else{j=parseInt(j)}l.style.width=j+"px";var o=new dhtmlXTabBarCell(a,this);this.tabsMode.appendChild(o.cell);this.t[a]={tab:l,cell:o,conf:{text:q,visible:true,active:false,enabled:true,close:r,width:j,autowidth:s}};h=o=null;if(m){this._setTabActive(a)}else{this._adjustCell(a)}if(this.conf.initSeq!=true&&this.conf.arwMode=="auto"){this.setSizes()}};this.setSizes=function(){this._adjustCont();if(this.conf.tabsAreaOfs==null){this.tabsArea.style.width=this.cont.offsetWidth+"px";this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth}this.tabsArea.style.width=this.cont.offsetWidth+this.conf.tabsAreaOfs+"px";this._adjustCell(this.conf.lastActive);this._adjustTabs(true);this.callEvent("_onSetSizes",[])};this._adjustCell=function(m){if(!this.conf.contZone||m==null){return}var l=(this.conf.tabsMode=="top"?this.tabsArea.offsetHeight:0)+this.conf.tabsTop;var j=this.cont.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop;var a=this.t[m].cell.dataType;if(this.conf.skin=="dhx_skyblue"&&(a=="layout"||a=="tabbar"||a=="acc")){if(this.conf.tabsMode=="top"){l=l-1}j=j+1}if(m!=this.conf.lastActive){l=-5000;this.t[m].cell.cell.style.visibility="hidden";this.t[m].cell.cell.style.zIndex=0}this.t[m].cell._setSize(0,l,this.cont.offsetWidth,j)};this.setTabsMode=function(a){this.conf.tabsMode=(a=="bottom"?"bottom":"top");this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode;this.tabsArea.style.top=(this.conf.tabsMode=="top"?this.conf.tabsTop+"px":"auto");this.setSizes()};this._tabCss=function(o,m){var j=this.t[o].conf.active;var n=!this.t[o].conf.enabled;var l=!this.t[o].conf.visible;return"dhxtabbar_tab"+(l?" dhxtabbar_tab_hidden":(j||n?" dhxtabbar_tab"+(j?"_actv":"")+(n?"_dis":""):""))};this._getLabelWidth=function(j,h){if(this.tabsTextTest==null){this.tabsTextTest=document.createElement("SPAN");this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin}document.body.appendChild(this.tabsTextTest);this.tabsTextTest.innerHTML=j;var a=this.tabsTextTest.offsetWidth;if(window.dhx4.isIE&&a==0){a=this.tabsTextTest.offsetWidth}a+=this.conf.tabsWidth[this.conf.skin][0];if(h==true){a+=this.conf.tabsWidth[this.conf.skin][1]}document.body.removeChild(this.tabsTextTest);return a};this._adjustTabs=function(l){if(this._checkArrows()==true||l==true){this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px";this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+this.conf.tabsOfs*2+"px"}var n=this.tabsArea.childNodes[1];if(n.offsetWidth<5){n=null;return}var a=parseInt(n.childNodes[0].style[this.conf.align]);var j=null;for(var m=0;m<n.childNodes[0].childNodes.length;m++){var o=n.childNodes[0].childNodes[m]._tabId;if(o!=null&&this.t[o].conf.visible){var h=this.t[o].tab.offsetWidth-this.conf.tabsOfs;if(this.t[o].conf.active){if(a<0||n.offsetWidth<h){j={d:1,id:o}}else{if(a+h>n.offsetWidth){j={d:-1,id:o}}}}a+=h}}if(j!=null){this._moveTabs(j.d,j.id)}else{if(n.offsetWidth>a+1){n.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(n.childNodes[0].style[this.conf.align])+(n.offsetWidth-a))+"px"}}n=j=null};this._moveTabs=function(u,m){var j=this.tabsArea.childNodes[1].childNodes[0];var r=0;var v=[];var y=null;for(var a=0;a<j.childNodes.length;a++){var h=j.childNodes[a]._tabId;if(h!=null&&this.t[h].conf.visible){v.push({id:h,w:this.t[h].tab.offsetWidth-this.conf.tabsOfs,ind:r});if(h==m){y=r}r++}}var w=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]);var o=this.tabsArea.clientWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth+this.conf.tabsOfs;var s=null;var n=null;for(var a=0;a<v.length;a++){v[a].x=w;if(s==null&&w>=0&&w+v[a].w>0){s=v[a]}if(w<o&&w+v[a].w<=o){n=v[a]}w+=v[a].w}if(y!=null){var z=v[y]}else{var z=null;if(u>0){if(s==null){if(v.length>0){z=v[v.length-1]}}else{if(s.ind>0&&v.length>=s.ind){z=v[s.ind-1]}}}else{if(n==null){if(v.length>0){z=v[0]}}else{if(v.length>n.ind){z=v[n.ind+1]}}}}if(z!=null){if(u>0){if(w<o){j.style[this.conf.align]=Math.min(0,parseInt(j.style[this.conf.align])+(o-w))+"px"}else{j.style[this.conf.align]=parseInt(j.style[this.conf.align])-z.x+"px"}}else{j.style[this.conf.align]=parseInt(j.style[this.conf.align])-z.x+o-z.w+"px"}}j=z=v=null};this._getNextVisible=function(h,a){return this._getNearVisible(h,a,"next")};this._getPrevVisible=function(h,a){return this._getNearVisible(h,a,"previous")};this._getFirstVisible=function(){return this._getNearVisible(null,false,"first")};this._getNearVisible=function(n,j,m){if(m=="first"){var l=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];m="next"}else{if(n==null||this.t[n]==null){return(j?this._getFirstVisible():null)}var l=this.t[n].tab[m+"Sibling"]}var h=null;while(l!=null&&h==null){var a=l._tabId;if(a!=null&&h==null&&this.t[a].conf.visible){h=a}else{l=l[m+"Sibling"]}}l=null;return h};this._showTab=function(h,a){if(this.t[h]==null){return}if(this.t[h].conf.transActv==true){if(this.t[h].conf.transMode=="show"){return}}else{if(this.t[h].conf.visible==true){return}}if(this.conf.transProp!==false){this.t[h].conf.transActv=true;this.t[h].conf.transMode="show";this.t[h].conf.transProp=this.conf.transProp;this.t[h].conf.transActvId=(a?h:null);if(!this.t[h].conf.transEv){this.t[h].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[h].conf.transEv=true}this.t[h].conf.visible=true;this.t[h].tab.className=this._tabCss(h);this.t[h].tab.style[this.conf.transProp]=this.conf.transValueWidth;this.t[h].tab.style.width=this.t[h].conf.width+"px";if(this.t[h].tab.clientWidth>=this.t[h].conf.width){this.t[h].tab.style.visibility="visible"}}else{this.t[h].conf.visible=true;this.t[h].tab.style.display="";if(a||this.t[h].conf.active){this.t[h].conf.active=false;this._setTabActive(h)}else{this._adjustTabs()}}};this._hideTab=function(n,a){if(this.t[n]==null){return}if(this.t[n].conf.transActv==true){if(this.t[n].conf.transMode=="hide"){return}}else{if(this.t[n].conf.visible!=true){return}}var h=false;if(this.conf.lastActive==n){this.conf.lastActive=null;this.t[n].conf.active=false;this.t[n].tab.className=this._tabCss(n);h=true}var l=this._getPrevVisible(n);var j=this._getNextVisible(n);var m=(h==true&&a!==false?(a==true?null:a)||j||l:null);if(this.conf.transProp!==false){this.t[n].conf.transActv=true;this.t[n].conf.transMode="hide";this.t[n].conf.transProp=this.conf.transProp;this.t[n].conf.transActvId=m;this.t[n].conf.visible=false;if(!this.t[n].conf.transEv){this.t[n].tab.addEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[n].conf.transEv=true}this.t[n].tab.style.visibility="hidden";this.t[n].tab.className=e._tabCss(n);this.t[n].tab.style[this.conf.transProp]=this.conf.transValueWidth;this.t[n].tab.style.width="0px"}else{this.t[n].tab.style.display="none";this.t[n].conf.visible=false;if(this.conf.contZone){this.t[n].cell.cell.style.visibility="hidden";this.t[n].cell.cell.style.top="-5000px"}if(m!=null){this._setTabActive(m)}this._adjustTabs();if(this.t[n].conf.remove){this._removeTab(n)}}};this._isTabVisible=function(a){return(this.t[a].conf.visible==true)};this._doOnTrEnd=function(){var j=this._tabId;if(e.t[j]==null){return}var a=e.t[j];var h=a.conf.transActvId;if(a.conf.transMode=="hide"){if(a.conf.remove){e._removeTab(j)}else{a.tab.style[a.conf.transProp]="";if(e.conf.contZone){a.cell.cell.style.visibility="hidden";a.cell.cell.style.top="-5000px"}a.conf.transActv=false}}else{if(a.conf.transMode=="show"){a.tab.style[a.conf.transProp]="";a.tab.style.visibility="visible";a.conf.transMode=null;a.conf.transActv=false}}if(h!=null){e._setTabActive(h)}else{e._adjustTabs()}a=null};this.enableTabCloseButton=function(a){this.conf.closeButton=window.dhx4.s2b(a)};this.unload=function(){this.conf.unloading=true;this.clearAll();this.t=null;if(this.tabsTextTest!=null){if(this.tabsTextTest.parentNode){this.tabsTextTest.parentNode.removeChild(this.tabsTextTest)}this.tabsTextTest=null}window.dhx4._enableDataLoading(this,null,null,null,"clear");this.tabsArea.childNodes[0].onclick=null;this.tabsArea.childNodes[2].onclick=null;this.tabsArea.onclick=null;this.tabsArea.onselectstart=null;this.tabsArea.parentNode.removeChild(this.tabsArea);this.tabsArea=null;this.tabsMode.parentNode.removeChild(this.tabsMode);this.tabsMode=null;this._unloadTop();window.dhx4._eventable(this,"clear");for(var h in this){this[h]=null}e=null};this.enableContentZone=function(a){this.conf.contZone=(a==true)};this.setSkin=function(j){this._setBaseSkin(j);this.conf.skin=j;if(this.tabsTextTest!=null){this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin}for(var h in this.t){this.t[h].cell._resetSizeState();if(this.t[h].conf.autowidth==true){this.t[h].conf.width=this._getLabelWidth(this.t[h].conf.text,this.t[h].conf.close);if(this.t[h].conf.visible){this.t[h].tab.style.width=this.t[h].conf.width+"px"}}}this.conf.tabsAreaOfs=null;this._fixTabsOfs();this.setSizes()};this.setAlign=function(a){a=(a=="left"?"left":"right");if(a==this.conf.align){this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";return}if(this.conf.transProp!==false){this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""}this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="";this.conf.align=a;this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align+this.conf.tabsContCss;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px";if(this.conf.transProp!==false){this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos}};this._initObj=function(l){this.conf.initSeq=true;this.clearAll();var a=false;if(l.settings!=null){if(l.settings.skin!=null){this.setSkin(l.settings.skin)}if(l.settings.close_button!=null){this.enableTabCloseButton(window.dhx4.s2b(l.settings.close_button))}else{if(l.settings.closeButton!=null){this.enableTabCloseButton(window.dhx4.s2b(l.settings.closeButton))}}if(l.settings.align!=null){this.setAlign(l.settings.align)}if(l.settings.hrefmode=="ajax"){a=true}if(l.settings.hrefmode=="ajax-html"){a=true;this.conf.url_demand=true}}if(l.tabs!=null){for(var j=0;j<l.tabs.length;j++){var h=l.tabs[j];if(typeof(h.id)=="undefined"){h.id=window.dhx4.newId()}if(!isNaN(parseInt(h.width))){h.width=parseInt(h.width)}else{h.width=null}this.addTab(h.id,h.text||h.label||"",h.width,h.index,window.dhx4.s2b(h.selected)||window.dhx4.s2b(h.active),h.close);if(h.content!=null){this.cells(h.id).attachHTMLString(h.content)}else{if(h.href!=null){if(this.conf.url_demand==true){this.conf.urls[h.id]={href:h.href,ajax:a}}else{this.cells(h.id).attachURL(h.href,a)}}}if(typeof(h.enabled)!="undefined"&&window.dhx4.s2b(h.enabled)==false){this.tabs(h.id).disable()}else{if(typeof(h.disabled)!="undefined"&&window.dhx4.s2b(h.disabled)==true){this.tabs(h.id).disable()}}}}this.conf.initSeq=false;if(this.conf.arwMode=="auto"){this.setSizes()}if(this.conf.url_demand==true){this._loadURLOnDemand(this.conf.lastActive)}};this._xmlToObj=function(n){var m={settings:{},tabs:[]};var h=n.getElementsByTagName("tabbar")[0];if(h!=null){for(var o in {skin:1,align:1,closeButton:1,hrefmode:1}){if(h.getAttribute(o)!=null){m.settings[o]=h.getAttribute(o)}}var u=h.getElementsByTagName("tab");for(var j=0;j<u.length;j++){var l={text:(u[j].firstChild.nodeValue||"")};for(var o in {id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1}){if(u[j].getAttribute(o)!=null){l[o]=u[j].getAttribute(o)}}var v=u[j].getElementsByTagName("content")[0];if(v!=null){l.content="";for(var s=0;s<v.childNodes.length;s++){l.content+=(v.childNodes[s].nodeValue||"")}}m.tabs.push(l)}}return m};dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:true});var c=window.dhx4.transDetect();this.conf.transProp=c.transProp;this.conf.transEv=c.transEv;this.conf.transValueWidth="width "+this.conf.transSpeed;c=null;if(this.conf.transProp!==false){this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed;this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos}this._callMainEvent=function(h,a){return this.callEvent(h,a)};window.dhx4._eventable(this);if(this.conf.autoload.json!=null){this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload)}else{if(this.conf.autoload.xml!=null){this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload)}else{if(this.conf.autoload.tabs!=null){this.loadStruct({tabs:this.conf.autoload.tabs},this.conf.autoload.onload)}}}if(this.conf.autoload.arrows_mode!=null){this.setArrowsMode(this.conf.autoload.arrows_mode)}this._fixTabsOfs();this.setSizes();return this}dhtmlXTabBar.prototype=new dhtmlXCellTop();dhtmlXTabBar.prototype._fixTabsOfs=function(){this.conf.tabsOfs=({dhx_skyblue:1,dhx_web:0,dhx_terrace:1,material:0}[this.conf.skin])};dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(a){if(this.t[a]){return this.t[a].cell}return null};dhtmlXTabBar.prototype.getAllTabs=function(){var c=[];for(var b in this.t){c.push(b)}return c};dhtmlXTabBar.prototype._setTabActive=function(b,a){if(!this.t[b]||this.t[b].conf.active){return}if(typeof(a)=="undefined"){a=true}if(a==true&&this.callEvent("onSelect",[b,this.conf.lastActive])!==true){return}this.setTabInActive();this.t[b].conf.active=true;if(this.conf.contZone){this.t[b].cell.cell.style.visibility="visible";this.t[b].cell.cell.style.top="0px";this.t[b].cell.cell.style.zIndex=1}this.t[b].tab.className=this._tabCss(b);this.conf.lastActive=b;this.setSizes();if(this.conf.url_demand==true){this._loadURLOnDemand(b)}};dhtmlXTabBar.prototype.setTabInActive=function(){if(this.conf.lastActive!=null&&this.t[this.conf.lastActive]){this.t[this.conf.lastActive].conf.active=false;if(this.conf.contZone){this.t[this.conf.lastActive].cell.cell.style.visibility="hidden";this.t[this.conf.lastActive].cell.cell.style.top="-5000px";this.t[this.conf.lastActive].cell.cell.style.zIndex=0}this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive);this.conf.lastActive=null}};dhtmlXTabBar.prototype._isTabActive=function(a){return(a==this.conf.lastActive&&this.conf.lastActive!=null)};dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive};dhtmlXTabBar.prototype.goToNextTab=function(){var a=this._getNextVisible(this.conf.lastActive,true);if(a!=null){this._setTabActive(a)}};dhtmlXTabBar.prototype.goToPrevTab=function(){var a=this._getPrevVisible(this.conf.lastActive,true);if(a!=null){this._setTabActive(a)}};dhtmlXTabBar.prototype._enableTab=function(b,a){if(!this.t[b]||this.t[b].conf.enabled){return}this.t[b].conf.enabled=true;this.t[b].tab.className=this._tabCss(b);if(a==true){this._setTabActive(b)}};dhtmlXTabBar.prototype._disableTab=function(b,a){if(!this.t[b]||!this.t[b].conf.enabled){return}this.t[b].conf.enabled=false;this.t[b].tab.className=this._tabCss(b);if(a!==false&&this.conf.lastActive==b){if(a==true){a=this._getNextVisible(b)||this._getPrevVisible(b)}this._setTabActive(a)}};dhtmlXTabBar.prototype._isTabEnabled=function(a){return(this.t[a]!=null&&this.t[a].conf.enabled==true)};dhtmlXTabBar.prototype._setTabText=function(d,c,b){if(!this.t[d]){return}var a=false;if(typeof(b)=="undefined"||b==null){b=this._getLabelWidth(c,this.t[d].conf.close);a=true}this.t[d].tab.style.width=b+"px";this.t[d].tab.childNodes[0].innerHTML=c;this.t[d].conf.text=c;this.t[d].conf.width=b;this.t[d].conf.autowidth=a};dhtmlXTabBar.prototype._getTabText=function(a){if(!this.t[a]){return null}return this.t[a].conf.text};dhtmlXTabBar.prototype._removeTab=function(h,c,f){if(!this.t[h]){return}if(f!=true&&this.t[h].conf.remove!=true){this.t[h].conf.remove=true;this._hideTab(h,c);return}if(typeof(c)=="undefined"){c=true}var d=this._getNextVisible(h);var e=this._getPrevVisible(h);if(this.t[h].conf.transEv==true){this.t[h].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd,false);this.t[h].conf.transEv=false}for(var b in this.t[h].conf){this.t[h].conf[b]=null}this.t[h].conf=null;delete this.t[h].conf;this.t[h].cell._unload();this.t[h].cell=null;this.t[h].tab.parentNode.removeChild(this.t[h].tab);this.t[h].tab=null;this.t[h]=null;delete this.t[h];this.conf.urls[h]=null;delete this.conf.urls[h];if(this.conf.lastActive==h){this.conf.lastActive=null;if(c!=false){var g=(c==true?(d||e||this._getFirstVisible()):c);if(g!=null){this._setTabActive(g)}}}else{if(f!=true){this._adjustTabs()}}};dhtmlXTabBar.prototype.clearAll=function(){for(var b in this.t){this._removeTab(b,false,true)}this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"};dhtmlXTabBar.prototype.moveTab=function(c,a){if(!this.t[c]||a<0){return}a+=1;var b=this.tabsArea.childNodes[1].firstChild;if(b.childNodes[a]!=this.t[c].tab){b.removeChild(this.t[c].tab);if(a>=b.childNodes.length){b.appendChild(this.t[c].tab)}else{b.insertBefore(this.t[c].tab,b.childNodes[a])}}b=null};dhtmlXTabBar.prototype._getIndex=function(d){var a=-1;var c=this.tabsArea.childNodes[1].firstChild;for(var b=1;b<c.childNodes.length;b++){if(c.childNodes[b]._tabId==d){a=b-1}}c=null;return a};dhtmlXTabBar.prototype.getNumberOfTabs=function(d){var c=0;for(var b in this.t){c+=(d!=true?1:(this.t[b].conf.visible==true?1:0))}return c};dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(c){for(var b in this.t){c.apply(window,[this.t[b].cell])}};dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFSResize()};dhtmlXTabBar.prototype.setArrowsMode=function(a){a={auto:"auto",always:"always"}[String(a)];if(a==null||a==this.conf.mode){return}this.conf.arwMode=a;if(a=="always"){this.tabsArea.childNodes[0].className="dhxtabbar_tabs_ar_left";this.tabsArea.childNodes[2].className="dhxtabbar_tabs_ar_right"}this.setSizes()};dhtmlXTabBar.prototype._checkArrows=function(){var e=false;if(this.conf.arwMode=="auto"){var d=0;for(var c in this.t){d+=this.t[c].tab.offsetWidth}var b=this.tabsArea.childNodes[0];var f=this.tabsArea.childNodes[2];if(d>this.cont.offsetWidth){if(b.className.search(/dhxtabbar_tabs_ar_hidden/)>=0){b.className=b.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,"");f.className=f.className.replace(/\s{0,}dhxtabbar_tabs_ar_hidden/,"");e=true}}else{if(b.className.search(/dhxtabbar_tabs_ar_hidden/)<1){b.className+=" dhxtabbar_tabs_ar_hidden";f.className+=" dhxtabbar_tabs_ar_hidden";e=true}}b=f=null}return e};dhtmlXTabBar.prototype._loadURLOnDemand=function(a){if(a!=null&&this.conf.urls[a]!=null){this.cells(a).attachURL(this.conf.urls[a].href,this.conf.urls[a].ajax);this.conf.urls[a]=null}};window.dhtmlXTabBarCell=function(d,c){dhtmlXCellObject.apply(this,[d,"_tabbar"]);this.tabbar=c;this.conf.skin=this.tabbar.conf.skin;this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"};this._tabbarCall=function(a){return function(){var e=[this._idd];for(var f=0;f<arguments.length;f++){e.push(arguments[f])}return this.tabbar[a].apply(this.tabbar,e)}};for(var b in this.conf.tabbar_funcs){if(typeof(this[b])!="function"){this[b]=this._tabbarCall(this.conf.tabbar_funcs[b])}}this.attachEvent("_onCellUnload",function(){this.tabbar=null;for(var e in this.conf.tabbar_funcs){this[e]=null;this.conf.tabbar_funcs[e]=null}this.conf.tabbar_funcs=null});this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments);this.tabbar._callMainEvent("onTabContentLoaded",arguments)});this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)});this.attachEvent("_onBeforeContentAttach",function(a){if(a=="sidebar"&&this.conf.skin!="dhx_skyblue"){this._hideBorders()}})};window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject();dhtmlXCellObject.prototype.attachTabbar=function(a){this.callEvent("_onBeforeContentAttach",["tabbar"]);if(typeof(a)=="string"){a={mode:a}}else{if(typeof(a)!="object"||a==null){a={}}}var b=document.createElement("DIV");b.style.width="100%";b.style.height="100%";b.style.position="relative";b.style.overflow="hidden";if(typeof(window.dhtmlXAccordionCell)=="function"&&this instanceof window.dhtmlXAccordionCell){if(this.conf.skin=="material"){b._ofs={t:-1,r:-1,b:-1,l:-1}}else{b._ofs={t:-1}}}if(typeof(window.dhtmlXTabBarCell)=="function"&&this instanceof window.dhtmlXTabBarCell){if(this.conf.skin=="dhx_skyblue"){b._ofs={t:-1,r:-1,b:-1,l:-1}}if(this.conf.skin=="material"){b._ofs={t:8,r:8,b:8,l:8}}}if(typeof(window.dhtmlXSideBarCell)=="function"&&this instanceof window.dhtmlXSideBarCell){b._ofs={l:-1};if(this.conf.skin=="dhx_web"&&this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.conf.skin=="dhx_terrace"){if(this.sidebar.conf.autohide==true){b._ofs.l=0}if(this.sidebar.conf.header==true){b._ofs.t=-1}}}if(typeof(window.dhtmlXCarouselCell)=="function"&&this instanceof window.dhtmlXCarouselCell){this._hideBorders()}this._attachObject(b);a.skin=this.conf.skin;a.parent=b;this.dataType="tabbar";this.dataObj=new dhtmlXTabBar(a);a.parent=b=null;a=null;this.callEvent("_onContentAttach",[]);return this.dataObj};function dhtmlXTabBarInitFromHTML(){var z=document.getElementsByTagName("div");for(var i=0;i<z.length;i++){if(z[i].className.indexOf("dhtmlxTabBar")!=-1){var conf={settings:{},tabs:[]};var n=z[i];var id=n.id;n.className="";var k=new Array();for(var j=0;j<n.childNodes.length;j++){if(n.childNodes[j].tagName&&n.childNodes[j].tagName!="!"){k[k.length]=n.childNodes[j]}}var skin=n.getAttribute("skin");if(skin!=null){conf.settings.skin=skin}var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute("mode")});window[id]=w;acs=n.getAttribute("onbeforeinit");if(acs){eval(acs)}align=n.getAttribute("align");if(align){conf.settings.align=align}var cont={};for(var j=0;j<k.length;j++){var m=k[j];var tab={id:m.id,text:m.getAttribute("name"),width:m.getAttribute("width"),selected:m.getAttribute("selected"),active:m.getAttribute("active"),close:m.getAttribute("close")};var href=m.getAttribute("href");if(href){cont[m.id]={href:href}}else{cont[m.id]={cont:m}}conf.tabs.push(tab)}w.loadStruct(conf);for(var a in cont){if(cont[a].href){w.cells(a).attachURL(cont[a].href);cont[a].href=null}else{w.cells(a).attachObject(cont[a].cont);if(cont[a].cont.style.display=="none"){cont[a].cont.style.display=""}cont[a].cont=null}cont[a]=null}var selId=n.getAttribute("select");if(selId!=null){w.tabs(selId).setActive()}else{if(w.getActiveTab()==null){var v=w._getFirstVisible();if(v!=null){w.cells(v).setActive()}}}acs=n.getAttribute("oninit");if(acs){eval(acs)}}}if(typeof(window.addEventListener)=="function"){window.removeEventListener("load",dhtmlXTabBarInitFromHTML,false)}else{window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}}if(typeof(window.addEventListener)=="function"){window.addEventListener("load",dhtmlXTabBarInitFromHTML,false)}else{window.attachEvent("onload",dhtmlXTabBarInitFromHTML)};